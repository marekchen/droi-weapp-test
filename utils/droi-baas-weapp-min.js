!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).DroiBaaS=t()}}(function(){return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=r[s]={exports:{}};e[s][0].call(h.exports,function(t){var r=e[s][1][t];return i(r||t)},h,h.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){(function(n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("./src"),o=this;void 0!==n?o=n:"undefined"!=typeof window&&(o=window),o.DroiBaaS=i,void 0!==e&&(e.exports=i)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./src":65}],2:[function(t,e,r){var n;!function(t){t("undefined"==typeof DO_NOT_EXPORT_ADLER?"object"==typeof r?r:n={}:n={})}(function(t){t.version="1.1.0",t.bstr=function(t,e){var r=1,n=0,i=t.length,o=0;"number"==typeof e&&(r=65535&e,n=e>>>16);for(var s=0;s<i;){for(o=Math.min(i-s,3850)+s;s<o;s++)n+=r+=255&t.charCodeAt(s);r=15*(r>>>16)+(65535&r),n=15*(n>>>16)+(65535&n)}return n%65521<<16|r%65521},t.buf=function(t,e){var r=1,n=0,i=t.length,o=0;"number"==typeof e&&(r=65535&e,n=e>>>16&65535);for(var s=0;s<i;){for(o=Math.min(i-s,3850)+s;s<o;s++)n+=r+=255&t[s];r=15*(r>>>16)+(65535&r),n=15*(n>>>16)+(65535&n)}return n%65521<<16|r%65521},t.str=function(t,e){var r=1,n=0,i=t.length,o=0,s=0,a=0;"number"==typeof e&&(r=65535&e,n=e>>>16);for(var u=0;u<i;){for(o=Math.min(i-u,3850);o>0;)(s=t.charCodeAt(u++))<128?r+=s:s<2048?(n+=r+=192|s>>6&31,--o,r+=128|63&s):s>=55296&&s<57344?(n+=r+=240|(s=64+(1023&s))>>8&7,--o,n+=r+=128|s>>2&63,--o,n+=r+=128|(a=1023&t.charCodeAt(u++))>>6&15|(3&s)<<4,--o,r+=128|63&a):(n+=r+=224|s>>12&15,--o,n+=r+=128|s>>6&63,--o,r+=128|63&s),n+=r,--o;r=15*(r>>>16)+(65535&r),n=15*(n>>>16)+(65535&n)}return n%65521<<16|r%65521}})},{}],3:[function(t,e,r){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return s[t>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}function o(t,e,r){for(var n,o=[],s=e;s<r;s+=3)n=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(i(n));return o.join("")}r.byteLength=function(t){return 3*t.length/4-n(t)},r.toByteArray=function(t){var e,r,i,o,s,c=t.length;o=n(t),s=new u(3*c/4-o),r=o>0?c-4:c;var h=0;for(e=0;e<r;e+=4)i=a[t.charCodeAt(e)]<<18|a[t.charCodeAt(e+1)]<<12|a[t.charCodeAt(e+2)]<<6|a[t.charCodeAt(e+3)],s[h++]=i>>16&255,s[h++]=i>>8&255,s[h++]=255&i;return 2===o?(i=a[t.charCodeAt(e)]<<2|a[t.charCodeAt(e+1)]>>4,s[h++]=255&i):1===o&&(i=a[t.charCodeAt(e)]<<10|a[t.charCodeAt(e+1)]<<4|a[t.charCodeAt(e+2)]>>2,s[h++]=i>>8&255,s[h++]=255&i),s},r.fromByteArray=function(t){for(var e,r=t.length,n=r%3,i="",a=[],u=0,c=r-n;u<c;u+=16383)a.push(o(t,u,u+16383>c?c:u+16383));return 1===n?(e=t[r-1],i+=s[e>>2],i+=s[e<<4&63],i+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],i+=s[e>>10],i+=s[e>>4&63],i+=s[e<<2&63],i+="="),a.push(i),a.join("")};for(var s=[],a=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,l=c.length;h<l;++h)s[h]=c[h],a[c.charCodeAt(h)]=h;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},{}],4:[function(t,e,r){"use strict";function n(t){if(t>H)throw new RangeError("Invalid typed array length");var e=new Uint8Array(t);return e.__proto__=i.prototype,e}function i(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return a(t)}return o(t,e,r)}function o(t,e,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return C(t)?function(t,e,r){if(e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(r||0))throw new RangeError("'length' is out of bounds");var n;n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r);return n.__proto__=i.prototype,n}(t,e,r):"string"==typeof t?function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!i.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,e),o=n(r),s=o.write(t,e);s!==r&&(o=o.slice(0,s));return o}(t,e):function(t){if(i.isBuffer(t)){var e=0|c(t.length),r=n(e);return 0===r.length?r:(t.copy(r,0,0,e),r)}if(t){if(P(t)||"length"in t)return"number"!=typeof t.length||U(t.length)?n(0):u(t);if("Buffer"===t.type&&Array.isArray(t.data))return u(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t){return s(t),n(t<0?0:0|c(t))}function u(t){for(var e=t.length<0?0:0|c(t.length),r=n(e),i=0;i<e;i+=1)r[i]=255&t[i];return r}function c(t){if(t>=H)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+H.toString(16)+" bytes");return 0|t}function h(t,e){if(i.isBuffer(t))return t.length;if(P(t)||C(t))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return O(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return I(t).length;default:if(n)return O(t).length;e=(""+e).toLowerCase(),n=!0}}function l(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,e,r){var n=t.length;(!e||e<0)&&(e=0);(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(t[o]);return i}(this,e,r);case"utf8":case"utf-8":return D(this,e,r);case"ascii":return function(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}(this,e,r);case"latin1":case"binary":return function(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}(this,e,r);case"base64":return function(t,e,r){return 0===e&&r===t.length?N.fromByteArray(t):N.fromByteArray(t.slice(e,r))}(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function f(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function p(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,U(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=i.from(e,n)),i.isBuffer(e))return 0===e.length?-1:d(t,e,r,n,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):d(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function d(t,e,r,n,i){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}var c;if(i){var h=-1;for(c=r;c<a;c++)if(o(t,c)===o(e,-1===h?0:c-h)){if(-1===h&&(h=c),c-h+1===u)return h*s}else-1!==h&&(c-=c-h),h=-1}else for(r+u>a&&(r=a-u),c=r;c>=0;c--){for(var l=!0,f=0;f<u;f++)if(o(t,c+f)!==o(e,f)){l=!1;break}if(l)return c}return-1}function _(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(U(a))return s;t[r+s]=a}return s}function y(t,e,r,n){return A(O(e,t.length-r),t,r,n)}function E(t,e,r,n){return A(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function v(t,e,r,n){return E(t,e,r,n)}function g(t,e,r,n){return A(I(e),t,r,n)}function S(t,e,r,n){return A(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function D(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var u,c,h,l;switch(a){case 1:o<128&&(s=o);break;case 2:128==(192&(u=t[i+1]))&&(l=(31&o)<<6|63&u)>127&&(s=l);break;case 3:u=t[i+1],c=t[i+2],128==(192&u)&&128==(192&c)&&(l=(15&o)<<12|(63&u)<<6|63&c)>2047&&(l<55296||l>57343)&&(s=l);break;case 4:u=t[i+1],c=t[i+2],h=t[i+3],128==(192&u)&&128==(192&c)&&128==(192&h)&&(l=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&h)>65535&&l<1114112&&(s=l)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return function(t){var e=t.length;if(e<=L)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=L));return r}(n)}function T(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function m(t,e,r,n,o,s){if(!i.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function b(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function R(t,e,r,n,i){return e=+e,r>>>=0,i||b(t,0,r,4),x.write(t,e,r,n,23,4),r+4}function w(t,e,r,n,i){return e=+e,r>>>=0,i||b(t,0,r,8),x.write(t,e,r,n,52,8),r+8}function O(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function I(t){return N.toByteArray(function(t){if((t=t.trim().replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function A(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function C(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength}function P(t){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(t)}function U(t){return t!=t}var N=t("base64-js"),x=t("ieee754");r.Buffer=i,r.SlowBuffer=function(t){return+t!=t&&(t=0),i.alloc(+t)},r.INSPECT_MAX_BYTES=50;var H=2147483647;r.kMaxLength=H,(i.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(t,e,r){return o(t,e,r)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(t,e,r){return function(t,e,r){return s(t),t<=0?n(t):void 0!==e?"string"==typeof r?n(t).fill(e,r):n(t).fill(e):n(t)}(t,e,r)},i.allocUnsafe=function(t){return a(t)},i.allocUnsafeSlow=function(t){return a(t)},i.isBuffer=function(t){return null!=t&&!0===t._isBuffer},i.compare=function(t,e){if(!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,s=Math.min(r,n);o<s;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return i.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=i.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var s=t[r];if(!i.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n},i.byteLength=h,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)f(this,e,e+1);return this},i.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)f(this,e,e+3),f(this,e+1,e+2);return this},i.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)f(this,e,e+7),f(this,e+1,e+6),f(this,e+2,e+5),f(this,e+3,e+4);return this},i.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?D(this,0,t):l.apply(this,arguments)},i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===i.compare(this,t)},i.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},i.prototype.compare=function(t,e,r,n,o){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,o>>>=0,this===t)return 0;for(var s=o-n,a=r-e,u=Math.min(s,a),c=this.slice(n,o),h=t.slice(e,r),l=0;l<u;++l)if(c[l]!==h[l]){s=c[l],a=h[l];break}return s<a?-1:a<s?1:0},i.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},i.prototype.indexOf=function(t,e,r){return p(this,t,e,r,!0)},i.prototype.lastIndexOf=function(t,e,r){return p(this,t,e,r,!1)},i.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return _(this,t,e,r);case"utf8":case"utf-8":return y(this,t,e,r);case"ascii":return E(this,t,e,r);case"latin1":case"binary":return v(this,t,e,r);case"base64":return g(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;i.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return n.__proto__=i.prototype,n},i.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},i.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},i.prototype.readUInt8=function(t,e){return t>>>=0,e||T(t,1,this.length),this[t]},i.prototype.readUInt16LE=function(t,e){return t>>>=0,e||T(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUInt16BE=function(t,e){return t>>>=0,e||T(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUInt32LE=function(t,e){return t>>>=0,e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUInt32BE=function(t,e){return t>>>=0,e||T(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},i.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},i.prototype.readInt8=function(t,e){return t>>>=0,e||T(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){t>>>=0,e||T(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(t,e){t>>>=0,e||T(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(t,e){return t>>>=0,e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return t>>>=0,e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readFloatLE=function(t,e){return t>>>=0,e||T(t,4,this.length),x.read(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return t>>>=0,e||T(t,4,this.length),x.read(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return t>>>=0,e||T(t,8,this.length),x.read(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return t>>>=0,e||T(t,8,this.length),x.read(this,t,!1,52,8)},i.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){m(this,t,e,r,Math.pow(2,8*r)-1,0)}var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},i.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){m(this,t,e,r,Math.pow(2,8*r)-1,0)}var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},i.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||m(this,t,e,1,255,0),this[e]=255&t,e+1},i.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||m(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||m(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||m(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},i.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||m(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);m(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},i.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);m(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},i.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||m(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},i.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||m(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||m(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||m(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},i.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||m(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeFloatLE=function(t,e,r){return R(this,t,e,!0,r)},i.prototype.writeFloatBE=function(t,e,r){return R(this,t,e,!1,r)},i.prototype.writeDoubleLE=function(t,e,r){return w(this,t,e,!0,r)},i.prototype.writeDoubleBE=function(t,e,r){return w(this,t,e,!1,r)},i.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},i.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var s;if("number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var a=i.isBuffer(t)?t:new i(t,n),u=a.length;for(s=0;s<r-e;++s)this[s+e]=a[s%u]}return this};var M=/[^+/0-9A-Za-z-_]/g},{"base64-js":3,ieee754:15}],5:[function(t,e,r){function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}void 0!==e&&(e.exports=n),n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n,i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks["$"+t];if(r)for(var n=0,i=(r=r.slice(0)).length;n<i;++n)r[n].apply(this,e);return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],6:[function(t,e,r){!function(t){"use strict";function r(t){return t.map(function(t){return function(t,e){return t.length>e?t:Array(e-t.length+1).join("0")+t}(t.toString(16),2)}).join("")}var n={bytesToHex:function(t){return r(t)},hexToBytes:function(t){if(t.length%2==1)throw new Error("hexToBytes can't have a string with an odd number of characters.");return 0===t.indexOf("0x")&&(t=t.slice(2)),t.match(/../g).map(function(t){return parseInt(t,16)})}};void 0!==e&&e.exports?e.exports=n:t.convertHex=n}(this)},{}],7:[function(t,e,r){!function(t){"use strict";var r={bytesToString:function(t){return t.map(function(t){return String.fromCharCode(t)}).join("")},stringToBytes:function(t){return t.split("").map(function(t){return t.charCodeAt(0)})}};r.UTF8={bytesToString:function(t){return decodeURIComponent(escape(r.bytesToString(t)))},stringToBytes:function(t){return r.stringToBytes(unescape(encodeURIComponent(t)))}},void 0!==e&&e.exports?e.exports=r:t.convertString=r}(this)},{}],8:[function(t,e,r){r.UINT32=t("./lib/uint32"),r.UINT64=t("./lib/uint64")},{"./lib/uint32":9,"./lib/uint64":10}],9:[function(t,e,r){!function(t){function r(t,e){return this instanceof r?(this._low=0,this._high=0,this.remainder=null,void 0===e?i.call(this,t):"string"==typeof t?o.call(this,t,e):void n.call(this,t,e)):new r(t,e)}function n(t,e){return this._low=0|t,this._high=0|e,this}function i(t){return this._low=65535&t,this._high=t>>>16,this}function o(t,e){var r=parseInt(t,e||10);return this._low=65535&r,this._high=r>>>16,this}r(Math.pow(36,5)),r(Math.pow(16,7)),r(Math.pow(10,9)),r(Math.pow(2,30)),r(36),r(16),r(10),r(2);r.prototype.fromBits=n,r.prototype.fromNumber=i,r.prototype.fromString=o,r.prototype.toNumber=function(){return 65536*this._high+this._low},r.prototype.toString=function(t){return this.toNumber().toString(t||10)},r.prototype.add=function(t){var e=this._low+t._low,r=e>>>16;return r+=this._high+t._high,this._low=65535&e,this._high=65535&r,this},r.prototype.subtract=function(t){return this.add(t.clone().negate())},r.prototype.multiply=function(t){var e,r,n=this._high,i=this._low,o=t._high,s=t._low;return r=i*s,e=r>>>16,e+=n*s,e&=65535,e+=i*o,this._low=65535&r,this._high=65535&e,this},r.prototype.div=function(t){if(0==t._low&&0==t._high)throw Error("division by zero");if(0==t._high&&1==t._low)return this.remainder=new r(0),this;if(t.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(t))return this.remainder=new r(0),this._low=1,this._high=0,this;for(var e=t.clone(),n=-1;!this.lt(e);)e.shiftLeft(1,!0),n++;for(this.remainder=this.clone(),this._low=0,this._high=0;n>=0;n--)e.shiftRight(1),this.remainder.lt(e)||(this.remainder.subtract(e),n>=16?this._high|=1<<n-16:this._low|=1<<n);return this},r.prototype.negate=function(){var t=1+(65535&~this._low);return this._low=65535&t,this._high=~this._high+(t>>>16)&65535,this},r.prototype.equals=r.prototype.eq=function(t){return this._low==t._low&&this._high==t._high},r.prototype.greaterThan=r.prototype.gt=function(t){return this._high>t._high||!(this._high<t._high)&&this._low>t._low},r.prototype.lessThan=r.prototype.lt=function(t){return this._high<t._high||!(this._high>t._high)&&this._low<t._low},r.prototype.or=function(t){return this._low|=t._low,this._high|=t._high,this},r.prototype.and=function(t){return this._low&=t._low,this._high&=t._high,this},r.prototype.not=function(){return this._low=65535&~this._low,this._high=65535&~this._high,this},r.prototype.xor=function(t){return this._low^=t._low,this._high^=t._high,this},r.prototype.shiftRight=r.prototype.shiftr=function(t){return t>16?(this._low=this._high>>t-16,this._high=0):16==t?(this._low=this._high,this._high=0):(this._low=this._low>>t|this._high<<16-t&65535,this._high>>=t),this},r.prototype.shiftLeft=r.prototype.shiftl=function(t,e){return t>16?(this._high=this._low<<t-16,this._low=0,e||(this._high&=65535)):16==t?(this._high=this._low,this._low=0):(this._high=this._high<<t|this._low>>16-t,this._low=this._low<<t&65535,e||(this._high&=65535)),this},r.prototype.rotateLeft=r.prototype.rotl=function(t){var e=this._high<<16|this._low;return e=e<<t|e>>>32-t,this._low=65535&e,this._high=e>>>16,this},r.prototype.rotateRight=r.prototype.rotr=function(t){var e=this._high<<16|this._low;return e=e>>>t|e<<32-t,this._low=65535&e,this._high=e>>>16,this},r.prototype.clone=function(){return new r(this._low,this._high)},void 0!==e&&e.exports?e.exports=r:t.UINT32=r}(this)},{}],10:[function(t,e,r){!function(t){function r(t,e,s,a){return this instanceof r?(this.remainder=null,"string"==typeof t?o.call(this,t,e):void 0===e?i.call(this,t):void n.apply(this,arguments)):new r(t,e,s,a)}function n(t,e,r,n){return void 0===r?(this._a00=65535&t,this._a16=t>>>16,this._a32=65535&e,this._a48=e>>>16,this):(this._a00=0|t,this._a16=0|e,this._a32=0|r,this._a48=0|n,this)}function i(t){return this._a00=65535&t,this._a16=t>>>16,this._a32=0,this._a48=0,this}function o(t,e){e=e||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var n=s[e]||new r(Math.pow(e,5)),i=0,o=t.length;i<o;i+=5){var a=Math.min(5,o-i),u=parseInt(t.slice(i,i+a),e);this.multiply(a<5?new r(Math.pow(e,a)):n).add(new r(u))}return this}var s={16:r(Math.pow(16,5)),10:r(Math.pow(10,5)),2:r(Math.pow(2,5))},a={16:r(16),10:r(10),2:r(2)};r.prototype.fromBits=n,r.prototype.fromNumber=i,r.prototype.fromString=o,r.prototype.toNumber=function(){return 65536*this._a16+this._a00},r.prototype.toString=function(t){var e=a[t=t||10]||new r(t);if(!this.gt(e))return this.toNumber().toString(t);for(var n=this.clone(),i=new Array(64),o=63;o>=0&&(n.div(e),i[o]=n.remainder.toNumber().toString(t),n.gt(e));o--);return i[o-1]=n.toNumber().toString(t),i.join("")},r.prototype.add=function(t){var e=this._a00+t._a00,r=e>>>16,n=(r+=this._a16+t._a16)>>>16,i=(n+=this._a32+t._a32)>>>16;return i+=this._a48+t._a48,this._a00=65535&e,this._a16=65535&r,this._a32=65535&n,this._a48=65535&i,this},r.prototype.subtract=function(t){return this.add(t.clone().negate())},r.prototype.multiply=function(t){var e=this._a00,r=this._a16,n=this._a32,i=this._a48,o=t._a00,s=t._a16,a=t._a32,u=e*o,c=u>>>16,h=(c+=e*s)>>>16;c&=65535,h+=(c+=r*o)>>>16;var l=(h+=e*a)>>>16;return h&=65535,h+=r*s,l+=h>>>16,h&=65535,h+=n*o,l+=h>>>16,l+=e*t._a48,l&=65535,l+=r*a,l&=65535,l+=n*s,l&=65535,l+=i*o,this._a00=65535&u,this._a16=65535&c,this._a32=65535&h,this._a48=65535&l,this},r.prototype.div=function(t){if(0==t._a16&&0==t._a32&&0==t._a48){if(0==t._a00)throw Error("division by zero");if(1==t._a00)return this.remainder=new r(0),this}if(t.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(t))return this.remainder=new r(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var e=t.clone(),n=-1;!this.lt(e);)e.shiftLeft(1,!0),n++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;n>=0;n--)e.shiftRight(1),this.remainder.lt(e)||(this.remainder.subtract(e),n>=48?this._a48|=1<<n-48:n>=32?this._a32|=1<<n-32:n>=16?this._a16|=1<<n-16:this._a00|=1<<n);return this},r.prototype.negate=function(){var t=1+(65535&~this._a00);return this._a00=65535&t,t=(65535&~this._a16)+(t>>>16),this._a16=65535&t,t=(65535&~this._a32)+(t>>>16),this._a32=65535&t,this._a48=~this._a48+(t>>>16)&65535,this},r.prototype.equals=r.prototype.eq=function(t){return this._a48==t._a48&&this._a00==t._a00&&this._a32==t._a32&&this._a16==t._a16},r.prototype.greaterThan=r.prototype.gt=function(t){return this._a48>t._a48||!(this._a48<t._a48)&&(this._a32>t._a32||!(this._a32<t._a32)&&(this._a16>t._a16||!(this._a16<t._a16)&&this._a00>t._a00))},r.prototype.lessThan=r.prototype.lt=function(t){return this._a48<t._a48||!(this._a48>t._a48)&&(this._a32<t._a32||!(this._a32>t._a32)&&(this._a16<t._a16||!(this._a16>t._a16)&&this._a00<t._a00))},r.prototype.or=function(t){return this._a00|=t._a00,this._a16|=t._a16,this._a32|=t._a32,this._a48|=t._a48,this},r.prototype.and=function(t){return this._a00&=t._a00,this._a16&=t._a16,this._a32&=t._a32,this._a48&=t._a48,this},r.prototype.xor=function(t){return this._a00^=t._a00,this._a16^=t._a16,this._a32^=t._a32,this._a48^=t._a48,this},r.prototype.not=function(){return this._a00=65535&~this._a00,this._a16=65535&~this._a16,this._a32=65535&~this._a32,this._a48=65535&~this._a48,this},r.prototype.shiftRight=r.prototype.shiftr=function(t){return(t%=64)>=48?(this._a00=this._a48>>t-48,this._a16=0,this._a32=0,this._a48=0):t>=32?(t-=32,this._a00=65535&(this._a32>>t|this._a48<<16-t),this._a16=this._a48>>t&65535,this._a32=0,this._a48=0):t>=16?(t-=16,this._a00=65535&(this._a16>>t|this._a32<<16-t),this._a16=65535&(this._a32>>t|this._a48<<16-t),this._a32=this._a48>>t&65535,this._a48=0):(this._a00=65535&(this._a00>>t|this._a16<<16-t),this._a16=65535&(this._a16>>t|this._a32<<16-t),this._a32=65535&(this._a32>>t|this._a48<<16-t),this._a48=this._a48>>t&65535),this},r.prototype.shiftLeft=r.prototype.shiftl=function(t,e){return(t%=64)>=48?(this._a48=this._a00<<t-48,this._a32=0,this._a16=0,this._a00=0):t>=32?(t-=32,this._a48=this._a16<<t|this._a00>>16-t,this._a32=this._a00<<t&65535,this._a16=0,this._a00=0):t>=16?(t-=16,this._a48=this._a32<<t|this._a16>>16-t,this._a32=65535&(this._a16<<t|this._a00>>16-t),this._a16=this._a00<<t&65535,this._a00=0):(this._a48=this._a48<<t|this._a32>>16-t,this._a32=65535&(this._a32<<t|this._a16>>16-t),this._a16=65535&(this._a16<<t|this._a00>>16-t),this._a00=this._a00<<t&65535),e||(this._a48&=65535),this},r.prototype.rotateLeft=r.prototype.rotl=function(t){if(0==(t%=64))return this;if(t>=32){var e=this._a00;if(this._a00=this._a32,this._a32=e,e=this._a48,this._a48=this._a16,this._a16=e,32==t)return this;t-=32}var r=this._a48<<16|this._a32,n=this._a16<<16|this._a00,i=r<<t|n>>>32-t,o=n<<t|r>>>32-t;return this._a00=65535&o,this._a16=o>>>16,this._a32=65535&i,this._a48=i>>>16,this},r.prototype.rotateRight=r.prototype.rotr=function(t){if(0==(t%=64))return this;if(t>=32){var e=this._a00;if(this._a00=this._a32,this._a32=e,e=this._a48,this._a48=this._a16,this._a16=e,32==t)return this;t-=32}var r=this._a48<<16|this._a32,n=this._a16<<16|this._a00,i=r>>>t|n<<32-t,o=n>>>t|r<<32-t;return this._a00=65535&o,this._a16=o>>>16,this._a32=65535&i,this._a48=i>>>16,this},r.prototype.clone=function(){return new r(this._a00,this._a16,this._a32,this._a48)},void 0!==e&&e.exports?e.exports=r:t.UINT64=r}(this)},{}],11:[function(t,e,r){"use strict";var n=r.createUniqueKey="undefined"!=typeof Symbol?Symbol:function(t){return"[["+t+"_"+Math.random().toFixed(8).slice(2)+"]]"};r.LISTENERS=n("listeners"),r.CAPTURE=1,r.BUBBLE=2,r.ATTRIBUTE=3,r.newNode=function(t,e){return{listener:t,kind:e,next:null}}},{}],12:[function(t,e,r){"use strict";var n=t("./commons"),i=n.LISTENERS,o=n.ATTRIBUTE,s=n.newNode;r.defineCustomEventTarget=function(t,e){function r(){t.call(this)}var n={constructor:{value:r,configurable:!0,writable:!0}};return e.forEach(function(t){n["on"+t]={get:function(){return function(t,e){for(var r=t[i][e];null!=r;){if(r.kind===o)return r.listener;r=r.next}return null}(this,t)},set:function(e){!function(t,e,r){"function"!=typeof r&&"object"!=typeof r&&(r=null);for(var n=null,a=t[i][e];null!=a;)a.kind===o?null==n?t[i][e]=a.next:n.next=a.next:n=a,a=a.next;null!=r&&(null==n?t[i][e]=s(r,o):n.next=s(r,o))}(this,t,e)},configurable:!0,enumerable:!0}}),r.prototype=Object.create(t.prototype,n),r}},{"./commons":11}],13:[function(t,e,r){"use strict";var n=t("./commons"),i=t("./custom-event-target"),o=t("./event-wrapper"),s=n.LISTENERS,a=n.CAPTURE,u=n.BUBBLE,c=n.ATTRIBUTE,h=n.newNode,l=i.defineCustomEventTarget,f=o.createEventWrapper,p=o.STOP_IMMEDIATE_PROPAGATION_FLAG,d="undefined"!=typeof window&&void 0!==window.EventTarget,_=e.exports=function t(){if(!(this instanceof t)){if(1===arguments.length&&Array.isArray(arguments[0]))return l(t,arguments[0]);if(arguments.length>0){for(var e=Array(arguments.length),r=0;r<arguments.length;++r)e[r]=arguments[r];return l(t,e)}throw new TypeError("Cannot call a class as a function")}Object.defineProperty(this,s,{value:Object.create(null)})};_.prototype=Object.create((d?window.EventTarget:Object).prototype,{constructor:{value:_,writable:!0,configurable:!0},addEventListener:{value:function(t,e,r){if(null==e)return!1;if("function"!=typeof e&&"object"!=typeof e)throw new TypeError('"listener" is not an object.');var n=r?a:u,i=this[s][t];if(null==i)return this[s][t]=h(e,n),!0;for(var o=null;null!=i;){if(i.listener===e&&i.kind===n)return!1;o=i,i=i.next}return o.next=h(e,n),!0},configurable:!0,writable:!0},removeEventListener:{value:function(t,e,r){if(null==e)return!1;for(var n=r?a:u,i=null,o=this[s][t];null!=o;){if(o.listener===e&&o.kind===n)return null==i?this[s][t]=o.next:i.next=o.next,!0;i=o,o=o.next}return!1},configurable:!0,writable:!0},dispatchEvent:{value:function(t){var e=this[s][t.type];if(null==e)return!0;for(var r=f(t,this);null!=e&&("function"==typeof e.listener?e.listener.call(this,r):e.kind!==c&&"function"==typeof e.listener.handleEvent&&e.listener.handleEvent(r),!r[p]);)e=e.next;return!r.defaultPrevented},configurable:!0,writable:!0}})},{"./commons":11,"./custom-event-target":12,"./event-wrapper":14}],14:[function(t,e,r){"use strict";var n=t("./commons").createUniqueKey,i=n("stop_immediate_propagation_flag"),o=n("canceled_flag"),s=n("original_event"),a=Object.freeze({stopPropagation:Object.freeze({value:function(){var t=this[s];"function"==typeof t.stopPropagation&&t.stopPropagation()},writable:!0,configurable:!0}),stopImmediatePropagation:Object.freeze({value:function(){this[i]=!0;var t=this[s];"function"==typeof t.stopImmediatePropagation&&t.stopImmediatePropagation()},writable:!0,configurable:!0}),preventDefault:Object.freeze({value:function(){!0===this.cancelable&&(this[o]=!0);var t=this[s];"function"==typeof t.preventDefault&&t.preventDefault()},writable:!0,configurable:!0}),defaultPrevented:Object.freeze({get:function(){return this[o]},enumerable:!0,configurable:!0})});r.STOP_IMMEDIATE_PROPAGATION_FLAG=i,r.createEventWrapper=function(t,e){var r="number"==typeof t.timeStamp?t.timeStamp:Date.now(),n={type:{value:t.type,enumerable:!0},target:{value:e,enumerable:!0},currentTarget:{value:e,enumerable:!0},eventPhase:{value:2,enumerable:!0},bubbles:{value:Boolean(t.bubbles),enumerable:!0},cancelable:{value:Boolean(t.cancelable),enumerable:!0},timeStamp:{value:r,enumerable:!0},isTrusted:{value:!1,enumerable:!0}};return n[i]={value:!1,writable:!0},n[o]={value:!1,writable:!0},n[s]={value:t},void 0!==t.detail&&(n.detail={value:t.detail,enumerable:!0}),Object.create(Object.create(t,a),n)}},{"./commons":11}],15:[function(t,e,r){r.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,h=-7,l=r?i-1:0,f=r?-1:1,p=t[e+l];for(l+=f,o=p&(1<<-h)-1,p>>=-h,h+=a;h>0;o=256*o+t[e+l],l+=f,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+t[e+l],l+=f,h-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var s,a,u,c=8*o-i-1,h=(1<<c)-1,l=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+l>=1?f/u:f*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[r+p]=255&s,p+=d,s/=256,c-=8);t[r+p-d]|=128*_}},{}],16:[function(t,e,r){"use strict";var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,s,a=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var c in r)i.call(r,c)&&(a[c]=r[c]);if(n){s=n(r);for(var h=0;h<s.length;h++)o.call(r,s[h])&&(a[s[h]]=r[s[h]])}}return a}},{}],17:[function(t,e,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(h===setTimeout)return setTimeout(t,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function s(){_&&p&&(_=!1,p.length?d=p.concat(d):y=-1,d.length&&a())}function a(){if(!_){var t=o(s);_=!0;for(var e=d.length;e;){for(p=d,d=[];++y<e;)p&&p[y].run();y=-1,e=d.length}p=null,_=!1,function(t){if(l===clearTimeout)return clearTimeout(t);if((l===i||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var h,l,f=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(t){h=n}try{l="function"==typeof clearTimeout?clearTimeout:i}catch(t){l=i}}();var p,d=[],_=!1,y=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];d.push(new u(t,e)),1!==d.length||_||o(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],18:[function(t,e,r){!function(r){"use strict";function n(t,e){t.constructor===String&&(t=i.convertString.UTF8.stringToBytes(t));var r=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],n=s(t),o=8*t.length;n[o>>5]|=128<<24-o%32,n[15+(o+64>>9<<4)]=o;for(var u=0;u<n.length;u+=16)c(r,n,u);var h=a(r);return e&&e.asBytes?h:e&&e.asString?i.convertString.bytesToString(h):i.bytesToHex(h)}var i={};void 0!==e&&e.exports?(i.bytesToHex=t("convert-hex").bytesToHex,i.convertString=t("convert-string"),e.exports=n):(i.bytesToHex=r.convertHex.bytesToHex,i.convertString=r.convertString,r.sha256=n);var o=[];!function(){function t(t){for(var e=Math.sqrt(t),r=2;r<=e;r++)if(!(t%r))return!1;return!0}function e(t){return 4294967296*(t-(0|t))|0}for(var r=2,n=0;n<64;)t(r)&&(o[n]=e(Math.pow(r,1/3)),n++),r++}();var s=function(t){for(var e=[],r=0,n=0;r<t.length;r++,n+=8)e[n>>>5]|=t[r]<<24-n%32;return e},a=function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},u=[],c=function(t,e,r){for(var n=t[0],i=t[1],s=t[2],a=t[3],c=t[4],h=t[5],l=t[6],f=t[7],p=0;p<64;p++){if(p<16)u[p]=0|e[r+p];else{var d=u[p-15],_=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,y=u[p-2],E=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;u[p]=_+u[p-7]+E+u[p-16]}var v=n&i^n&s^i&s,g=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),S=f+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&h^~c&l)+o[p]+u[p];f=l,l=h,h=c,c=a+S|0,a=s,s=i,i=n,n=S+(g+v)|0}t[0]=t[0]+n|0,t[1]=t[1]+i|0,t[2]=t[2]+s|0,t[3]=t[3]+a|0,t[4]=t[4]+c|0,t[5]=t[5]+h|0,t[6]=t[6]+l|0,t[7]=t[7]+f|0};n.x2=function(t,e){return n(n(t,{asBytes:!0}),e)}}(this)},{"convert-hex":6,"convert-string":7}],19:[function(t,e,r){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(t){n.prototype[t]=function(){return this._defaults.push({fn:t,arguments:arguments}),this}}),n.prototype._setDefaults=function(t){this._defaults.forEach(function(e){t[e.fn].apply(t,e.arguments)})},e.exports=n},{}],20:[function(t,e,r){function n(t){if(!p(t))return t;var e=[];for(var r in t)i(e,r,t[r]);return e.join("&")}function i(t,e,r){if(null!=r)if(Array.isArray(r))r.forEach(function(r){i(t,e,r)});else if(p(r))for(var n in r)i(t,e+"["+n+"]",r[n]);else t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));else null===r&&t.push(encodeURIComponent(e))}function o(t){for(var e,r,n={},i=t.split("&"),o=0,s=i.length;o<s;++o)-1==(r=(e=i[o]).indexOf("="))?n[decodeURIComponent(e)]="":n[decodeURIComponent(e.slice(0,r))]=decodeURIComponent(e.slice(r+1));return n}function s(t){return/[\/+]json\b/.test(t)}function a(t){this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var e=this.xhr.status;1223===e&&(e=204),this._setStatusProperties(e),this.header=this.headers=function(t){for(var e,r,n,i,o=t.split(/\r?\n/),s={},a=0,u=o.length;a<u;++a)-1!==(e=(r=o[a]).indexOf(":"))&&(n=r.slice(0,e).toLowerCase(),i=E(r.slice(e+1)),s[n]=i);return s}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&t._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function u(t,e){var r=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new a(r)}catch(e){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=e,r.xhr?(t.rawResponse=void 0===r.xhr.responseType?r.xhr.responseText:r.xhr.response,t.status=r.xhr.status?r.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),r.callback(t)}r.emit("response",e);var n;try{r._isResponseOK(e)||(n=new Error(e.statusText||"Unsuccessful HTTP response"))}catch(t){n=t}n?(n.original=t,n.response=e,n.status=e.status,r.callback(n,e)):r.callback(null,e)})}function c(t,e,r){var n=y("DELETE",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n}var h;"undefined"!=typeof window?h=window:"undefined"!=typeof self?h=self:(console.warn("Using browser-only version of superagent in non-browser environment"),h=this);var l=t("component-emitter"),f=t("./request-base"),p=t("./is-object"),d=t("./response-base"),_=t("./agent-base"),y=r=e.exports=function(t,e){return"function"==typeof e?new r.Request("GET",t).end(e):1==arguments.length?new r.Request("GET",t):new r.Request(t,e)};r.Request=u,y.getXHR=function(){if(!(!XMLHttpRequest||h.location&&"file:"==h.location.protocol&&h.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw Error("Browser-only version of superagent could not find XHR")};var E="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};y.serializeObject=n,y.parseString=o,y.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},y.serialize={"application/x-www-form-urlencoded":n,"application/json":JSON.stringify},y.parse={"application/x-www-form-urlencoded":o,"application/json":JSON.parse},d(a.prototype),a.prototype._parseBody=function(t){var e=y.parse[this.type];return this.req._parser?this.req._parser(this,t):(!e&&s(this.type)&&(e=y.parse["application/json"]),e&&t&&(t.length||t instanceof Object)?e(t):null)},a.prototype.toError=function(){var t=this.req,e=t.method,r=t.url,n="cannot "+e+" "+r+" ("+this.status+")",i=new Error(n);return i.status=this.status,i.method=e,i.url=r,i},y.Response=a,l(u.prototype),f(u.prototype),u.prototype.type=function(t){return this.set("Content-Type",y.types[t]||t),this},u.prototype.accept=function(t){return this.set("Accept",y.types[t]||t),this},u.prototype.auth=function(t,e,r){1===arguments.length&&(e=""),"object"==typeof e&&null!==e&&(r=e,e=""),r||(r={type:"function"==typeof btoa?"basic":"auto"});return this._auth(t,e,r,function(t){if("function"==typeof btoa)return btoa(t);throw new Error("Cannot use basic auth, btoa is not a function")})},u.prototype.query=function(t){return"string"!=typeof t&&(t=n(t)),t&&this._query.push(t),this},u.prototype.attach=function(t,e,r){if(e){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(t,e,r||e.name)}return this},u.prototype._getFormData=function(){return this._formData||(this._formData=new h.FormData),this._formData},u.prototype.callback=function(t,e){if(this._shouldRetry(t,e))return this._retry();var r=this._callback;this.clearTimeout(),t&&(this._maxRetries&&(t.retries=this._retries-1),this.emit("error",t)),r(t,e)},u.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},u.prototype.buffer=u.prototype.ca=u.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},u.prototype.pipe=u.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},u.prototype._isHost=function(t){return t&&"object"==typeof t&&!Array.isArray(t)&&"[object Object]"!==Object.prototype.toString.call(t)},u.prototype.end=function(t){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=t||function(){},this._finalizeQueryString(),this._end()},u.prototype._end=function(){var t=this,e=this.xhr=y.getXHR(),r=this._formData||this._data;this._setTimeouts(),e.onreadystatechange=function(){var r=e.readyState;if(r>=2&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),4==r){var n;try{n=e.status}catch(t){n=0}if(!n){if(t.timedout||t._aborted)return;return t.crossDomainError()}t.emit("end")}};var n=function(e,r){r.total>0&&(r.percent=r.loaded/r.total*100),r.direction=e,t.emit("progress",r)};if(this.hasListeners("progress"))try{e.onprogress=n.bind(null,"download"),e.upload&&(e.upload.onprogress=n.bind(null,"upload"))}catch(t){}try{this.username&&this.password?e.open(this.method,this.url,!0,this.username,this.password):e.open(this.method,this.url,!0)}catch(t){return this.callback(t)}if(this._withCredentials&&(e.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof r&&!this._isHost(r)){var i=this._header["content-type"],o=this._serializer||y.serialize[i?i.split(";")[0]:""];!o&&s(i)&&(o=y.serialize["application/json"]),o&&(r=o(r))}for(var a in this.header)null!=this.header[a]&&this.header.hasOwnProperty(a)&&e.setRequestHeader(a,this.header[a]);return this._responseType&&(e.responseType=this._responseType),this.emit("request",this),e.send(void 0!==r?r:null),this},y.agent=function(){return new _},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(t){_.prototype[t.toLowerCase()]=function(e,r){var n=new y.Request(t,e);return this._setDefaults(n),r&&n.end(r),n}}),_.prototype.del=_.prototype.delete,y.get=function(t,e,r){var n=y("GET",t);return"function"==typeof e&&(r=e,e=null),e&&n.query(e),r&&n.end(r),n},y.head=function(t,e,r){var n=y("HEAD",t);return"function"==typeof e&&(r=e,e=null),e&&n.query(e),r&&n.end(r),n},y.options=function(t,e,r){var n=y("OPTIONS",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},y.del=c,y.delete=c,y.patch=function(t,e,r){var n=y("PATCH",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},y.post=function(t,e,r){var n=y("POST",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},y.put=function(t,e,r){var n=y("PUT",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n}},{"./agent-base":19,"./is-object":21,"./request-base":22,"./response-base":23,"component-emitter":5}],21:[function(t,e,r){"use strict";e.exports=function(t){return null!==t&&"object"==typeof t}},{}],22:[function(t,e,r){"use strict";function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}var i=t("./is-object");e.exports=n,n.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},n.prototype.parse=function(t){return this._parser=t,this},n.prototype.responseType=function(t){return this._responseType=t,this},n.prototype.serialize=function(t){return this._serializer=t,this},n.prototype.timeout=function(t){if(!t||"object"!=typeof t)return this._timeout=t,this._responseTimeout=0,this;for(var e in t)switch(e){case"deadline":this._timeout=t.deadline;break;case"response":this._responseTimeout=t.response;break;default:console.warn("Unknown timeout option",e)}return this},n.prototype.retry=function(t,e){return 0!==arguments.length&&!0!==t||(t=1),t<=0&&(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var o=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];n.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var r=this._retryCallback(t,e);if(!0===r)return!0;if(!1===r)return!1}catch(t){console.error(t)}if(e&&e.status&&e.status>=500&&501!=e.status)return!0;if(t){if(t.code&&~o.indexOf(t.code))return!0;if(t.timeout&&"ECONNABORTED"==t.code)return!0;if(t.crossDomain)return!0}return!1},n.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},n.prototype.then=function(t,e){if(!this._fullfilledPromise){var r=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(t,e){r.end(function(r,n){r?e(r):t(n)})})}return this._fullfilledPromise.then(t,e)},n.prototype.catch=function(t){return this.then(void 0,t)},n.prototype.use=function(t){return t(this),this},n.prototype.ok=function(t){if("function"!=typeof t)throw Error("Callback required");return this._okCallback=t,this},n.prototype._isResponseOK=function(t){return!!t&&(this._okCallback?this._okCallback(t):t.status>=200&&t.status<300)},n.prototype.get=function(t){return this._header[t.toLowerCase()]},n.prototype.getHeader=n.prototype.get,n.prototype.set=function(t,e){if(i(t)){for(var r in t)this.set(r,t[r]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},n.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},n.prototype.field=function(t,e){if(null===t||void 0===t)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),i(t)){for(var r in t)this.field(r,t[r]);return this}if(Array.isArray(e)){for(var n in e)this.field(t,e[n]);return this}if(null===e||void 0===e)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof e&&(e=""+e),this._getFormData().append(t,e),this},n.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},n.prototype._auth=function(t,e,r,n){switch(r.type){case"basic":this.set("Authorization","Basic "+n(t+":"+e));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer "+t)}return this},n.prototype.withCredentials=function(t){return void 0==t&&(t=!0),this._withCredentials=t,this},n.prototype.redirects=function(t){return this._maxRedirects=t,this},n.prototype.maxResponseSize=function(t){if("number"!=typeof t)throw TypeError("Invalid argument");return this._maxResponseSize=t,this},n.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},n.prototype.send=function(t){var e=i(t),r=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(e&&i(this._data))for(var n in t)this._data[n]=t[n];else"string"==typeof t?(r||this.type("form"),r=this._header["content-type"],this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+t:t:(this._data||"")+t):this._data=t;return!e||this._isHost(t)?this:(r||this.type("json"),this)},n.prototype.sortQuery=function(t){return this._sort=void 0===t||t,this},n.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(e>=0){var r=this.url.substring(e+1).split("&");"function"==typeof this._sort?r.sort(this._sort):r.sort(),this.url=this.url.substring(0,e)+"?"+r.join("&")}}},n.prototype._appendQueryString=function(){console.trace("Unsupported")},n.prototype._timeoutError=function(t,e,r){if(!this._aborted){var n=new Error(t+e+"ms exceeded");n.timeout=e,n.code="ECONNABORTED",n.errno=r,this.timedout=!0,this.abort(),this.callback(n)}},n.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},{"./is-object":21}],23:[function(t,e,r){"use strict";function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}var i=t("./utils");e.exports=n,n.prototype.get=function(t){return this.header[t.toLowerCase()]},n.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=i.type(e);var r=i.params(e);for(var n in r)this[n]=r[n];this.links={};try{t.link&&(this.links=i.parseLinks(t.link))}catch(t){}},n.prototype._setStatusProperties=function(t){var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.redirect=3==e,this.clientError=4==e,this.serverError=5==e,this.error=(4==e||5==e)&&this.toError(),this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.forbidden=403==t,this.notFound=404==t}},{"./utils":24}],24:[function(t,e,r){"use strict";r.type=function(t){return t.split(/ *; */).shift()},r.params=function(t){return t.split(/ *; */).reduce(function(t,e){var r=e.split(/ *= */),n=r.shift(),i=r.shift();return n&&i&&(t[n]=i),t},{})},r.parseLinks=function(t){return t.split(/ *, */).reduce(function(t,e){var r=e.split(/ *; */),n=r[0].slice(1,-1);return t[r[1].split(/ *= */)[1].slice(1,-1)]=n,t},{})},r.cleanHeader=function(t,e){return delete t["content-type"],delete t["content-length"],delete t["transfer-encoding"],delete t.host,e&&(delete t.authorization,delete t.cookie),t}},{}],25:[function(t,e,r){var n=t("./index.js").polyfill;window=window||{},n(),n(window);try{localStorage=localStorage||t("./localstorage.js")}catch(t){}try{XMLHttpRequest=XMLHttpRequest||t("./xmlhttprequest.js")}catch(t){}try{FormData=FormData||t("./formdata.js")}catch(t){}try{WebSocket=WebSocket||t("./websocket.js")}catch(t){}try{navigator=navigator||t("./navigator.js")}catch(t){}},{"./formdata.js":26,"./index.js":27,"./localstorage.js":28,"./navigator.js":29,"./websocket.js":31,"./xmlhttprequest.js":32}],26:[function(t,e,r){class n{constructor(){this._entries=[]}append(t,e){if("string"!=typeof t)throw new TypeError("FormData name must be a string");if("string"!=typeof e&&("object"!=typeof e||"string"!=typeof e.uri))throw new TypeError("FormData value must be a string or { uri: tempFilePath }");this._entries.push([t,e])}set(t,e){const r=this.get(t);r?r[1]=e:this.append(t,e)}delete(t){this._entries=this._entries.filter(e=>e[0]!==t)}entries(){return this._entries}get(t){return this._entries.find(e=>e[0]===t)}getAll(t){return this._entries.filter(e=>e[0]===t)}has(t){return this._entries.some(e=>e[0]===t)}keys(){return this._entries.map(t=>t[0])}values(){return this._entries.map(t=>t[1])}}e.exports=n},{}],27:[function(t,e,r){(function(r){var n=t("./localstorage.js"),i=t("./xmlhttprequest.js"),o=t("./formdata.js"),s=t("./websocket.js"),a=t("./online-offline-events.js"),u=t("./navigator");e.exports={polyfill(t=r||window){if("object"!=typeof t)throw new Error("polyfill target is not an Object");const e={localStorage:n,XMLHttpRequest:i,FormData:o,WebSocket:s,Object:Object,navigator:u};for(let r in e)t[r]||(t[r]=e[r]);a.polyfill(t)},localStorage:n,XMLHttpRequest:i,FormData:o,WebSocket:s}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./formdata.js":26,"./localstorage.js":28,"./navigator":29,"./online-offline-events.js":30,"./websocket.js":31,"./xmlhttprequest.js":32}],28:[function(t,e,r){class n{getItem(t){return wx.getStorageSync(t)}setItem(t,e){return wx.setStorageSync(t,e)}removeItem(t){return this.setItem(t,"")}clear(){return wx.clearStorageSync()}}e.exports=new n},{}],29:[function(t,e,r){e.exports={}},{}],30:[function(t,e,r){const n=t("event-target-shim");r.polyfill=(t=>{if(!wx.onNetworkStatusChange)return;if(t.__onlineOfflinePolyfilled)return;t.__onlineOfflinePolyfilled=!0;const e=new n;t.dispatchEvent||(t.addEventListener=e.addEventListener.bind(e),t.removeEventListener=e.removeEventListener.bind(e),t.dispatchEvent=e.dispatchEvent.bind(e)),wx.getNetworkType({success:({networkType:e})=>{t.onLine="none"!==e,wx.onNetworkStatusChange(({isConnected:e})=>{t.onLine!==e&&(t.onLine=e,t.dispatchEvent({type:e?"online":"offline"}))})}})})},{"event-target-shim":13}],31:[function(t,e,r){function n(t){""!==t.message&&u&&(u._readyState=s,u.dispatchEvent({type:"error",message:t.errMsg}))}const i=t("object-assign"),o=t("event-target-shim"),s=3,a=["open","error","message","close"];let u;class c extends(o(a)){constructor(t,e){if(!t)throw new TypeError("Failed to construct 'WebSocket': url required");if(e&&(!wx.canIUse||!wx.canIUse("connectSocket.object.protocols")))throw new Error("subprotocal not supported in weapp");super(),this._url=t,this._protocal=e||"",this._readyState=0,u&&u.dispatchEvent({type:"close"}),u=this,wx.onSocketOpen(function(t){u&&(u._readyState=1,u.dispatchEvent({type:"open"}))}),wx.onSocketError(n),wx.onSocketMessage(function(t){if(u){var{data:e,origin:r,ports:n,source:i}=t;u.dispatchEvent({data:e,origin:r,ports:n,source:i,type:"message"})}}),wx.onSocketClose(function(t){if(u){u._readyState=s;var{code:e,reason:r,wasClean:n}=t;u.dispatchEvent({code:e,reason:r,wasClean:n,type:"close"}),u=null}}),wx.connectSocket({url:t,protocals:this._protocal,fail:t=>setTimeout(()=>n(t),0)})}get url(){return this._url}get protocal(){return this._protocal}get readyState(){return this._readyState}close(){0===this.readyState&&console.warn("close WebSocket which is connecting might not work"),wx.closeSocket()}send(t){if(1!==this.readyState)throw new Error("INVALID_STATE_ERR");if(!("string"==typeof t||t instanceof ArrayBuffer))throw new TypeError("only String/ArrayBuffer supported");wx.sendSocketMessage({data:t})}}i(c,{CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:s}),e.exports=c},{"event-target-shim":13,"object-assign":16}],32:[function(t,e,r){function n(t){this.status=t.statusCode,this.statusText=t.statusCode,t.header&&(this._responseHeaders=Object.keys(t.header).reduce((e,r)=>(e[r.toLowerCase()]=t.header[r],e),{}));let e=t.data;"string"!=typeof e&&(e=JSON.stringify(e)),this.responseText=this.response=e,this.readyState=a,this.dispatchEvent({type:"readystatechange"})}const i=t("object-assign"),o=t("event-target-shim"),s=t("./formdata.js"),a=4,u=["abort","error","load","loadstart","progress","timeout","loadend","readystatechange"],c=["abort","error","load","loadstart","progress","timeout","loadend"];class h extends(o(c)){}class l extends(o(u)){constructor(){super(),this.readyState=0,this._headers={},this.upload=new h}abort(){if(!this._request||this._request.abort)return this.status=0,this.readyState=a,this._request.abort();throw new Error(" abort request")}getAllResponseHeaders(){return this._responseHeaders?Object.keys(this._responseHeaders).map(t=>`${t}: ${this._responseHeaders[t]}`).join("\r\n"):""}getResponseHeader(t){const e=t.toLowerCase();return this._responseHeaders&&this._responseHeaders[e]?this._responseHeaders[e]:null}overrideMimeType(){throw new Error("not supported in weapp")}open(t,e,r=!0){if(0!==this.readyState)throw new Error("request is already opened");if(!r)throw new Error("sync request is not supported");this._method=t,this._url=e,this.readyState=1,this.dispatchEvent({type:"readystatechange"})}setRequestHeader(t,e){if(1!==this.readyState)throw new Error("request is not opened");this._headers[t.toLowerCase()]=e}send(t){if(1!==this.readyState)throw new Error("request is not opened");if(t instanceof s){const e=t.entries(),r=e.filter(t=>"string"!=typeof t[1]);if(0===r.length)throw new Error("Must specify a Blob field in FormData");r.length>1&&console.warn("Only the first Blob will be send in Weapp");const o=e.filter(t=>"string"==typeof t[1]).reduce((t,e)=>i(t,{[e[0]]:e[1]}),{});this._request=wx.uploadFile({url:this._url,name:r[0][0],filePath:r[0][1].uri,formData:o,header:this._headers,success:n.bind(this),fail:t=>{this.status=0,this.readyState=a,this.dispatchEvent({type:"readystatechange"}),this.dispatchEvent({type:"error"})}}),this._request&&this._request.onProgressUpdate&&this._request.onProgressUpdate(({totalBytesSent:t,totalBytesExpectedToSend:e})=>{this.upload.dispatchEvent({type:"progress",loaded:t,total:e})})}else this._request=wx.request({url:this._url,data:t||"",method:this._method.toUpperCase(),header:this._headers,success:n.bind(this),fail:t=>{this.status=0,this.readyState=a,this.dispatchEvent({type:"readystatechange"}),this.dispatchEvent({type:"error"})}})}}i(l,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:a}),e.exports=l},{"./formdata.js":26,"event-target-shim":13,"object-assign":16}],33:[function(t,e,r){(function(t,e){(function(){"use strict";function n(t){throw t}function i(t,e){this.index="number"==typeof e?e:0,this.m=0,this.buffer=t instanceof(I?Uint8Array:Array)?t:new(I?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&n(Error("invalid index")),this.buffer.length<=this.index&&this.f()}function o(t,e,r){var n,i="number"==typeof e?e:e=0,o="number"==typeof r?r:t.length;for(n=-1,i=7&o;i--;++e)n=n>>>8^L[255&(n^t[e])];for(i=o>>3;i--;e+=8)n=n>>>8^L[255&(n^t[e])],n=n>>>8^L[255&(n^t[e+1])],n=n>>>8^L[255&(n^t[e+2])],n=n>>>8^L[255&(n^t[e+3])],n=n>>>8^L[255&(n^t[e+4])],n=n>>>8^L[255&(n^t[e+5])],n=n>>>8^L[255&(n^t[e+6])],n=n>>>8^L[255&(n^t[e+7])];return(4294967295^n)>>>0}function s(){}function a(t){this.buffer=new(I?Uint16Array:Array)(2*t),this.length=0}function u(t){var e,r,n,i,o,s,a,u,c,h,l=t.length,f=0,p=Number.POSITIVE_INFINITY;for(u=0;u<l;++u)t[u]>f&&(f=t[u]),t[u]<p&&(p=t[u]);for(e=1<<f,r=new(I?Uint32Array:Array)(e),n=1,i=0,o=2;n<=f;){for(u=0;u<l;++u)if(t[u]===n){for(s=0,a=i,c=0;c<n;++c)s=s<<1|1&a,a>>=1;for(h=n<<16|u,c=s;c<e;c+=o)r[c]=h;++i}++n,i<<=1,o<<=1}return[r,f,p]}function c(t,e){this.k=k,this.F=0,this.input=I&&t instanceof Array?new Uint8Array(t):t,this.b=0,e&&(e.lazy&&(this.F=e.lazy),"number"==typeof e.compressionType&&(this.k=e.compressionType),e.outputBuffer&&(this.a=I&&e.outputBuffer instanceof Array?new Uint8Array(e.outputBuffer):e.outputBuffer),"number"==typeof e.outputIndex&&(this.b=e.outputIndex)),this.a||(this.a=new(I?Uint8Array:Array)(32768))}function h(t,e){function r(t,e){var r,i=t.N,o=[],s=0;r=Y[t.length],o[s++]=65535&r,o[s++]=r>>16&255,o[s++]=r>>24;var a;switch(O){case 1===i:a=[0,i-1,0];break;case 2===i:a=[1,i-2,0];break;case 3===i:a=[2,i-3,0];break;case 4===i:a=[3,i-4,0];break;case 6>=i:a=[4,i-5,1];break;case 8>=i:a=[5,i-7,1];break;case 12>=i:a=[6,i-9,2];break;case 16>=i:a=[7,i-13,2];break;case 24>=i:a=[8,i-17,3];break;case 32>=i:a=[9,i-25,3];break;case 48>=i:a=[10,i-33,4];break;case 64>=i:a=[11,i-49,4];break;case 96>=i:a=[12,i-65,5];break;case 128>=i:a=[13,i-97,5];break;case 192>=i:a=[14,i-129,6];break;case 256>=i:a=[15,i-193,6];break;case 384>=i:a=[16,i-257,7];break;case 512>=i:a=[17,i-385,7];break;case 768>=i:a=[18,i-513,8];break;case 1024>=i:a=[19,i-769,8];break;case 1536>=i:a=[20,i-1025,9];break;case 2048>=i:a=[21,i-1537,9];break;case 3072>=i:a=[22,i-2049,10];break;case 4096>=i:a=[23,i-3073,10];break;case 6144>=i:a=[24,i-4097,11];break;case 8192>=i:a=[25,i-6145,11];break;case 12288>=i:a=[26,i-8193,12];break;case 16384>=i:a=[27,i-12289,12];break;case 24576>=i:a=[28,i-16385,13];break;case 32768>=i:a=[29,i-24577,13];break;default:n("invalid distance")}r=a,o[s++]=r[0],o[s++]=r[1],o[s++]=r[2];var u,c;for(u=0,c=o.length;u<c;++u)d[_++]=o[u];E[o[0]]++,v[o[3]]++,y=t.length+e-1,l=null}var i,o,s,a,u,c,h,l,f,p={},d=I?new Uint16Array(2*e.length):[],_=0,y=0,E=new(I?Uint32Array:Array)(286),v=new(I?Uint32Array:Array)(30),g=t.F;if(!I){for(s=0;285>=s;)E[s++]=0;for(s=0;29>=s;)v[s++]=0}for(E[256]=1,i=0,o=e.length;i<o;++i){for(s=u=0,a=3;s<a&&i+s!==o;++s)u=u<<8|e[i+s];if(p[u]===w&&(p[u]=[]),c=p[u],!(0<y--)){for(;0<c.length&&32768<i-c[0];)c.shift();if(i+3>=o){for(l&&r(l,-1),s=0,a=o-i;s<a;++s)f=e[i+s],d[_++]=f,++E[f];break}0<c.length?(h=function(t,e,r){var n,i,o,s,a,u,c=0,h=t.length;s=0,u=r.length;t:for(;s<u;s++){if(n=r[u-s-1],o=3,3<c){for(a=c;3<a;a--)if(t[n+a-1]!==t[e+a-1])continue t;o=c}for(;258>o&&e+o<h&&t[n+o]===t[e+o];)++o;if(o>c&&(i=n,c=o),258===o)break}return new function(t,e){this.length=t,this.N=e}(c,e-i)}(e,i,c),l?l.length<h.length?(f=e[i-1],d[_++]=f,++E[f],r(h,0)):r(l,-1):h.length<g?l=h:r(h,0)):l?r(l,-1):(f=e[i],d[_++]=f,++E[f])}c.push(i)}return d[_++]=256,E[256]++,t.U=E,t.T=v,I?d.subarray(0,_):d}function l(t,e){var r,n,i,o,s,u=t.length,c=new a(572),h=new(I?Uint8Array:Array)(u);if(!I)for(o=0;o<u;o++)h[o]=0;for(o=0;o<u;++o)0<t[o]&&c.push(o,t[o]);if(r=Array(c.length/2),n=new(I?Uint32Array:Array)(c.length/2),1===r.length)return h[c.pop().index]=1,h;for(o=0,s=c.length/2;o<s;++o)r[o]=c.pop(),n[o]=r[o].value;for(i=function(t,e,r){function n(t){var r=p[t][d[t]];r===e?(n(t+1),n(t+1)):--l[r],++d[t]}var i,o,s,a,u,c=new(I?Uint16Array:Array)(r),h=new(I?Uint8Array:Array)(r),l=new(I?Uint8Array:Array)(e),f=Array(r),p=Array(r),d=Array(r),_=(1<<r)-e,y=1<<r-1;for(c[r-1]=e,o=0;o<r;++o)_<y?h[o]=0:(h[o]=1,_-=y),_<<=1,c[r-2-o]=(c[r-1-o]/2|0)+e;for(c[0]=h[0],f[0]=Array(c[0]),p[0]=Array(c[0]),o=1;o<r;++o)c[o]>2*c[o-1]+h[o]&&(c[o]=2*c[o-1]+h[o]),f[o]=Array(c[o]),p[o]=Array(c[o]);for(i=0;i<e;++i)l[i]=r;for(s=0;s<c[r-1];++s)f[r-1][s]=t[s],p[r-1][s]=s;for(i=0;i<r;++i)d[i]=0;for(1===h[r-1]&&(--l[0],++d[r-1]),o=r-2;0<=o;--o){for(a=i=0,u=d[o+1],s=0;s<c[o];s++)(a=f[o+1][u]+f[o+1][u+1])>t[i]?(f[o][s]=a,p[o][s]=e,u+=2):(f[o][s]=t[i],p[o][s]=i,++i);d[o]=0,1===h[o]&&n(o)}return l}(n,n.length,e),o=0,s=r.length;o<s;++o)h[r[o].index]=i[o];return h}function f(t){var e,r,n,i,o=new(I?Uint16Array:Array)(t.length),s=[],a=[],u=0;for(e=0,r=t.length;e<r;e++)s[t[e]]=1+(0|s[t[e]]);for(e=1,r=16;e<=r;e++)a[e]=u,u+=0|s[e],u<<=1;for(e=0,r=t.length;e<r;e++)for(u=a[t[e]],a[t[e]]+=1,n=o[e]=0,i=t[e];n<i;n++)o[e]=o[e]<<1|1&u,u>>>=1;return o}function p(t,e){this.input=t,this.b=this.c=0,this.g={},e&&(e.flags&&(this.g=e.flags),"string"==typeof e.filename&&(this.filename=e.filename),"string"==typeof e.comment&&(this.w=e.comment),e.deflateOptions&&(this.l=e.deflateOptions)),this.l||(this.l={})}function d(t,e){switch(this.o=[],this.p=32768,this.e=this.j=this.c=this.s=0,this.input=I?new Uint8Array(t):t,this.u=!1,this.q=J,this.K=!1,!e&&(e={})||(e.index&&(this.c=e.index),e.bufferSize&&(this.p=e.bufferSize),e.bufferType&&(this.q=e.bufferType),e.resize&&(this.K=e.resize)),this.q){case Q:this.b=32768,this.a=new(I?Uint8Array:Array)(32768+this.p+258);break;case J:this.b=0,this.a=new(I?Uint8Array:Array)(this.p),this.f=this.S,this.z=this.O,this.r=this.Q;break;default:n(Error("invalid inflate mode"))}}function _(t,e){for(var r,i=t.j,o=t.e,s=t.input,a=t.c,u=s.length;o<e;)a>=u&&n(Error("input buffer is broken")),i|=s[a++]<<o,o+=8;return r=i&(1<<e)-1,t.j=i>>>e,t.e=o-e,t.c=a,r}function y(t,e){for(var r,i,o=t.j,s=t.e,a=t.input,u=t.c,c=a.length,h=e[0],l=e[1];s<l&&!(u>=c);)o|=a[u++]<<s,s+=8;return r=h[o&(1<<l)-1],(i=r>>>16)>s&&n(Error("invalid code length: "+i)),t.j=o>>i,t.e=s-i,t.c=u,65535&r}function E(t){this.input=t,this.c=0,this.G=[],this.R=!1}function v(t){if("string"==typeof t){var e,r,n=t.split("");for(e=0,r=n.length;e<r;e++)n[e]=(255&n[e].charCodeAt(0))>>>0;t=n}for(var i,o=1,s=0,a=t.length,u=0;0<a;){a-=i=1024<a?1024:a;do{o+=t[u++],s+=o}while(--i);o%=65521,s%=65521}return(s<<16|o)>>>0}function g(t,e){var r,i;switch(this.input=t,this.c=0,!e&&(e={})||(e.index&&(this.c=e.index),e.verify&&(this.V=e.verify)),r=t[this.c++],i=t[this.c++],15&r){case pt:this.method=pt;break;default:n(Error("unsupported compression method"))}0!=((r<<8)+i)%31&&n(Error("invalid fcheck flag:"+((r<<8)+i)%31)),32&i&&n(Error("fdict flag is not supported")),this.J=new d(t,{index:this.c,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})}function S(t,e){this.input=t,this.a=new(I?Uint8Array:Array)(32768),this.k=dt.t;var r,n={};!e&&(e={})||"number"!=typeof e.compressionType||(this.k=e.compressionType);for(r in e)n[r]=e[r];n.outputBuffer=this.a,this.I=new c(this.input,n)}function D(t,e){var r;return r=new S(t).h(),e||(e={}),e.H?r:R(r)}function T(t,e){var r;return t.subarray=t.slice,r=new g(t).i(),e||(e={}),e.noBuffer?r:R(r)}function m(t,e){var r;return t.subarray=t.slice,r=new p(t).h(),e||(e={}),e.H?r:R(r)}function b(t,e){var r;return t.subarray=t.slice,r=new E(t).i(),e||(e={}),e.H?r:R(r)}function R(t){var r,n,i=new e(t.length);for(r=0,n=t.length;r<n;++r)i[r]=t[r];return i}var w=void 0,O=!0,I="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;i.prototype.f=function(){var t,e=this.buffer,r=e.length,n=new(I?Uint8Array:Array)(r<<1);if(I)n.set(e);else for(t=0;t<r;++t)n[t]=e[t];return this.buffer=n},i.prototype.d=function(t,e,r){var n,i=this.buffer,o=this.index,s=this.m,a=i[o];if(r&&1<e&&(t=8<e?(x[255&t]<<24|x[t>>>8&255]<<16|x[t>>>16&255]<<8|x[t>>>24&255])>>32-e:x[t]>>8-e),8>e+s)a=a<<e|t,s+=e;else for(n=0;n<e;++n)a=a<<1|t>>e-n-1&1,8==++s&&(s=0,i[o++]=x[a],a=0,o===i.length&&(i=this.f()));i[o]=a,this.buffer=i,this.m=s,this.index=o},i.prototype.finish=function(){var t,e=this.buffer,r=this.index;return 0<this.m&&(e[r]<<=8-this.m,e[r]=x[e[r]],r++),I?t=e.subarray(0,r):(e.length=r,t=e),t};var A,C=new(I?Uint8Array:Array)(256);for(A=0;256>A;++A){for(var P=N=A,U=7,N=N>>>1;N;N>>>=1)P<<=1,P|=1&N,--U;C[A]=(P<<U&255)>>>0}var x=C,H=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],L=I?new Uint32Array(H):H;a.prototype.getParent=function(t){return 2*((t-2)/4|0)},a.prototype.push=function(t,e){var r,n,i,o=this.buffer;for(r=this.length,o[this.length++]=e,o[this.length++]=t;0<r&&(n=this.getParent(r),o[r]>o[n]);)i=o[r],o[r]=o[n],o[n]=i,i=o[r+1],o[r+1]=o[n+1],o[n+1]=i,r=n;return this.length},a.prototype.pop=function(){var t,e,r,n,i,o=this.buffer;for(e=o[0],t=o[1],this.length-=2,o[0]=o[this.length],o[1]=o[this.length+1],i=0;!((n=2*i+2)>=this.length)&&(n+2<this.length&&o[n+2]>o[n]&&(n+=2),o[n]>o[i]);)r=o[i],o[i]=o[n],o[n]=r,r=o[i+1],o[i+1]=o[n+1],o[n+1]=r,i=n;return{index:t,value:e,length:this.length}};var M,k=2,j={NONE:0,L:1,t:k,X:3},K=[];for(M=0;288>M;M++)switch(O){case 143>=M:K.push([M+48,8]);break;case 255>=M:K.push([M-144+400,9]);break;case 279>=M:K.push([M-256+0,7]);break;case 287>=M:K.push([M-280+192,8]);break;default:n("invalid literal: "+M)}c.prototype.h=function(){var t,e,r,o,s=this.input;switch(this.k){case 0:for(r=0,o=s.length;r<o;){var a=e=I?s.subarray(r,r+65535):s.slice(r,r+65535),u=(r+=e.length)===o,c=w,p=w,d=w,_=w,y=w,E=this.a,v=this.b;if(I){for(E=new Uint8Array(this.a.buffer);E.length<=v+a.length+5;)E=new Uint8Array(E.length<<1);E.set(this.a)}if(c=u?1:0,E[v++]=0|c,p=a.length,d=65536+~p&65535,E[v++]=255&p,E[v++]=p>>>8&255,E[v++]=255&d,E[v++]=d>>>8&255,I)E.set(a,v),v+=a.length,E=E.subarray(0,v);else{for(_=0,y=a.length;_<y;++_)E[v++]=a[_];E.length=v}this.b=v,this.a=E}break;case 1:var g=new i(I?new Uint8Array(this.a.buffer):this.a,this.b);g.d(1,1,O),g.d(1,2,O);var S,D,T,m=h(this,s);for(S=0,D=m.length;S<D;S++)if(T=m[S],i.prototype.d.apply(g,K[T]),256<T)g.d(m[++S],m[++S],O),g.d(m[++S],5),g.d(m[++S],m[++S],O);else if(256===T)break;this.a=g.finish(),this.b=this.a.length;break;case k:var b,R,A,C,P,U,N,x,H,L,M,j,B,Y,F,q=new i(I?new Uint8Array(this.a.buffer):this.a,this.b),V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=Array(19);for(b=k,q.d(1,1,O),q.d(b,2,O),R=h(this,s),N=f(U=l(this.U,15)),H=f(x=l(this.T,7)),A=286;257<A&&0===U[A-1];A--);for(C=30;1<C&&0===x[C-1];C--);var Q,J,z,W,X,Z,$=A,tt=C,et=new(I?Uint32Array:Array)($+tt),rt=new(I?Uint32Array:Array)(316),nt=new(I?Uint8Array:Array)(19);for(Q=J=0;Q<$;Q++)et[J++]=U[Q];for(Q=0;Q<tt;Q++)et[J++]=x[Q];if(!I)for(Q=0,W=nt.length;Q<W;++Q)nt[Q]=0;for(Q=X=0,W=et.length;Q<W;Q+=J){for(J=1;Q+J<W&&et[Q+J]===et[Q];++J);if(z=J,0===et[Q])if(3>z)for(;0<z--;)rt[X++]=0,nt[0]++;else for(;0<z;)(Z=138>z?z:138)>z-3&&Z<z&&(Z=z-3),10>=Z?(rt[X++]=17,rt[X++]=Z-3,nt[17]++):(rt[X++]=18,rt[X++]=Z-11,nt[18]++),z-=Z;else if(rt[X++]=et[Q],nt[et[Q]]++,3>--z)for(;0<z--;)rt[X++]=et[Q],nt[et[Q]]++;else for(;0<z;)(Z=6>z?z:6)>z-3&&Z<z&&(Z=z-3),rt[X++]=16,rt[X++]=Z-3,nt[16]++,z-=Z}for(t=I?rt.subarray(0,X):rt.slice(0,X),L=l(nt,7),Y=0;19>Y;Y++)G[Y]=L[V[Y]];for(P=19;4<P&&0===G[P-1];P--);for(M=f(L),q.d(A-257,5,O),q.d(C-1,5,O),q.d(P-4,4,O),Y=0;Y<P;Y++)q.d(G[Y],3,O);for(Y=0,F=t.length;Y<F;Y++)if(j=t[Y],q.d(M[j],L[j],O),16<=j){switch(Y++,j){case 16:B=2;break;case 17:B=3;break;case 18:B=7;break;default:n("invalid code: "+j)}q.d(t[Y],B,O)}var it,ot,st,at,ut,ct,ht,lt,ft=[N,U],pt=[H,x];for(ut=ft[0],ct=ft[1],ht=pt[0],lt=pt[1],it=0,ot=R.length;it<ot;++it)if(st=R[it],q.d(ut[st],ct[st],O),256<st)q.d(R[++it],R[++it],O),at=R[++it],q.d(ht[at],lt[at],O),q.d(R[++it],R[++it],O);else if(256===st)break;this.a=q.finish(),this.b=this.a.length;break;default:n("invalid compression type")}return this.a};var B=function(){function t(t){switch(O){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case 12>=t:return[265,t-11,1];case 14>=t:return[266,t-13,1];case 16>=t:return[267,t-15,1];case 18>=t:return[268,t-17,1];case 22>=t:return[269,t-19,2];case 26>=t:return[270,t-23,2];case 30>=t:return[271,t-27,2];case 34>=t:return[272,t-31,2];case 42>=t:return[273,t-35,3];case 50>=t:return[274,t-43,3];case 58>=t:return[275,t-51,3];case 66>=t:return[276,t-59,3];case 82>=t:return[277,t-67,4];case 98>=t:return[278,t-83,4];case 114>=t:return[279,t-99,4];case 130>=t:return[280,t-115,4];case 162>=t:return[281,t-131,5];case 194>=t:return[282,t-163,5];case 226>=t:return[283,t-195,5];case 257>=t:return[284,t-227,5];case 258===t:return[285,t-258,0];default:n("invalid length: "+t)}}var e,r,i=[];for(e=3;258>=e;e++)r=t(e),i[e]=r[2]<<24|r[1]<<16|r[0];return i}(),Y=I?new Uint32Array(B):B;p.prototype.h=function(){var t,e,r,n,i,s,a,u,h=new(I?Uint8Array:Array)(32768),l=0,f=this.input,p=this.c,d=this.filename,_=this.w;if(h[l++]=31,h[l++]=139,h[l++]=8,t=0,this.g.fname&&(t|=V),this.g.fcomment&&(t|=G),this.g.fhcrc&&(t|=q),h[l++]=t,e=(Date.now?Date.now():+new Date)/1e3|0,h[l++]=255&e,h[l++]=e>>>8&255,h[l++]=e>>>16&255,h[l++]=e>>>24&255,h[l++]=0,h[l++]=F,this.g.fname!==w){for(a=0,u=d.length;a<u;++a)255<(s=d.charCodeAt(a))&&(h[l++]=s>>>8&255),h[l++]=255&s;h[l++]=0}if(this.g.comment){for(a=0,u=_.length;a<u;++a)255<(s=_.charCodeAt(a))&&(h[l++]=s>>>8&255),h[l++]=255&s;h[l++]=0}return this.g.fhcrc&&(r=65535&o(h,0,l),h[l++]=255&r,h[l++]=r>>>8&255),this.l.outputBuffer=h,this.l.outputIndex=l,i=new c(f,this.l),h=i.h(),l=i.b,I&&(l+8>h.buffer.byteLength?(this.a=new Uint8Array(l+8),this.a.set(new Uint8Array(h.buffer)),h=this.a):h=new Uint8Array(h.buffer)),n=o(f,w,w),h[l++]=255&n,h[l++]=n>>>8&255,h[l++]=n>>>16&255,h[l++]=n>>>24&255,u=f.length,h[l++]=255&u,h[l++]=u>>>8&255,h[l++]=u>>>16&255,h[l++]=u>>>24&255,this.c=p,I&&l<h.length&&(this.a=h=h.subarray(0,l)),h};var F=255,q=2,V=8,G=16,Q=0,J=1;d.prototype.i=function(){for(;!this.u;){var t=_(this,3);switch(1&t&&(this.u=O),t>>>=1){case 0:var e=this.input,r=this.c,i=this.a,o=this.b,s=e.length,a=w,c=w,h=i.length,l=w;switch(this.e=this.j=0,r+1>=s&&n(Error("invalid uncompressed block header: LEN")),a=e[r++]|e[r++]<<8,r+1>=s&&n(Error("invalid uncompressed block header: NLEN")),c=e[r++]|e[r++]<<8,a===~c&&n(Error("invalid uncompressed block header: length verify")),r+a>e.length&&n(Error("input buffer is broken")),this.q){case Q:for(;o+a>i.length;){if(l=h-o,a-=l,I)i.set(e.subarray(r,r+l),o),o+=l,r+=l;else for(;l--;)i[o++]=e[r++];this.b=o,i=this.f(),o=this.b}break;case J:for(;o+a>i.length;)i=this.f({B:2});break;default:n(Error("invalid inflate mode"))}if(I)i.set(e.subarray(r,r+a),o),o+=a,r+=a;else for(;a--;)i[o++]=e[r++];this.c=r,this.b=o,this.a=i;break;case 1:this.r(ht,ft);break;case 2:for(var f=_(this,5)+257,p=_(this,5)+1,d=_(this,4)+4,E=new(I?Uint8Array:Array)(Z.length),v=w,g=w,S=w,D=w,T=w,m=w,b=w,R=w,A=w,R=0;R<d;++R)E[Z[R]]=_(this,3);if(!I)for(R=d,d=E.length;R<d;++R)E[Z[R]]=0;for(v=u(E),D=new(I?Uint8Array:Array)(f+p),R=0,A=f+p;R<A;)switch(T=y(this,v)){case 16:for(b=3+_(this,2);b--;)D[R++]=m;break;case 17:for(b=3+_(this,3);b--;)D[R++]=0;m=0;break;case 18:for(b=11+_(this,7);b--;)D[R++]=0;m=0;break;default:m=D[R++]=T}g=u(I?D.subarray(0,f):D.slice(0,f)),S=u(I?D.subarray(f):D.slice(f)),this.r(g,S);break;default:n(Error("unknown BTYPE: "+t))}}return this.z()};var z,W,X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=I?new Uint16Array(X):X,$=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],tt=I?new Uint16Array($):$,et=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],rt=I?new Uint8Array(et):et,nt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],it=I?new Uint16Array(nt):nt,ot=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],st=I?new Uint8Array(ot):ot,at=new(I?Uint8Array:Array)(288);for(z=0,W=at.length;z<W;++z)at[z]=143>=z?8:255>=z?9:279>=z?7:8;var ut,ct,ht=u(at),lt=new(I?Uint8Array:Array)(30);for(ut=0,ct=lt.length;ut<ct;++ut)lt[ut]=5;var ft=u(lt);d.prototype.r=function(t,e){var r=this.a,n=this.b;this.A=t;for(var i,o,s,a,u=r.length-258;256!==(i=y(this,t));)if(256>i)n>=u&&(this.b=n,r=this.f(),n=this.b),r[n++]=i;else for(a=tt[o=i-257],0<rt[o]&&(a+=_(this,rt[o])),i=y(this,e),s=it[i],0<st[i]&&(s+=_(this,st[i])),n>=u&&(this.b=n,r=this.f(),n=this.b);a--;)r[n]=r[n++-s];for(;8<=this.e;)this.e-=8,this.c--;this.b=n},d.prototype.Q=function(t,e){var r=this.a,n=this.b;this.A=t;for(var i,o,s,a,u=r.length;256!==(i=y(this,t));)if(256>i)n>=u&&(r=this.f(),u=r.length),r[n++]=i;else for(a=tt[o=i-257],0<rt[o]&&(a+=_(this,rt[o])),i=y(this,e),s=it[i],0<st[i]&&(s+=_(this,st[i])),n+a>u&&(r=this.f(),u=r.length);a--;)r[n]=r[n++-s];for(;8<=this.e;)this.e-=8,this.c--;this.b=n},d.prototype.f=function(){var t,e,r=new(I?Uint8Array:Array)(this.b-32768),n=this.b-32768,i=this.a;if(I)r.set(i.subarray(32768,r.length));else for(t=0,e=r.length;t<e;++t)r[t]=i[t+32768];if(this.o.push(r),this.s+=r.length,I)i.set(i.subarray(n,n+32768));else for(t=0;32768>t;++t)i[t]=i[n+t];return this.b=32768,i},d.prototype.S=function(t){var e,r,n,i,o=this.input.length/this.c+1|0,s=this.input,a=this.a;return t&&("number"==typeof t.B&&(o=t.B),"number"==typeof t.M&&(o+=t.M)),2>o?(r=(s.length-this.c)/this.A[2],i=r/2*258|0,n=i<a.length?a.length+i:a.length<<1):n=a.length*o,I?(e=new Uint8Array(n)).set(a):e=a,this.a=e},d.prototype.z=function(){var t,e,r,n,i,o=0,s=this.a,a=this.o,u=new(I?Uint8Array:Array)(this.s+(this.b-32768));if(0===a.length)return I?this.a.subarray(32768,this.b):this.a.slice(32768,this.b);for(e=0,r=a.length;e<r;++e)for(n=0,i=(t=a[e]).length;n<i;++n)u[o++]=t[n];for(e=32768,r=this.b;e<r;++e)u[o++]=s[e];return this.o=[],this.buffer=u},d.prototype.O=function(){var t,e=this.b;return I?this.K?(t=new Uint8Array(e)).set(this.a.subarray(0,e)):t=this.a.subarray(0,e):(this.a.length>e&&(this.a.length=e),t=this.a),this.buffer=t},E.prototype.i=function(){for(var t=this.input.length;this.c<t;){var e=new s,r=w,i=w,a=w,u=w,c=w,h=w,l=w,f=w,p=w,_=this.input,y=this.c;switch(e.C=_[y++],e.D=_[y++],(31!==e.C||139!==e.D)&&n(Error("invalid file signature:"+e.C+","+e.D)),e.v=_[y++],e.v){case 8:break;default:n(Error("unknown compression method: "+e.v))}if(e.n=_[y++],f=_[y++]|_[y++]<<8|_[y++]<<16|_[y++]<<24,e.$=new Date(1e3*f),e.ba=_[y++],e.aa=_[y++],0<(4&e.n)&&(e.W=_[y++]|_[y++]<<8,y+=e.W),0<(e.n&V)){for(l=[],h=0;0<(c=_[y++]);)l[h++]=String.fromCharCode(c);e.name=l.join("")}if(0<(e.n&G)){for(l=[],h=0;0<(c=_[y++]);)l[h++]=String.fromCharCode(c);e.w=l.join("")}0<(e.n&q)&&(e.P=65535&o(_,0,y),e.P!==(_[y++]|_[y++]<<8)&&n(Error("invalid header crc16"))),r=_[_.length-4]|_[_.length-3]<<8|_[_.length-2]<<16|_[_.length-1]<<24,_.length-y-4-4<512*r&&(u=r),i=new d(_,{index:y,bufferSize:u}),e.data=a=i.i(),y=i.c,e.Y=p=(_[y++]|_[y++]<<8|_[y++]<<16|_[y++]<<24)>>>0,o(a,w,w)!==p&&n(Error("invalid CRC-32 checksum: 0x"+o(a,w,w).toString(16)+" / 0x"+p.toString(16))),e.Z=r=(_[y++]|_[y++]<<8|_[y++]<<16|_[y++]<<24)>>>0,(4294967295&a.length)!==r&&n(Error("invalid input size: "+(4294967295&a.length)+" / "+r)),this.G.push(e),this.c=y}this.R=O;var E,v,g,S=this.G,D=0,T=0;for(E=0,v=S.length;E<v;++E)T+=S[E].data.length;if(I)for(g=new Uint8Array(T),E=0;E<v;++E)g.set(S[E].data,D),D+=S[E].data.length;else{for(g=[],E=0;E<v;++E)g[E]=S[E].data;g=Array.prototype.concat.apply([],g)}return g},g.prototype.i=function(){var t,e=this.input;return t=this.J.i(),this.c=this.J.c,this.V&&(e[this.c++]<<24|e[this.c++]<<16|e[this.c++]<<8|e[this.c++])>>>0!==v(t)&&n(Error("invalid adler-32 checksum")),t};var pt=8,dt=j;S.prototype.h=function(){var t,e,r,i,o,s,a,u=0;switch(a=this.a,t=pt){case pt:e=Math.LOG2E*Math.log(32768)-8;break;default:n(Error("invalid compression method"))}switch(r=e<<4|t,a[u++]=r,t){case pt:switch(this.k){case dt.NONE:o=0;break;case dt.L:o=1;break;case dt.t:o=2;break;default:n(Error("unsupported compression type"))}break;default:n(Error("invalid compression method"))}return i=o<<6|0,a[u++]=i|31-(256*r+i)%31,s=v(this.input),this.I.b=u,a=this.I.h(),u=a.length,I&&((a=new Uint8Array(a.buffer)).length<=u+4&&(this.a=new Uint8Array(a.length+4),this.a.set(a),a=this.a),a=a.subarray(0,u+4)),a[u++]=s>>24&255,a[u++]=s>>16&255,a[u++]=s>>8&255,a[u++]=255&s,a},r.deflate=function(e,r,n){t.nextTick(function(){var t,i;try{i=D(e,n)}catch(e){t=e}r(t,i)})},r.deflateSync=D,r.inflate=function(e,r,n){t.nextTick(function(){var t,i;try{i=T(e,n)}catch(e){t=e}r(t,i)})},r.inflateSync=T,r.gzip=function(e,r,n){t.nextTick(function(){var t,i;try{i=m(e,n)}catch(e){t=e}r(t,i)})},r.gzipSync=m,r.gunzip=function(e,r,n){t.nextTick(function(){var t,i;try{i=b(e,n)}catch(e){t=e}r(t,i)})},r.gunzipSync=b}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{_process:17,buffer:4}],34:[function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(s,a)}u((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){function r(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}var n,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(r,"__esModule",{value:!0});var o=t("./droi-error"),s=t("./droi-http"),a=t("./droi-secure-http"),u=t("./droi-core"),c=t("./droi-const"),h=t("cuint"),l=t("./droi-user");!function(t){function e(t,e){return n(this,void 0,void 0,function(){var r,n,o,s;return i(this,function(i){switch(i.label){case 0:t.headers[c.DroiConstant.DROI_KEY_HTTP_APP_ID]=u.DroiCore.getAppId(),a.DroiHttpSecure.isEnable()||(t.headers[c.DroiConstant.DROI_KEY_HTTP_API_KEY]=u.DroiCore.getApiKey()),i.label=1;case 1:return i.trys.push([1,3,,4]),r=t.headers,n=c.DroiConstant.DROI_KEY_HTTP_DEVICE_ID,[4,u.DroiCore.getDeviceId()];case 2:return r[n]=i.sent(),[3,4];case 3:return o=i.sent(),console.log("get device id fail. "+o),[3,4];case 4:return e&&(s=e.token)&&""!=s&&(t.headers[c.DroiConstant.DROI_KEY_HTTP_TOKEN]=s),[2]}})})}function r(t){var e=new o.DroiError(o.DroiError.OK,null),r=-1,n=0,i=null;if(t.data)try{var s=JSON.parse(t.data);"number"==typeof s.Code&&((r=s.Code)==f&&l.DroiUser.cleanUserCache(),"string"==typeof s.Message&&(i=s.Message),"string"==typeof s.Ticket&&(e.ticket=s.Ticket))}catch(t){}if(t instanceof a.DroiHttpSecureResponse&&(n=t.droiStatusCode,e.ticket=t.requestId),-1!=r)e.code=r,e.appendMessage=i;else if(0!=t.status&&200!=t.status){var u=t.status;404==u?e.code=o.DroiError.SERVICE_NOT_FOUND:403==u||405==u?e.code=o.DroiError.SERVICE_NOT_ALLOWED:509==u?e.code=o.DroiError.BANDWIDTH_LIMIT_EXCEED:(e.code=o.DroiError.HTTP_SERVER_ERROR,e.appendMessage="status: "+u)}else 0!=n?(e.code=o.DroiError.INTERNAL_SERVER_ERROR,e.appendMessage="server code: "+n):(e.code=o.DroiError.ERROR,e.appendMessage="http status: "+t.status+" errorCode: 0 status: "+n);return e}var f=1040006,p="https://api.droibaas.com/uregister",d=function(){function t(){}return t.parse=function(e,r){var n=new t,i=h.UINT64(e,10),o=h.UINT64(r,10),s=i.toString(16).padStart(16,"0")+o.toString(16).padStart(16,"0");return s=s.substring(0,8)+"-"+s.substring(8,12)+"-"+s.substring(12,16)+"-"+s.substring(16,20)+"-"+s.substring(20,32),n._uidh=e,n._uidl=r,n._string=s,n},t.parseId=function(e){var r=e.substring(0,16),n=e.substring(16),i=new t,o=h.UINT64(r,16),s=h.UINT64(n,16),a=e.substring(0,8)+"-"+e.substring(8,12)+"-"+e.substring(12,16)+"-"+e.substring(16,20)+"-"+e.substring(20,32);return i._uidh=o.toString(10),i._uidl=s.toString(10),i._string=a,i},Object.defineProperty(t.prototype,"string",{get:function(){return this._string},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uidh",{get:function(){return this._uidh},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uidl",{get:function(){return this._uidl},enumerable:!0,configurable:!0}),t}();t.DeviceIdFormat=d;var _=function(){function t(t,e){this._token=t,this._isAuto=e}return t.make=function(e){return new t(e,!1)},Object.defineProperty(t.prototype,"token",{get:function(){if(this._isAuto){var t=l.DroiUser.getCurrentUser();return null!=t&&t.isLoggedIn()?t.sessionToken:null}return this._token},enumerable:!0,configurable:!0}),t.AUTO_TOKEN=new t("",!0),t}();t.TokenHolder=_,t.callServer=function(t,o,a,u,c){return n(this,void 0,void 0,function(){var n;return i(this,function(i){switch(i.label){case 0:return u||(u={}),n=new s.DroiHttpRequest,n.url=t,n.method=o,n.data=a,n.headers=u,n.isBinary=!1,[4,e(n,c)];case 1:return i.sent(),[2,s.DroiHttp.sendRequest(n).then(function(t){var e=r(t);if(!e.isOk)throw e;return JSON.parse(t.data).Result})]}})})},t.callServerSecure=function(t,o,u,c,h){return n(this,void 0,void 0,function(){var n;return i(this,function(i){switch(i.label){case 0:return c||(c={}),n=new s.DroiHttpRequest,n.url=t,n.method=o,n.data=u,n.headers=c,n.isBinary=!0,[4,e(n,h)];case 1:return i.sent(),[2,a.DroiHttpSecure.sendRequest(n).then(function(t){var e=r(t);if(!e.isOk)throw e;return JSON.parse(t.data).Result})]}})})},t.fetchHttpsDeviceId=function(){if(a.DroiHttpSecure.isEnable())return a.DroiHttpSecure.getUId().then(function(t){return d.parse(t[0],t[1])});var t=new s.DroiHttpRequest;return t.url=p,t.method=s.DroiHttpMethod.GET,t.isBinary=!1,s.DroiHttp.sendRequest(t).then(function(t){var e=/.*\[(\d+),\s*(\d+),\s*(\d+)/g.exec(t.data);return d.parse(e[1],e[2])})},t.translateDroiError=r}(r.RemoteServiceHelper||(r.RemoteServiceHelper={}))},{"./droi-const":39,"./droi-core":40,"./droi-error":41,"./droi-http":44,"./droi-secure-http":54,"./droi-user":64,cuint:8}],35:[function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(s,a)}u((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){function r(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}var n,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(r,"__esModule",{value:!0});var o=t("./droi-error"),s=t("./droi-object"),a=t("./droi-const"),u=t("./rest/object"),c=t("./rest/user"),h=t("./rest/group"),l=function(){function t(){}return t.prototype.getRestHandler=function(t){return t===c.RestUser.TABLE_NAME?c.RestUser.instance():t===h.RestGroup.TABLE_NAME?h.RestGroup.instance():u.RestObject.instance()},t.prototype.upsert=function(t){return n(this,void 0,void 0,function(){var e,r,n,u,c,h,l,f;return i(this,function(i){switch(i.label){case 0:e=new o.DroiError(o.DroiError.OK),r=t.getElement(a.DroiConstant.DroiQuery_INSERT,0)[0],n=[],s.DroiObject.travelDroiObject(r,function(t){r!=t&&n.push(t)}),u=0,c=n,i.label=1;case 1:return u<c.length?(h=c[u]).isDirty?[4,h.save()]:[3,3]:[3,4];case 2:i.sent(),i.label=3;case 3:return u++,[3,1];case 4:return r.isDirty()?(l=t.getElement(a.DroiConstant.DroiQuery_TABLE_NAME,0),f=this.getRestHandler(l),[2,f.upsert(r.toJson(),r.objectId(),l).then(function(t){return new o.DroiError(o.DroiError.OK)})]):[2,Promise.resolve(e)]}})})},t.prototype.query=function(t){var e=null;if(t.containsKey(a.DroiConstant.DroiQuery_SELECT)){var r=t.get(a.DroiConstant.DroiQuery_SELECT);if(null==r||1!=r.length)return Promise.reject(new o.DroiError(o.DroiError.INVALID_PARAMETER,"No table name in query."));e=r[0]}var n=this.getRestHandler(e),i=this.generateWhere(t),u=this.generateOrder(t),c=NaN,h=NaN;return t.containsKey(a.DroiConstant.DroiQuery_OFFSET)&&(c=t.get(a.DroiConstant.DroiQuery_OFFSET)[0]),t.containsKey(a.DroiConstant.DroiQuery_LIMIT)&&(h=t.get(a.DroiConstant.DroiQuery_LIMIT)[0]),n.query(e,i,c,h,u).then(function(t){for(var e=[],r=0,n=t;r<n.length;r++){var i=n[r],a=s.DroiObject.fromJson(i);if(null==a)throw new o.DroiError(o.DroiError.ERROR,"form droiobject fail. "+JSON.stringify(i));e.push(a)}return e})},t.prototype.updateData=function(t){new o.DroiError(o.DroiError.OK);var e=t.containsKey(a.DroiConstant.DroiQuery_ATOMIC),r=t.getElement(a.DroiConstant.DroiQuery_TABLE_NAME,0),n=this.getRestHandler(r);if(e){var i=t.getElement(a.DroiConstant.DroiQuery_ATOMIC,0),s={};return s[(y=t.getElement(a.DroiConstant.DroiQuery_ADD,0))[0]]=y[1],u.RestObject.instance().atomicAdd(r,i.objectId(),s).then(function(t){return new o.DroiError(o.DroiError.OK)})}var c=t.get(a.DroiConstant.DroiQuery_ADD),h=t.get(a.DroiConstant.DroiQuery_SET),l={};if(null!=c)for(var f=0,p=c;f<p.length;f++){l[(y=p[f])[0]]={__op:"Increment",amount:y[1]}}if(null!=h)for(var d=0,_=h;d<_.length;d++){var y=_[d];l[y[0]]=y[1]}if(0==Object.keys(l).length)return Promise.reject(new o.DroiError(o.DroiError.INVALID_PARAMETER,"No set / add in updating"));var E=this.generateWhere(t),v=this.generateOrder(t),g=NaN,S=NaN;return t.containsKey(a.DroiConstant.DroiQuery_OFFSET)&&(g=t.get(a.DroiConstant.DroiQuery_OFFSET)[0]),t.containsKey(a.DroiConstant.DroiQuery_LIMIT)&&(S=t.get(a.DroiConstant.DroiQuery_LIMIT)[0]),n.updateData(r,JSON.stringify(l),E,g,S,v).then(function(t){return new o.DroiError(o.DroiError.OK)})},t.prototype.delete=function(t){var e=new o.DroiError(o.DroiError.OK),r=t.getElement(a.DroiConstant.DroiQuery_DELETE,0)[0];if(!r.isDirty())return Promise.resolve(e);var n=t.getElement(a.DroiConstant.DroiQuery_TABLE_NAME,0);return this.getRestHandler(n).delete(r.objectId(),n).then(function(t){return new o.DroiError(o.DroiError.OK)})},t.prototype.generateWhere=function(t){if(!t.containsKey(a.DroiConstant.DroiQuery_WHERE))return null;var e=t.get(a.DroiConstant.DroiQuery_WHERE)[0],r={};if(e.type===a.DroiConstant.DroiQuery_COND){var n={},i=e.conditions[0];if((i=this.convertArgumentsFormat(i)).length<3){var o=i[1];o===a.DroiConstant.DroiCondition_ISNULL?n[o]=!1:o===a.DroiConstant.DroiCondition_ISNOTNULL&&(n[a.DroiConstant.DroiCondition_ISNULL]=!0)}else n[i[1]]=i[2];r[i[0]]=n}else r=this.travel(e);return JSON.stringify(r)},t.prototype.generateOrder=function(t){if(!t.containsKey(a.DroiConstant.DroiQuery_ORDERBY))return null;for(var e="",r=0,n=t.get(a.DroiConstant.DroiQuery_ORDERBY);r<n.length;r++){var i=n[r];i[1]===a.DroiConstant.DroiQuery_DESC&&(e+="-"),e+=i[0]+","}return e.substring(0,e.length-1)},t.prototype.travel=function(t){var e={},r=t.type,n=t.conditions;if(r===a.DroiConstant.DroiQuery_COND){var i=n[0],o={};if((i=this.convertArgumentsFormat(i)).length<3){var s=i[1];s===a.DroiConstant.DroiCondition_ISNULL?o[s]=!1:s===a.DroiConstant.DroiCondition_ISNOTNULL&&(o[a.DroiConstant.DroiCondition_ISNULL]=!0)}else o[i[1]]=i[2];e[i[0]]=o}else{for(var u=[],c=0,h=n;c<h.length;c++){var l=h[c];l instanceof Array?u.push(l):u.push(this.travel(l))}e[r]=u}return e},t.prototype.convertArgumentsFormat=function(t){if(t.length<3)return t;var e=t[2];return e instanceof Date&&(t[2]=e.toISOString()),t},t.create=function(){return null==t.instance&&(t.instance=new t),t.instance},t}();r.CloudStorageDataProvider=l},{"./droi-const":39,"./droi-error":41,"./droi-object":47,"./rest/group":69,"./rest/object":70,"./rest/user":72}],36:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./droi-http"),i=t("./index"),o=t("./rest/cloud-code"),s=function(){function t(){}return t.callRestApi=function(t,e,r,s,a){return r!=n.DroiHttpMethod.DELETE&&r!=n.DroiHttpMethod.GET||null==s?o.RestCloudCode.instance().callApi(t,e,r,s,a):Promise.reject(new i.DroiError(i.DroiError.INVALID_PARAMETER,"Params must be null in method GET / DELETE"))},t}();r.DroiCloud=s},{"./droi-http":44,"./index":65,"./rest/cloud-code":66}],37:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./rest/cloudcache"),i=function(){function t(){}return t.getValue=function(t){return n.RestCloudCache.instance().get(t)},t.setValue=function(t,e,r){return n.RestCloudCache.instance().set(t,e,r)},t.removeValue=function(t){return n.RestCloudCache.instance().remove(t)},t}();r.DroiCloudCache=i},{"./rest/cloudcache":67}],38:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./droi-const"),i=function(){function t(){var t=this;this.or=function(e){return t.add(n.DroiConstant.DroiQuery_OR,e)},this.and=function(e){return t.add(n.DroiConstant.DroiQuery_AND,e)},this.conditions=[],this.type=n.DroiConstant.DroiQuery_COND}return t.prototype.add=function(e,r){var n=new t;return n.type=e,this.type==e?this.conditions.forEach(function(t){return n.conditions.push(t)}):n.conditions.push(this),r.type==e?r.conditions.forEach(function(t){return n.conditions.push(t)}):n.conditions.push(r),n},t.cond=function(e,r,n){var i=void 0===n||null==n?[e,r]:[e,r,n],o=new t;return o.conditions.push(i),o},t.selectIn=function(e,r){var i=[e,n.DroiConstant.DroiCondition_IN,r],o=new t;return o.conditions.push(i),o},t.notSelectIn=function(e,r){var i=[e,n.DroiConstant.DroiCondition_NOTIN,r],o=new t;return o.conditions.push(i),o},t.lt=function(e,r){return t.cond(e,n.DroiConstant.DroiCondition_LT,r)},t.ltOrEq=function(e,r){return t.cond(e,n.DroiConstant.DroiCondition_LT_OR_EQ,r)},t.eq=function(e,r){return t.cond(e,n.DroiConstant.DroiCondition_EQ,r)},t.neq=function(e,r){return t.cond(e,n.DroiConstant.DroiCondition_NEQ,r)},t.gtOrEq=function(e,r){return t.cond(e,n.DroiConstant.DroiCondition_GT_OR_EQ,r)},t.gt=function(e,r){return t.cond(e,n.DroiConstant.DroiCondition_GT,r)},t.isNull=function(e){return t.cond(e,n.DroiConstant.DroiCondition_ISNULL,null)},t.isNotNull=function(e){return t.cond(e,n.DroiConstant.DroiCondition_ISNOTNULL,null)},t.contains=function(e,r){return t.cond(e,n.DroiConstant.DroiCondition_CONTAINS,r)},t.notContains=function(e,r){return t.cond(e,n.DroiConstant.DroiCondition_NOTCONTAINS,r)},t.startsWith=function(e,r){return t.cond(e,n.DroiConstant.DroiCondition_STARTSWITH,r)},t.notStartsWith=function(e,r){return t.cond(e,n.DroiConstant.DroiCondition_NOTSTARTSWITH,r)},t.endsWith=function(e,r){return t.cond(e,n.DroiConstant.DroiCondition_ENDSWITH,r)},t.notEndsWith=function(e,r){return t.cond(e,n.DroiConstant.DroiCondition_NOTENDSWITH,r)},t}();r.DroiCondition=i},{"./droi-const":39}],39:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(){}return t.IP_LIST_URL="http://175.25.22.149:18080/v2/ip_list",t.VALIDATE_RESOURCE="/validate",t.HTTP_HEADER_DROI_ID="X-Droi-ID",t.HTTP_HEADER_DROI_STATUS="X-Droi-Status",t.HTTP_HEADER_DROI_OTP="X-Droi-Otp",t.HTTP_HEADER_DROI_TS="X-Droi-TS",t.HTTP_HEADER_DROI_ZC="X-Droi-ZC",t.HTTP_HEADER_CONTENT_ENCODING="Content-Encoding",t.HTTP_HEADER_REQUEST_ID="Drid",t.TIME_DIFF_THRESHOLD=12e5,t.COMMUNICATION_PROTOCOL_VERSION=2,t.DROI_STATUS_CORRECT=1,t.DROI_STATUS_FAILED=2,t.X_DROI_STAT_OK=0,t.X_DROI_STAT_KEY_SERVER_NETWORK_ERROR=-1,t.X_DROI_STAT_ID_SERVER_NETWORK_ERROR=-2,t.X_DROI_STAT_ILLEGAL_CLIENT_KEY=-3,t.X_DROI_STAT_VALIDATE_AGAIN=-4,t.X_DROI_STAT_TS_TIMEOUT=-5,t.X_DROI_STAT_RB_DECRYPT_ERROR=-6,t.X_DROI_STAT_RB_GUNZIP_ERROR=-7,t.X_DROI_STAT_RB_TS_VERIFY_ERROR=-8,t.X_DROI_STAT_GENKEY_VALIDATE_COR_ERROR=-9,t.X_DROI_STAT_GENKEY_VALIDATE_FAI_ERROR=-10,t.X_DROI_STAT_BACKEND_NETWORK_ERROR=-11,t.X_DROI_STAT_KEY_SERVER_ISSUE_REKEY=-12,t.X_DROI_STAT_SERVER_INTERNAL_ERROR=-13,t.X_DROI_STAT_RSA_PUBKEY_ERROR=-14,t.X_DROI_STAT_RB_LZ4_DECOMPRESS_ERROR=-15,t.X_DROI_STAT_ZONECODE_MISSING=-21,t.X_DROI_STAT_ZONECODE_EXPIRED=-22,t.X_DROI_STAT_ZONE_EXPIRED_INVALID=-23,t.DROI_KEY_JSON_CLASSNAME="_ClassName",t.DROI_KEY_JSON_TABLE_NAME="_TableName",t.DROI_KEY_JSON_OBJECTID="_Id",t.DROI_KEY_JSON_CREATION_TIME="_CreationTime",t.DROI_KEY_JSON_MODIFIED_TIME="_ModifiedTime",t.DROI_KEY_JSON_DATA_TYPE="_DataType",t.DROI_KEY_JSON_FILE_TYPE="_FileType",t.DROI_KEY_JSON_KEY="_DataKey",t.DROI_KEY_JSON_VALUE="_DataValue",t.DROI_KEY_JSON_VALUE_SET="_ValueSet",t.DROI_KEY_JSON_BYTE_ARRAY="_ByteArray",t.DROI_KEY_JSON_REFERENCE_TYPE="_ReferenceType",t.DROI_KEY_JSON_REFERENCE_VALUE="_Object",t.DROI_KEY_JSON_REFERENCE_DIRTY_FLAG="_ReferenceDirtyFlag",t.DROI_KEY_JSON_PERMISSION="_ACL",t.DROI_KEY_JSON_OBJECT_VALUE="_Value",t.DROI_KEY_HTTP_APP_ID="X-Droi-AppID",t.DROI_KEY_HTTP_DEVICE_ID="X-Droi-DeviceID",t.DROI_KEY_HTTP_API_KEY="X-Droi-Api-Key",t.DROI_KEY_HTTP_TOKEN="X-Droi-Session-Token",t.DROI_API_USER_NOT_EXISTS=1040009,t.DROI_API_RECORD_CONFLICT=1030305,t.DROI_API_USER_EXISTS=1040008,t.DROI_PERMISSION_READ=2,t.DROI_PERMISSION_WRITE=1,t.DroiQuery_SELECT="select",t.DroiQuery_INSERT="insert",t.DroiQuery_DELETE="delete",t.DroiQuery_UPDATE="update",t.DroiQuery_UPDATE_DATA="updateData",t.DroiQuery_TABLE_NAME="tableName",t.DroiQuery_COUNT="count",t.DroiQuery_WHERE="where",t.DroiQuery_COND="cond",t.DroiQuery_VALUES="values",t.DroiQuery_OR="$or",t.DroiQuery_AND="$and",t.DroiQuery_INC="inc",t.DroiQuery_DEC="dec",t.DroiQuery_SET="set",t.DroiQuery_ATOMIC="amotic",t.DroiQuery_ADD="add",t.DroiQuery_ORDERBY="orderby",t.DroiQuery_ASC="ASC",t.DroiQuery_DESC="DESC",t.DroiQuery_LIMIT="limit",t.DroiQuery_OFFSET="offset",t.DroiCondition_LT="$lt",t.DroiCondition_LT_OR_EQ="$lte",t.DroiCondition_EQ="$eq",t.DroiCondition_NEQ="$ne",t.DroiCondition_GT_OR_EQ="$gte",t.DroiCondition_GT="$gt",t.DroiCondition_ISNULL="$exists",t.DroiCondition_ISNOTNULL="ISNOTNULL",t.DroiCondition_CONTAINS="$contains",t.DroiCondition_NOTCONTAINS="$notContains",t.DroiCondition_STARTSWITH="$starts",t.DroiCondition_NOTSTARTSWITH="$notStarts",t.DroiCondition_ENDSWITH="$ends",t.DroiCondition_NOTENDSWITH="$notEnds",t.DroiCondition_IN="$in",t.DroiCondition_NOTIN="$nin",t.PERMISSION_READ=2,t.PERMISSION_WRITE=1,t}();r.DroiConstant=n},{}],40:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./droi-persist-settings"),i=t("./droi-api"),o=t("./droi-user"),s=t("./droi-file"),a=t("./droi-object"),u=t("./droi-group"),c=function(){function t(){}return t.initializeCore=function(e,r){e!==n.DroiPersistSettings.getItem(n.DroiPersistSettings.KEY_APP_ID)&&(n.DroiPersistSettings.setItem(n.DroiPersistSettings.KEY_APP_ID,e),n.DroiPersistSettings.removeItem(n.DroiPersistSettings.KEY_IPLIST),n.DroiPersistSettings.removeItem(n.DroiPersistSettings.KEY_KL_TIMESTAMPV2),n.DroiPersistSettings.removeItem(n.DroiPersistSettings.KEY_KLKEY),n.DroiPersistSettings.removeItem(n.DroiPersistSettings.KEY_PREFERENCE),n.DroiPersistSettings.removeItem(n.DroiPersistSettings.KEY_SAVED_USER)),t.appId=e,t.apiKey=r,a.DroiObject.registerCreateFactory("_User",function(){return o.DroiUser.createUser()}),a.DroiObject.registerCreateFactory("_File",function(){return s.DroiFile.createEmptyFile()}),a.DroiObject.registerCreateFactory("_Group",function(){return u.DroiGroup.createGroup()})},t.getVersion=function(){return"1.0.54"},t.getDeviceId=function(){var t=n.DroiPersistSettings.getItem(n.DroiPersistSettings.KEY_DEVICE_ID);return t?Promise.resolve(t):i.RemoteServiceHelper.fetchHttpsDeviceId().then(function(t){return n.DroiPersistSettings.setItem(n.DroiPersistSettings.KEY_DEVICE_ID,t.string),n.DroiPersistSettings.setItem(n.DroiPersistSettings.KEY_DEVICE_ID_HIGH,t.uidh),n.DroiPersistSettings.setItem(n.DroiPersistSettings.KEY_DEVICE_ID_LOW,t.uidl),t.string})},t.getInstallationId=function(){var t=n.DroiPersistSettings.getItem(n.DroiPersistSettings.KEY_INSTALLATION_ID);return t||(t=a.Guid.newGuid(),n.DroiPersistSettings.setItem(n.DroiPersistSettings.KEY_INSTALLATION_ID,t)),t},t.getAppId=function(){return t.appId},t.getApiKey=function(){return t.apiKey},t}();r.DroiCore=c},{"./droi-api":34,"./droi-file":42,"./droi-group":43,"./droi-object":47,"./droi-persist-settings":49,"./droi-user":64}],41:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(t,e,r){this._code=t,this._appendMessage=e,this._ticket=r}return t.fillMessages=function(){var e={};return e[t.OK]="OK.",e[t.UNKNOWN_ERROR]="Unknown error.",e[t.ERROR]="Error.",e[t.USER_NOT_EXISTS]="User is not exists.",e[t.USER_PASSWORD_INCORRECT]="Password is not correct.",e[t.USER_ALREADY_EXISTS]="User is already exists.",e[t.NETWORK_NOT_AVAILABLE]="Network is not available.",e[t.USER_NOT_AUTHORIZED]="User is not authorized.",e[t.SERVER_NOT_REACHABLE]="Server is not reachable.",e[t.HTTP_SERVER_ERROR]="Error happened in Server side.",e[t.SERVICE_NOT_ALLOWED]="Service is not allowed.",e[t.SERVICE_NOT_FOUND]="Service is not found.",e[t.INTERNAL_SERVER_ERROR]="Internal server error.",e[t.INVALID_PARAMETER]="Invalid parameters.",e[t.USER_DISABLE]="User is in disable state.",e[t.EXCEED_MAX_SIZE]="Exceed max size.",e[t.FILE_NOT_READY]="File is not ready.",e[t.CORE_NOT_INITIALIZED]="DroiBaaS SDK is not initialized.",e[t.USER_CANCELED]="User is canceled.",e[t.BANDWIDTH_LIMIT_EXCEED]="Bandwidth limit exceed.",e[t.TIME_UNCORRECTED]="Incorrected time, please correct time first.",e[t.APPLICATION_ID_UNCORRECTED]="Incorrected application id.",e[t.TIMEOUT]="Network timeout.",e[t.USER_ALREADY_LOGIN]="Already logged in a valid user.",e[t.USER_CONTACT_HAD_VERIFIED]="User contact had verified.",e[t.USER_CONTACT_EMPTY]="User contact is empty.",e[t.USER_FUNCTION_NOT_ALLOWED]="The function is not allowed for current user.",e[t.READ_CACHE_FAILED]="Read cache fail.",e[t.UPLOAD_FAILED]="Upload file failed.",e[t.FIELD_NOT_FOUND]="Field not found.",e[t.NATIVE_LIBRARY_NOT_LOADED]="Native plugin is not loaded.",e[t.DROI_SECURE_NOT_SUPPORT]="The current runtime not support DroiSecure",e},Object.defineProperty(t.prototype,"code",{get:function(){return this._code},set:function(t){this._code=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ticket",{get:function(){return this._ticket},set:function(t){this._ticket=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"appendMessage",{get:function(){return this._appendMessage},set:function(t){this._appendMessage=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOk",{get:function(){return 0==this._code},enumerable:!0,configurable:!0}),t.prototype.toString=function(){var e=t.MESSAGES[this._code];return e||(e="Error code: "+this._code),this._ticket&&(e=e+" Ticket: "+this._ticket),this._appendMessage&&(e=e+" "+this._appendMessage),e},t.OK=0,t.UNKNOWN_ERROR=107e4,t.ERROR=1070001,t.USER_NOT_EXISTS=1070002,t.USER_PASSWORD_INCORRECT=1070003,t.USER_ALREADY_EXISTS=1070004,t.NETWORK_NOT_AVAILABLE=1070005,t.USER_NOT_AUTHORIZED=1070006,t.SERVER_NOT_REACHABLE=1070007,t.HTTP_SERVER_ERROR=1070008,t.SERVICE_NOT_ALLOWED=1070009,t.SERVICE_NOT_FOUND=1070010,t.INTERNAL_SERVER_ERROR=1070011,t.INVALID_PARAMETER=1070012,t.NO_PERMISSION=1070013,t.USER_DISABLE=1070014,t.EXCEED_MAX_SIZE=1070015,t.FILE_NOT_READY=1070016,t.CORE_NOT_INITIALIZED=1070017,t.USER_CANCELED=1070018,t.BANDWIDTH_LIMIT_EXCEED=1070019,t.APPLICATION_ID_UNCORRECTED=1070101,t.NATIVE_LIBRARY_NOT_LOADED=1070103,t.DROI_SECURE_NOT_SUPPORT=1070104,t.TIME_UNCORRECTED=1070201,t.TIMEOUT=1070202,t.USER_ALREADY_LOGIN=1070301,t.USER_CONTACT_HAD_VERIFIED=1070302,t.USER_CONTACT_EMPTY=1070303,t.USER_FUNCTION_NOT_ALLOWED=1070304,t.FIELD_NOT_FOUND=1070401,t.READ_CACHE_FAILED=1070501,t.UPLOAD_FAILED=1070502,t.MESSAGES=t.fillMessages(),t}();r.DroiError=n},{}],42:[function(t,e,r){"use strict";function n(t){return new Promise(function(e,r){wx.getFileInfo({filePath:t,success:function(t){e({digest:t.digest,size:t.size})},fail:function(t){r(t)}})})}var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(s,a)}u((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){function r(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}var n,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(r,"__esModule",{value:!0});var a=t("./droi-object"),u=t("./droi-error"),c=t("./rest/file"),h=t("./droi-log"),l=function(t){function e(){var e=t.call(this,"_File")||this;return e.contentDirty=!0,e.contentPath=null,e.newFile=!0,e}return i(e,t),e.createEmptyFile=function(){var t=new e;t.newFile=!1;var r="DroiFile-".concat(t.objectId());return t.contentPath=null,t.contentDirty=!0,t.setValue(e.DROI_KEY_FILE_NAME,r),t.setValue(e.DROI_KEY_FILE_FID,0),t.setValue(e.DROI_KEY_FILE_MD5,0),t.setValue(e.DROI_KEY_FILE_SIZE,0),t},e.createFile=function(t,r){return void 0===t&&(t=null),void 0===r&&(r=null),o(this,void 0,void 0,function(){var n,i;return s(this,function(o){switch(o.label){case 0:n=new e,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.init(t,r)];case 2:return o.sent(),[3,4];case 3:return i=o.sent(),[2,Promise.reject(i)];case 4:return null==t&&null==r&&(n.newFile=!1),[2,n]}})})},e.prototype.init=function(t,r){return void 0===t&&(t=null),void 0===r&&(r=null),o(this,void 0,void 0,function(){var i;return s(this,function(o){switch(o.label){case 0:return r=r||"DroiFile-".concat(this.objectId()),this.contentPath=t,this.contentDirty=!0,this.setValue(e.DROI_KEY_FILE_NAME,r),this.setValue(e.DROI_KEY_FILE_FID,0),null==t?[3,2]:[4,n(t)];case 1:return i=o.sent(),this.setValue(e.DROI_KEY_FILE_MD5,i.digest),this.setValue(e.DROI_KEY_FILE_SIZE,i.size),[3,3];case 2:this.setValue(e.DROI_KEY_FILE_MD5,0),this.setValue(e.DROI_KEY_FILE_SIZE,0),o.label=3;case 3:return[2,Promise.resolve(!0)]}})})},Object.defineProperty(e.prototype,"Size",{get:function(){var t=this.getValue(e.DROI_KEY_FILE_SIZE);return Number(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MD5",{get:function(){return this.getValue(e.DROI_KEY_FILE_MD5)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Name",{get:function(){return this.getValue(e.DROI_KEY_FILE_NAME)},enumerable:!0,configurable:!0}),e.prototype.getUris=function(t){if(!t){var r=this.getValue(e.DROI_KEY_FILE_EXTRA);if(void 0!==r&&null!==r){var n=r.CDN;if(void 0!==n)return Promise.resolve([n])}}return c.RestFile.instance().getUri(this.objectId())},e.prototype.update=function(t,r,i){return void 0===r&&(r=null),void 0===i&&(i="application/octet-stream"),o(this,void 0,void 0,function(){var i,o,a,c;return s(this,function(s){switch(s.label){case 0:if(null==t||0==t.length)return[2,Promise.reject(new u.DroiError(u.DroiError.ERROR,"The file path is empty."))];i=null,o=0,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n(t)];case 2:return a=s.sent(),i=a.digest,o=a.size,[3,4];case 3:return c=s.sent(),[2,Promise.reject(c)];case 4:return i==this.MD5?[2,Promise.resolve(new u.DroiError(u.DroiError.OK))]:(this.contentPath=t,this.contentDirty=!0,this.setValue(e.DROI_KEY_FILE_MD5,i),this.setValue(e.DROI_KEY_FILE_SIZE,o),[2,this.save(r)])}})})},e.prototype.save=function(e){return void 0===e&&(e=null),o(this,void 0,void 0,function(){var r,n;return s(this,function(i){switch(i.label){case 0:if(this.contentDirty&&(null==this.contentPath||0==this.contentPath.length))return[2,Promise.reject(new u.DroiError(u.DroiError.ERROR,"The file path is empty."))];i.label=1;case 1:return i.trys.push([1,4,,5]),[4,this.saveInternal(this.contentPath,e)];case 2:return 0==(r=i.sent()).isOk?[2,Promise.reject(r)]:(this.newFile=!1,this.contentDirty=!1,[4,t.prototype.save.call(this)]);case 3:return[2,i.sent()];case 4:return n=i.sent(),[2,Promise.reject(n)];case 5:return[2]}})})},e.prototype.delete=function(){return c.RestFile.instance().delete(this.objectId())},e.prototype.isContentDirty=function(){return this.contentDirty},e.prototype.saveInternal=function(t,r){return o(this,void 0,void 0,function(){var n,i,o,a,l,f,p,d;return s(this,function(s){switch(s.label){case 0:if(null==t||0==t.length)return[2,Promise.reject(new u.DroiError(u.DroiError.ERROR,"File content is empty. (No update)"))];if(0==this.contentDirty)return[2,Promise.resolve(new u.DroiError(u.DroiError.OK))];s.label=1;case 1:return s.trys.push([1,4,,5]),[4,c.RestFile.instance().getUploadToken(this.objectId(),this.Name,"application/octet-stream",this.Size,this.MD5,this.newFile)];case 2:return n=s.sent(),i=n.Token,o=n.UploadUrl,a=n.SessionId,void 0!==n.Id&&(h.DroiLog.d(e.LOG_TAG,"Replace by new Id: "+n.Id),this.setObjectId(n.Id)),h.DroiLog.d(e.LOG_TAG,"Upload data to CDN"),[4,c.RestFile.instance().upload(o,i,a,this.objectId(),this.Name,this.contentPath,r)];case 3:return l=s.sent(),void 0!==(f=JSON.parse(l.data).Result).FId&&this.setValue(e.DROI_KEY_FILE_FID,f.FId),void 0!==f.CDN&&(p={CDN:f.CDN},this.setValue(e.DROI_KEY_FILE_EXTRA,p),h.DroiLog.d(e.LOG_TAG,"The CDN link is "+f.CDN)),this.contentDirty=!1,[2,Promise.resolve(new u.DroiError(u.DroiError.OK))];case 4:return d=s.sent(),h.DroiLog.e(e.LOG_TAG," There is an error."+d),[2,Promise.reject(d)];case 5:return[2]}})})},e.DROI_KEY_FILE_NAME="Name",e.DROI_KEY_FILE_MD5="MD5",e.DROI_KEY_FILE_SIZE="Size",e.DROI_KEY_FILE_FID="Fid",e.DROI_KEY_FILE_EXTRA="_MongoDmd",e.LOG_TAG="DroiFile",e}(a.DroiObject);r.DroiFile=l},{"./droi-error":41,"./droi-log":45,"./droi-object":47,"./rest/file":68}],43:[function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var i=t("./droi-error"),o=t("./droi-object"),s=t("./rest/group"),a=function(t){function e(e){var r=t.call(this,"_Group")||this;return r.fetchReady=!1,e&&(r.Name=e),r}return n(e,t),e.createGroup=function(t){return t=t||"",new e(t)},e.getGroupIdByObjectId=function(t,e){return s.RestGroup.instance().getGroupIdByObjectId(t,e)},e.getGroupIdsByUserObjectId=function(t){return e.getGroupIdByObjectId(0,t)},e.getGroupIdsByGroupObjectId=function(t){return e.getGroupIdByObjectId(1,t)},e.prototype.fetchRelation=function(){var t=this;return s.RestGroup.instance().fetch(this.Name).then(function(r){var n=e.fromJson(r);return t.cloneFrom(n),t.fetchReady=!0,new i.DroiError(i.DroiError.OK)})},e.prototype.addUser=function(t){return this.addData(e.KEY_USERS,t)},e.prototype.removeUser=function(t){this.removeData(e.KEY_USERS,t)},e.prototype.addGroup=function(t){return this.addData(e.KEY_GROUPS,t)},e.prototype.removeGroup=function(t){this.removeData(e.KEY_GROUPS,t)},e.prototype.addData=function(t,e){var r=this.getValue(t);if(null==r&&(r=[e],this.setValue(t,r)),r.indexOf(e)>=0)return new i.DroiError(i.DroiError.INVALID_PARAMETER,"User object id was already existed");r.push(e),this.setValue(t,r)},e.prototype.removeData=function(t,e){var r=this.getValue(t);if(null!=r){var n=r.indexOf(e);n<0||(r.splice(n,1),this.setValue(t,r))}},Object.defineProperty(e.prototype,"isReady",{get:function(){return this.fetchReady},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Name",{get:function(){return this.getValue(e.KEY_NAME)},set:function(t){this.setValue(e.KEY_NAME,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userIdList",{get:function(){var t=this.getValue(e.KEY_USERS);return null==t?null:JSON.parse(JSON.stringify(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupIdList",{get:function(){var t=this.getValue(e.KEY_GROUPS);return null==t?null:JSON.parse(JSON.stringify(t))},enumerable:!0,configurable:!0}),e.KEY_NAME="Name",e.KEY_USERS="Users",e.KEY_GROUPS="Groups",e}(o.DroiObject);r.DroiGroup=a},{"./droi-error":41,"./droi-object":47,"./rest/group":69}],44:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./droi-error"),i=t("superagent"),o=t("./droi-secure/src"),s=t("./droi-log"),a=o.TUTIL();!function(t){t.GET="GET",t.POST="POST",t.PUT="PUT",t.PATCH="PATCH",t.DELETE="DELETE"}(r.DroiHttpMethod||(r.DroiHttpMethod={}));var u=function(){return function(){}}();r.DroiHttpRequest=u;var c=function(){return function(){}}();r.DroiHttpResponse=c;var h=function(){function t(){}return t.sendRequest=function(e){var r=i(e.method,e.url);return e.isBinary&&r.responseType("arraybuffer"),null!=e.headers&&r.set(e.headers),null!=e.data&&r.send(e.data),s.DroiLog.d(t.LOG_TAG,"    Url: "+e.method+" "+e.url),s.DroiLog.d(t.LOG_TAG,"Headers: "+JSON.stringify(e.headers)),s.DroiLog.d(t.LOG_TAG,"  Input: "+e.data),r.then(function(r){var n;n=e.isBinary?a.bytes_to_string(new Uint8Array(r.body)):r.text,s.DroiLog.d(t.LOG_TAG," Output: "+n);var i=new c;return i.status=r.status,i.data=n,i.headers=r.header,i}).catch(function(t){var e=n.DroiError.SERVER_NOT_REACHABLE;return"ETIMEDOUT"==t.code&&(e=n.DroiError.TIMEOUT),Promise.reject(new n.DroiError(e,t.toString()))})},t.LOG_TAG="DroiHttp",t}();r.DroiHttp=h},{"./droi-error":41,"./droi-log":45,"./droi-secure/src":59,superagent:20}],45:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n;!function(t){t[t.Verbose=0]="Verbose",t[t.Debug=1]="Debug",t[t.Info=2]="Info",t[t.Warning=3]="Warning",t[t.Error=4]="Error"}(n=r.LogLevel||(r.LogLevel={}));var i=function(){function t(){}return t.setLogLevel=function(e){t.LOG_LEVEL=e},t.getLogLevel=function(){return t.LOG_LEVEL},t.enableColor=function(){t.ISCOLOR=!0},t.disableColor=function(){t.ISCOLOR=!1},t.v=function(e,r){t.log(n.Verbose,e,r)},t.d=function(e,r){t.log(n.Debug,e,r)},t.i=function(e,r){t.log(n.Info,e,r)},t.w=function(e,r){t.log(n.Warning,e,r)},t.e=function(e,r){t.log(n.Error,e,r)},t.log=function(e,r,n){if(!(t.LOG_LEVEL>e)){var i=t.LOG_LEVEL_STR[e],o=(new Date).toString()+" "+i+"/"+r+": "+n;if(t.ISCOLOR){o="["+t.COLORS_16_MAP[e]+"m"+o+"[0;37m"}console.log(o)}},t.LOG_LEVEL=n.Error,t.ISCOLOR=!0,t.COLORS_16_MAP=["1;37","1;34","1;32","33","31"],t.LOG_LEVEL_STR=["V","D","I","W","E"],t}();r.DroiLog=i},{}],46:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(t,e){this.key=t,this.value=e}}();r.MultimapEntry=n;var i=function(){function t(){this._entries=[]}return t.prototype.clear=function(){this._entries=[]},t.prototype.containsKey=function(t){return this._entries.filter(function(e){return e.key==t}).length>0},t.prototype.containsEntry=function(t,e){return this._entries.filter(function(r){return r.key==t&&r.value==e}).length>0},t.prototype.remove=function(t){var e=this._entries;return this._entries=this._entries.filter(function(e){return e.key!=t}),e.length!=this._entries.length},Object.defineProperty(t.prototype,"entries",{get:function(){return this._entries},enumerable:!0,configurable:!0}),t.prototype.get=function(t){return this._entries.filter(function(e){return e.key==t}).map(function(t){return t.value})},t.prototype.getElement=function(t,e){var r=this.get(t);return e<r.length?r[e]:null},t.prototype.put=function(t,e){this._entries.push(new n(t,e))},t}();r.ArrayListMultimap=i},{}],47:[function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(s,a)}u((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){function r(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}var n,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(r,"__esModule",{value:!0});var o=t("./droi-const"),s=t("./droi-permission"),a=t("./droi-error"),u=t("./droi-query-internal"),c=t("./droi-condition"),h=(function(){}(),function(){function t(){}return t.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},t}());r.Guid=h;var l;!function(t){t[t.DIRTY_FLAG_BODY=1]="DIRTY_FLAG_BODY",t[t.DIRTY_FLAG_REFERENCE=2]="DIRTY_FLAG_REFERENCE"}(l||(l={}));var f=function(){function t(t){this.properties={},this.dirtyFlags=l.DIRTY_FLAG_BODY;var e=new Date;this.properties[o.DroiConstant.DROI_KEY_JSON_CLASSNAME]=t,this.properties[o.DroiConstant.DROI_KEY_JSON_OBJECTID]=h.newGuid().replace(/-/g,"").substring(8),this.properties[o.DroiConstant.DROI_KEY_JSON_CREATION_TIME]=e.toISOString(),this.properties[o.DroiConstant.DROI_KEY_JSON_MODIFIED_TIME]=e.toISOString()}return t.createObject=function(e){return t.factoryies.hasOwnProperty(e)?t.factoryies[e]():new t(e)},t.prototype.objectId=function(){return this.properties[o.DroiConstant.DROI_KEY_JSON_OBJECTID]},t.prototype.setObjectId=function(t){this.properties[o.DroiConstant.DROI_KEY_JSON_OBJECTID]=t},t.prototype.creationTime=function(){var t=this.properties[o.DroiConstant.DROI_KEY_JSON_CREATION_TIME];return new Date(t)},t.prototype.modifiedTime=function(){var t=this.properties[o.DroiConstant.DROI_KEY_JSON_MODIFIED_TIME];return new Date(t)},t.prototype.tableName=function(){return this.properties[o.DroiConstant.DROI_KEY_JSON_CLASSNAME]},t.prototype.setValue=function(e,r){if(e!=o.DroiConstant.DROI_KEY_JSON_OBJECTID&&e!=o.DroiConstant.DROI_KEY_JSON_CREATION_TIME&&e!=o.DroiConstant.DROI_KEY_JSON_MODIFIED_TIME&&e!=o.DroiConstant.DROI_KEY_JSON_CLASSNAME)if(null!=r){var n=null;if(r instanceof Date)n=r.toISOString();else if(r instanceof t)n=r;else if(r instanceof Array){for(var i=[],s=0,a=r;s<a.length;s++){var u=a[s];i.push(u)}n=i}else if("object"==typeof r){var c={};for(var h in r)c[h]=r[h];n=c}else"string"!=typeof r&&"number"!=typeof r&&"boolean"!=typeof r||(n=r);null!=n&&(n!=this.properties[e]&&(this.dirtyFlags|=l.DIRTY_FLAG_BODY),this.properties[e]=n)}else this.properties.hasOwnProperty(e)&&(delete this.properties[e],this.dirtyFlags|=l.DIRTY_FLAG_BODY)},t.prototype.getValue=function(t){return t==o.DroiConstant.DROI_KEY_JSON_OBJECTID||t==o.DroiConstant.DROI_KEY_JSON_CREATION_TIME||t==o.DroiConstant.DROI_KEY_JSON_MODIFIED_TIME||t==o.DroiConstant.DROI_KEY_JSON_CLASSNAME||void 0===this.properties[t]?null:this.properties[t]},t.saveAll=function(t){return null},t.fetch=function(t,e){return u.DroiQueryInternal.create(t).where(c.DroiCondition.cond(o.DroiConstant.DROI_KEY_JSON_OBJECTID,o.DroiConstant.DroiCondition_EQ,e)).runQuery().then(function(t){return t.length>0?t[0]:null})},t.prototype.save=function(){return this.funcTemplate(this.saveToStorage)},t.prototype.delete=function(){return this.funcTemplate(this.deleteFromStorage)},t.prototype.atomicAdd=function(t,e){return this.funcTemplate(function(r){return n(this,void 0,void 0,function(){var n,o;return i(this,function(i){switch(i.label){case 0:return r.checkDirtyFlags(),0!=(r.dirtyFlags&l.DIRTY_FLAG_BODY)?[2,Promise.reject(new a.DroiError(a.DroiError.ERROR,"DroiObject content dirty"))]:(n=u.DroiQueryInternal.updateData(r.tableName()).atomic(r).add(t,e),[4,n.run()]);case 1:return o=i.sent(),[2,o]}})})})},t.prototype.funcTemplate=function(t){var e=this,r=this;return new Promise(function(o,s){return n(e,void 0,void 0,function(){var e,n;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t(r)];case 1:return(n=i.sent()).isOk?o(n):s(n),[3,3];case 2:return e=i.sent(),n=void 0,n=e instanceof a.DroiError?e:new a.DroiError(a.DroiError.ERROR),s(n),[3,3];case 3:return[2]}})})})},t.prototype.saveToStorage=function(t){if(t.checkDirtyFlags(),0==t.dirtyFlags)return Promise.resolve(new a.DroiError(a.DroiError.OK));new a.DroiError(a.DroiError.OK);var e=new Date;t.properties[o.DroiConstant.DROI_KEY_JSON_MODIFIED_TIME]=e.toISOString(),t.dirtyFlags|=l.DIRTY_FLAG_BODY;return u.DroiQueryInternal.upsert(t).run().then(function(e){return t.dirtyFlags=0,e})},t.prototype.deleteFromStorage=function(t){new a.DroiError(a.DroiError.OK);return u.DroiQueryInternal.delete(t).run()},t.prototype.isDirty=function(){return 0!=this.dirtyFlags},Object.defineProperty(t.prototype,"permission",{get:function(){return this.perm},set:function(t){this.dirtyFlags|=l.DIRTY_FLAG_BODY,this.perm=t},enumerable:!0,configurable:!0}),t.prototype.checkDirtyFlags=function(){var e=!1,r=this;t.travelDroiObject(r,function(t){r!=t&&(t.checkDirtyFlags(),e=t.isDirty()||e)}),e&&(r.dirtyFlags|=l.DIRTY_FLAG_REFERENCE)},t.prototype.toJson=function(e){void 0===e&&(e=!1);var r=t.exportProperties(this.properties,0,e);if(void 0!==this.permission)r[o.DroiConstant.DROI_KEY_JSON_PERMISSION]=this.permission.toJsonObject();else if(void 0!==s.DroiPermission.getDefaultPermission()){var n=s.DroiPermission.getDefaultPermission();r[o.DroiConstant.DROI_KEY_JSON_PERMISSION]=n.toJsonObject()}return JSON.stringify(r)},t.prototype.toJSON=function(){return this.toJson(!0)},t.prototype.cloneFrom=function(t){this.properties=t.properties,this.permission=t.permission,this.dirtyFlags=t.dirtyFlags},t.fromJson=function(e){var r=null;if("string"==typeof e)try{e=JSON.parse(e)}catch(t){return null}if(e instanceof Array){for(var n=new Array,i=0,a=e;i<a.length;i++){var u=a[i],c=t.fromJson(u)||u;n.push(u)}r=n}else if("object"==typeof e)if(void 0!==e[o.DroiConstant.DROI_KEY_JSON_CLASSNAME]&&void 0!==e[o.DroiConstant.DROI_KEY_JSON_OBJECTID]&&void 0!==e[o.DroiConstant.DROI_KEY_JSON_CREATION_TIME]&&void 0!==e[o.DroiConstant.DROI_KEY_JSON_MODIFIED_TIME]){var h=e[o.DroiConstant.DROI_KEY_JSON_CLASSNAME],c=t.createObject(h);for(var l in e){var f=e[l],p=t.fromJson(f)||f;c.properties[l]=p}r=c}else{if(void 0!==e[o.DroiConstant.DROI_KEY_JSON_DATA_TYPE]){var d=e[o.DroiConstant.DROI_KEY_JSON_DATA_TYPE],c=null;if(d==o.DroiConstant.DROI_KEY_JSON_REFERENCE_TYPE||d==o.DroiConstant.DROI_KEY_JSON_FILE_TYPE){var _=e[o.DroiConstant.DROI_KEY_JSON_REFERENCE_VALUE];void 0!==_&&(c=t.fromJson(_))}r=c}if(null==r){var y={};for(var l in e){var f=e[l],p=t.fromJson(f)||f;y[l]=p}r=y}}return void 0!==e[o.DroiConstant.DROI_KEY_JSON_PERMISSION]&&(r.permission=s.DroiPermission.restorePermission(e[o.DroiConstant.DROI_KEY_JSON_PERMISSION])),r},t.travelDroiObject=function(e,r,n,i){if(void 0===n&&(n=3),void 0===i&&(i=0),!(null==e||"object"!=typeof e||n<=i)){var o=null;if(e instanceof t&&(o=e,e=e.properties),e instanceof Array)for(var s=0,a=e;s<a.length;s++){var u=a[s];t.travelDroiObject(u,r,n,i+1)}else if(e instanceof Object)for(var c in e)t.travelDroiObject(e[c],r,n,i+1);null!=o&&r(o)}},t.exportProperties=function(e,r,n){var i;if(null==e||"object"!=typeof e)return e;if(e instanceof t)return 0==r||n?t.exportProperties(e.properties,r+1,n):(i={},i[o.DroiConstant.DROI_KEY_JSON_OBJECTID]=e.objectId(),i[o.DroiConstant.DROI_KEY_JSON_DATA_TYPE]=o.DroiConstant.DROI_KEY_JSON_REFERENCE_TYPE,i[o.DroiConstant.DROI_KEY_JSON_TABLE_NAME]=e.tableName(),i);if(e instanceof Date)return(i=new Date).setTime(e.getTime()),i.toISOString();if(e instanceof Array){i=[];for(var s=0,a=e.length;s<a;s++)i[s]=t.exportProperties(e[s],r+1,n);return i}if(e instanceof Object){i={};for(var u in e)e.hasOwnProperty(u)&&(i[u]=t.exportProperties(e[u],r+1,n));return i}throw new Error("Unable to copy obj! Its type isn't supported.")},t.registerCreateFactory=function(e,r){t.factoryies[e]=r},t.TIME_SHIFT=0,t.factoryies={},t}();r.DroiObject=f},{"./droi-condition":38,"./droi-const":39,"./droi-error":41,"./droi-permission":48,"./droi-query-internal":52}],48:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./droi-const"),i=function(){function t(){this.userPermission={},this.groupPermission={}}return t.copyFrom=function(e){var r=new t;return r.creator=e.creator,r.userPermission=e.userPermission,r.groupPermission=e.groupPermission,r.publicPermission=e.publicPermission,r},t.getDefaultPermission=function(){return t.defaultPermission},t.setDefaultPermission=function(e){t.defaultPermission=t.copyFrom(e)},t.prototype.setUserReadPermission=function(t,e){this.setPermission(!0,t,n.DroiConstant.DROI_PERMISSION_READ,e)},t.prototype.setUserWritePermission=function(t,e){this.setPermission(!0,t,n.DroiConstant.DROI_PERMISSION_WRITE,e)},t.prototype.setGroupReadPermission=function(t,e){this.setPermission(!1,t,n.DroiConstant.DROI_PERMISSION_READ,e)},t.prototype.setGroupWritePermission=function(t,e){this.setPermission(!1,t,n.DroiConstant.DROI_PERMISSION_WRITE,e)},t.prototype.setPublicReadPermission=function(t){t?this.publicPermission|=n.DroiConstant.DROI_PERMISSION_READ:this.publicPermission&=~n.DroiConstant.DROI_PERMISSION_READ},t.prototype.setPublicWritePermission=function(t){t?this.publicPermission|=n.DroiConstant.DROI_PERMISSION_WRITE:this.publicPermission&=~n.DroiConstant.DROI_PERMISSION_WRITE},t.prototype.setPermission=function(t,e,r,n){var i=(t?this.userPermission[e]:this.groupPermission[e])||0;n?i|=r:i&=~r,t?this.userPermission[e]=i:this.groupPermission[e]=i},t.prototype.setCreator=function(t){this.creator=t},t.prototype.getCreator=function(){return this.creator},t.prototype.toJsonObject=function(){var t={};this.creator&&(t.creator=this.creator),this.publicPermission&n.DroiConstant.DROI_PERMISSION_READ&&(t.pr=!0),this.publicPermission&n.DroiConstant.DROI_PERMISSION_WRITE&&(t.pw=!0);var e=this.extractPermission(this.userPermission);return e[0].length>0&&(t.ur=e[0]),e[1].length>0&&(t.uw=e[1]),(e=this.extractPermission(this.groupPermission))[0].length>0&&(t.gr=e[0]),e[1].length>0&&(t.gw=e[1]),t},t.prototype.extractPermission=function(t){var e=[],r=[];for(var i in t){var o=t[i];o&n.DroiConstant.DROI_PERMISSION_READ&&e.push(i),o&n.DroiConstant.DROI_PERMISSION_WRITE&&r.push(i)}return[e,r]},t.restorePermission=function(e){var r=new t;e.hasOwnProperty("creator")&&(r.creator=e.creator),e.hasOwnProperty("pr")&&r.setPublicReadPermission(e.pr),e.hasOwnProperty("pw")&&r.setPublicWritePermission(e.pw);var n=function(t,e,r){return function(r,n){if(e.hashOwnProperty(t))for(var i=0,o=e[t];i<o.length;i++){n(o[i],!0)}}};return n("ur",e,r.setUserReadPermission),n("uw",e,r.setUserWritePermission),n("gr",e,r.setGroupReadPermission),n("gw",e,r.setGroupWritePermission),r},t}();r.DroiPermission=i},{"./droi-const":39}],49:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(){}return t.getItem=function(t){return localStorage.getItem(t)},t.setItem=function(t,e){localStorage.setItem(t,e)},t.removeItem=function(t){localStorage.removeItem(t)},t.KEY_DEVICE_ID="did",t.KEY_DEVICE_ID_HIGH="didu",t.KEY_DEVICE_ID_LOW="didl",t.KEY_INSTALLATION_ID="iid",t.KEY_SAVED_USER="susr",t.KEY_IPLIST="ipl",t.KEY_KLKEY="kkl",t.KEY_KL_TIMESTAMPV2="klt2",t.KEY_PREFERENCE="dcp",t.KEY_APP_ID="apid",t}();r.DroiPersistSettings=n},{}],50:[function(t,e,r){(function(e){t("weapp-polyfill/auto-polyfill")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"weapp-polyfill/auto-polyfill":25}],51:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./droi-error"),i=t("./droi-persist-settings"),o=t("./rest/preference"),s=function(){function t(){this.dataReady=!1;var t=i.DroiPersistSettings.getItem(i.DroiPersistSettings.KEY_PREFERENCE);null!=t&&(this.map=JSON.parse(t))}return t.instance=function(){return null==t.INSTANCE&&(t.INSTANCE=new t),t.INSTANCE},t.prototype.refresh=function(){var t=this;return this.dataReady=!1,o.RestPreference.instance().get().then(function(e){return t.dataReady=!0,t.map=e,i.DroiPersistSettings.setItem(i.DroiPersistSettings.KEY_PREFERENCE,JSON.stringify(e)),new n.DroiError(n.DroiError.OK)}).catch(function(e){return t.dataReady=null!=t.map,e})},t.prototype.getValue=function(t){return this.map[t]},t.INSTANCE=null,t}();r.DroiPreference=s},{"./droi-error":41,"./droi-persist-settings":49,"./rest/preference":71}],52:[function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var i=t("./droi-query"),o=t("./droi-const"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.create=function(t){return new e(t)},e.updateData=function(t){var r=new e(t);return r.queryCommand.put(o.DroiConstant.DroiQuery_UPDATE_DATA,0),r.queryCommand.remove(o.DroiConstant.DroiQuery_SELECT),r.queryCommand.put(o.DroiConstant.DroiQuery_TABLE_NAME,t),r},e.upsert=function(t){var r=new e(t.tableName());return r.queryCommand.put(o.DroiConstant.DroiQuery_INSERT,[t]),r.queryCommand.remove(o.DroiConstant.DroiQuery_SELECT),r.queryCommand.put(o.DroiConstant.DroiQuery_TABLE_NAME,t.tableName()),r},e.delete=function(t){var r=new e(t.tableName());return r.queryCommand.put(o.DroiConstant.DroiQuery_DELETE,[t]),r.queryCommand.remove(o.DroiConstant.DroiQuery_SELECT),r.queryCommand.put(o.DroiConstant.DroiQuery_TABLE_NAME,t.tableName()),r},e.prototype.atomic=function(t){return this.queryCommand.put(o.DroiConstant.DroiQuery_ATOMIC,t),this},e}(i.DroiQuery);r.DroiQueryInternal=s},{"./droi-const":39,"./droi-query":53}],53:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./droi-error"),i=t("./droi-multimap"),o=t("./droi-const"),s=t("./droi-cloud-storage-data-provider"),a=function(){function t(t){this.queryCommand=new i.ArrayListMultimap,this.queryCommand.put(o.DroiConstant.DroiQuery_SELECT,t),this.queryCommand.put(o.DroiConstant.DroiQuery_TABLE_NAME,t)}return t.create=function(e){return new t(e)},t.updateData=function(e){var r=new t(e);return r.queryCommand.put(o.DroiConstant.DroiQuery_UPDATE_DATA,0),r.queryCommand.remove(o.DroiConstant.DroiQuery_SELECT),r.queryCommand.put(o.DroiConstant.DroiQuery_TABLE_NAME,e),r},t.prototype.run=function(){return this.runQuery().then(function(t){return new n.DroiError(n.DroiError.OK)})},t.prototype.count=function(){return this.queryCommand.containsKey(o.DroiConstant.DroiQuery_SELECT)?(this.queryCommand.put(o.DroiConstant.DroiQuery_COUNT,1),this.runQuery().then(function(t){if(t.length<=0)throw new n.DroiError(n.DroiError.ERROR);return t[0]})):Promise.reject(new n.DroiError(n.DroiError.INVALID_PARAMETER,"Only support Query command"))},t.prototype.runQuery=function(){try{this.throwIfTheCommandInvalid()}catch(t){return Promise.reject(new n.DroiError(n.DroiError.ERROR,t.message))}var t=s.CloudStorageDataProvider.create();if(this.queryAction==o.DroiConstant.DroiQuery_UPDATE_DATA)return t.updateData(this.queryCommand).then(function(t){return null});this.queryCommand.remove(o.DroiConstant.DroiQuery_SET),this.queryCommand.remove(o.DroiConstant.DroiQuery_ATOMIC),this.queryCommand.remove(o.DroiConstant.DroiQuery_ADD),this.queryCommand.remove(o.DroiConstant.DroiQuery_UPDATE_DATA);switch(this.queryAction){case o.DroiConstant.DroiQuery_SELECT:return t.query(this.queryCommand);case o.DroiConstant.DroiQuery_INSERT:case o.DroiConstant.DroiQuery_UPDATE:return t.upsert(this.queryCommand).then(function(){return null});case o.DroiConstant.DroiQuery_DELETE:return t.delete(this.queryCommand).then(function(){return null})}},t.prototype.where=function(t){if(this.queryCommand.containsKey(o.DroiConstant.DroiQuery_WHERE))throw"There is WHERE condition object in command queue.";return this.queryCommand.put(o.DroiConstant.DroiQuery_WHERE,t),this},t.prototype.orderBy=function(t,e){return this.queryCommand.put(o.DroiConstant.DroiQuery_ORDERBY,[t,e?o.DroiConstant.DroiQuery_ASC:o.DroiConstant.DroiQuery_DESC]),this},t.prototype.limit=function(t){if(this.queryCommand.containsKey(o.DroiConstant.DroiQuery_LIMIT))throw"There is LIMIT condition object in command queue.";return this.queryCommand.put(o.DroiConstant.DroiQuery_LIMIT,t),this},t.prototype.offset=function(t){if(this.queryCommand.containsKey(o.DroiConstant.DroiQuery_OFFSET))throw"There is OFFSET condition object in command queue.";return this.queryCommand.put(o.DroiConstant.DroiQuery_OFFSET,t),this},t.prototype.add=function(t,e){return this.queryCommand.put(o.DroiConstant.DroiQuery_ADD,[t,e]),this},t.prototype.set=function(t,e){return this.queryCommand.put(o.DroiConstant.DroiQuery_SET,[t,e]),this},t.prototype.getTableName=function(){return this.queryCommand.getElement(o.DroiConstant.DroiQuery_TABLE_NAME,0)},t.prototype.throwIfTheCommandInvalid=function(){for(var t=0,e=0,r=[o.DroiConstant.DroiQuery_SELECT,o.DroiConstant.DroiQuery_INSERT,o.DroiConstant.DroiQuery_DELETE,o.DroiConstant.DroiQuery_UPDATE,o.DroiConstant.DroiQuery_UPDATE_DATA];e<r.length;e++){var n=r[e];this.queryCommand.containsKey(n)&&(t++,this.queryAction=n)}if(t>1)throw"Your query needs only one of SELECT, DELETE, INSERT or UPDATE";if(0==t&&(this.queryCommand.put(o.DroiConstant.DroiQuery_SELECT,"*"),this.queryAction=o.DroiConstant.DroiQuery_SELECT),this.queryCommand.containsKey(o.DroiConstant.DroiQuery_INSERT)&&(this.queryCommand.containsKey(o.DroiConstant.DroiQuery_OR)||this.queryCommand.containsKey(o.DroiConstant.DroiQuery_AND)||this.queryCommand.containsKey(o.DroiConstant.DroiQuery_WHERE)||this.queryCommand.containsKey(o.DroiConstant.DroiQuery_INC)||this.queryCommand.containsKey(o.DroiConstant.DroiQuery_DEC)||this.queryCommand.containsKey(o.DroiConstant.DroiQuery_SET)||this.queryCommand.containsKey(o.DroiConstant.DroiQuery_ADD)))throw"Insert command cannot combine with OR/AND/WHERE command.";if((this.queryCommand.containsKey(o.DroiConstant.DroiQuery_OR)||this.queryCommand.containsKey(o.DroiConstant.DroiQuery_AND))&&!this.queryCommand.containsKey(o.DroiConstant.DroiQuery_WHERE))throw"Your query should one of WHERE statement for OR/AND statement.";if(this.queryCommand.containsKey(o.DroiConstant.DroiQuery_UPDATE_DATA)&&this.queryCommand.containsKey(o.DroiConstant.DroiQuery_ADD)&&this.queryCommand.containsKey(o.DroiConstant.DroiQuery_SET))throw"Your query must one update statement. (add / set)"},t}();r.DroiQuery=a},{"./droi-cloud-storage-data-provider":35,"./droi-const":39,"./droi-error":41,"./droi-multimap":46}],54:[function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(s,a)}u((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){function r(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}var n,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(r,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(t("./droi-http").DroiHttpResponse);r.DroiHttpSecureResponse=s;var a=function(){function t(){}return t.isEnable=function(){return!1},t.getUId=function(){return Promise.reject("not implemented")},t.sendRequest=function(t){return i(this,void 0,void 0,function(){return o(this,function(t){return[2,Promise.reject("not implemented")]})})},t}();r.DroiHttpSecure=a},{"./droi-http":44}],55:[function(t,e,r){(function(r){t("./jsbn.js"),t("./prng4.js");var n=t("./rng.js"),i=t("./rsa.js");t("./base64.js");var o=t("zlibjs"),s=t("./hmac-md5.js"),a=t("cuint").UINT64,u=t("adler-32"),c=t("./asmcrypto.js");!function(t){function h(){return this instanceof h?this:new h}function l(t){var e=new n.SecureRandom,r=[];r[0]=0;for(var i=t,o=new Uint8Array(i);i>0;)e.nextBytes(r),o[--i]=r[0];return o}function f(t,e){if(128!=e&&256!=e)return null;for(var r,n,i=e>>3,o=i,s=new Uint8Array(i),a=new Uint8Array([82,8,21,4,255,0,1,43]),u=16,h=new Uint8Array(u),l=0,f=(c.SHA1.HASH_SIZE,new Uint8Array(0));o>0||u>0;){l++&&(f=new Uint8Array(n.length)).set(n),null!=a?((r=new Uint8Array(f.length+t.length+a.length)).set(f),r.set(t,f.length),r.set(a,f.length+t.length),f=r):((r=new Uint8Array(f.length+t.length)).set(f),r.set(t,f.length),f=r),n=c.SHA1.bytes(f);for(E=1;E<5;E++)f=n,n=c.SHA1.bytes(f);var p=0;if(o>0){var d=s.length-o;p=Math.min(o,n.length);for(E=0;E<p;E++)s[d+E]=n[E];o-=p}if(p<n.length&&u>0){for(var _=h.length-u,y=Math.min(u,n.length-p),E=p;E<p+y;E++)h[_+E-p]=n[E];u-=y}}return{key:s,iv:h}}var p=new function(){this.isValid=!1,this.timeStamp=a(0),this.offset=a(0),this.setTimeStamp=function(t){this.timeStamp=t;var e=(new Date).getTime();this.offset=this.timeStamp.clone().subtract(a(e)),this.isValid=!0},this.getTimeStampWithOffset=function(){var t=(new Date).getTime();return a(String(t)).add(this.offset)}},d=new function(){this.isVaild=!1,this.ID=a(0),this.aesKey=new Uint8Array(32),this.version=0,this.type=0,this.UID_u=a(0),this.UID_l=a(0),this.toBytes=function(){var t,e=new Uint8Array(y);for(e[0]=this.isVaild?1:0,t=0;t<8;t++)e[1+t]=this.ID.clone().shiftRight(8*t).and(a(255)).toNumber();for(t=0;t<this.aesKey.length;t++)e[9+t]=this.aesKey[t];for(e[41]=255&this.version,e[42]=this.version>>>8&255,e[43]=this.type||255,t=0;t<8;t++)e[44+t]=this.UID_u.clone().shiftRight(8*t).and(a(255)).toNumber();for(t=0;t<8;t++)e[52+t]=this.UID_l.clone().shiftRight(8*t).and(a(255)).toNumber();return e},this.fromBtyes=function(t){if(t.length!=y)throw"error";var e;for(this.isVaild=1==t[0],this.ID=a("0"),e=0;e<8;e++)this.ID=this.ID.or(a().fromBits(t[1+e],0,0,0).shiftLeft(8*e));for(e=0;e<this.aesKey.length;e++)this.aesKey[e]=t[9+e];for(this.version=t[42]<<8|t[41],this.type=t[43],this.UID_u=a("0"),e=0;e<8;e++)this.UID_u=this.UID_u.or(a().fromBits(t[44+e],0,0,0).shiftLeft(8*e));for(this.UID_l=a("0"),e=0;e<8;e++)this.UID_l=this.UID_l.or(a().fromBits(t[52+e],0,0,0).shiftLeft(8*e))},this.fromServerBtyes=function(t){if(t.length!=E)return!1;var e;for(this.ID=a(t[0]|t[1]<<8,t[2]|t[3]<<8,t[4]|t[5]<<8,t[6]|t[7]<<8),e=0;e<this.aesKey.length;e++)this.aesKey[e]=t[8+e];return this.version=t[41]<<8|t[40],this.type=t[42],this.UID_u=a(t[43]|t[44]<<8,t[45]|t[46]<<8,t[47]|t[48]<<8,t[49]|t[50]<<8),this.UID_l=a(t[51]|t[52]<<8,t[53]|t[54]<<8,t[55]|t[56]<<8,t[57]|t[58]<<8),this.isVaild=!0,!0}},_="00d69d454c9c64fdd87be760c0cf7bc4750ccdd91f5525f50789f91d35bd114d0a480bf9e3c85f15fe0273ff50609254fb58bd680a9ad77b205eb257a558a222774a1934ace69f2fcaa5cff4d2f49c6bf5f4b0cfcd40eb63d8f0ca6a0decffdbc4b2347152903ad084a98a748d8dee8fe9a2a9353cf6135d6df2771942742e472ff358822481f64e4594020f6d9c557565615fdf8e66b280ac6053810718e0d6afca62455981b215c62a23defd471f8800a9f1229822873e2928e2bc7bb7ea794b868a6e7221bdd60b275da0a6c09cc765f0d4e26e16322413d50e7cf3ebf3404995d5f7b2c80cb2fdc2358a05bb0bbc3f12d42e545b227a63385a347c069a1037",y=60,E=59;h.prototype.getVersion=function(){return 2},h.prototype.setEncType=function(t){if("number"!=typeof t||1!=t)throw"error";d.type=t},h.prototype.setFakeKlKeyUID_u_UID_l=function(t,e){if("string"!=typeof t||"string"!=typeof e)throw"error";d.aesKey=l(d.aesKey.length),d.UID_u=a(t),d.UID_l=a(e),d.isVaild=!0,d.type=1},h.prototype.setKlKeyInvalid=function(){d.isVaild=!1},h.prototype.getKlKeyIsValid=function(){return d.isVaild},h.prototype.getKlKeyID=function(){return a(d.ID)},h.prototype.getKlKeyVersion=function(){return d.version},h.prototype.getKlKeyType=function(){return d.type},h.prototype.getKlKeyUID_u=function(){return d.UID_u.clone()},h.prototype.getKlKeyUID_l=function(){return d.UID_l.clone()},h.prototype.setKlKeyUID_u=function(t){d.UID_u=a(t)},h.prototype.setKlKeyUID_l=function(t){d.UID_l=a(t)},h.prototype.klKeyAlloc=function(t){if(t<=0)throw"error";var e,r,n,i=c.hex_to_bytes(_),o=new Uint8Array(i.length),s=(new Uint8Array(76),new Array(4)),a=new Array(4),u=0;for(n=t.length,e=0;e<4&&u<n;e++)s[e]=t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],u+=4+s[e];if(u!=n)throw"error";if(s[0]!=i.length)throw"error";if(4!=s[2])throw"error";for(u=0,e=0;e<4;e++){for(n=s[e],a[e]=new Uint8Array(n),u+=4,r=0;r<n;r++)a[e][r]=t[u+r];u+=n}for(e=0;e<o.length;e++)o[e]=a[0][e]^i[e];var h=this.adler32Byte(a[1]),l=a[2];if(h!=(l[3]<<24|l[2]<<16|l[1]<<8|l[0]))throw"error";var f=this.aesDecrypt(a[1],o);if(f.length!=y+16)throw"error";var p=this.hmacMd5Hex(c.bytes_to_hex(c.string_to_bytes("")),c.bytes_to_hex(a[0]));for(e=0;e<16;e++){var E=p.words[e>>>2]>>>e%4*8&255;if(f[y+e]!=E)throw"error"}d.fromBtyes(f.subarray(0,y))},h.prototype.klKeyGet=function(){var t,e=c.hex_to_bytes(_),r=l(e.length),n=new Uint8Array(e.length),i=new Uint8Array(y+16);for(t=0;t<n.length;t++)n[t]=r[t]^e[t];var o=d.toBytes();for(t=0;t<y;t++)i[t]=o[t];var s=this.hmacMd5Hex(c.bytes_to_hex(c.string_to_bytes("")),c.bytes_to_hex(r));for(t=0;t<16;t++){var a=s.words[t>>>2]>>>t%4*8&255;i[y+t]=a}var u,h,f=this.aesEncrypt(i,n),p=this.adler32Byte(f),E=new Uint8Array([255&p,p>>>8&255,p>>>16&255,p>>>24&255]),v=new Uint8Array([0]),g=new Uint8Array(16+r.length+f.length+E.length+v.length),S=0,D=new Array(r,f,E,v);for(t=0;t<4&&S<g.length;t++){for(h=D[t].length,g[S]=255&h,g[S+1]=h>>>8&255,g[S+2]=h>>>16&255,g[S+3]=h>>>24&255,u=0;u<h;u++)g[S+4+u]=D[t][u];S+=4+h}if(S!=g.length)throw"error";return g},h.prototype.klKeyFree=function(){d.fromBtyes(new Uint8Array(y))},h.prototype.aesEncryptMemSize=function(t){if("number"!=typeof t||t<0)throw"error";return t-t%16+16},h.prototype.aesEncrypt=function(t,e){var r=f(e=e||d.aesKey,128);return c.AES_CBC.encrypt(t,r.key,!0,r.iv)},h.prototype.aesDecrypt=function(t,e){var r=f(e=e||d.aesKey,128);return c.AES_CBC.decrypt(t,r.key,!0,r.iv)},h.prototype.adler32=function(t){return u.str(t)},h.prototype.adler32Byte=function(t){return u.buf(t)},h.prototype.hmacMd5=function(t,e){return s.HmacMD5(e,t)},h.prototype.hmacMd5Hex=function(t,e){return s.HmacMD5(s.enc_Hex_parse(e),s.enc_Hex_parse(t))},h.prototype.rsaKeyVersion=2,h.prototype.rsaPlaintextMaxSize=245,h.prototype.rsaCiphertextSize=256,h.prototype.rsaEncrypt=function(t){var e=new i.RSAKey;return e.setPublic(_,"10001"),e.encrypt(t,!1)},h.prototype.rsaEncryptTEST=function(t){var e=new i.RSAKey;return e.setPublic(_,"10001"),e.encrypt(t,!0)},h.prototype.rsaEncryptByte=function(t){var e=new i.RSAKey;return e.setPublic(_,"10001"),c.hex_to_bytes(e.encryptByte(t,!1))},h.prototype.rsaEncryptByteTEST=function(t){var e=new i.RSAKey;return e.setPublic(_,"10001"),c.hex_to_bytes(e.encryptByte(t,!0))},h.prototype.genKeyValidationNonce=function(t){if(!d.isVaild)throw"error";var e,r=new Uint8Array(16);for(e=7;e>-1;e--)r[e]=d.ID.clone().shiftRight(8*e).and(a(255)).toNumber();for(e=0;e<4;e++)r[8+e]=t>>>8*e&255;r.fill(0,12);var n=this.aesEncrypt(r,d.aesKey),i=this.rsaEncryptByte(r),o=new Uint8Array(n.length+i.length);return o.set(n),o.set(i,n.length),o},h.prototype.chkKeyValidationCorrectNonce=function(t,e){var r=this.aesDecrypt(e,d.aesKey);if(4!=r.length)return!1;return(r[3]<<24|r[2]<<16|r[1]<<8|r[0])==t+1},h.prototype.chkKeyValidationFailedNonce=function(t,e,r){var n=4294967295&(t+1&4294967295^e),i=new Uint8Array([255&n,n>>8&255,n>>16&255,n>>24&255]);try{var o=this.aesDecrypt(r,i)}catch(t){return!1}if(68!=o.length)return!1;return!((o[63]<<24|o[62]<<16|o[61]<<8|o[60])!=t&4294967295)&&!!d.fromServerBtyes(o.subarray(0,E))},h.prototype.addTimeStampToData=function(t,e){var n=new Uint8Array(16+e.length);return n.set(r.from(t,"utf8"),0),n.set(e,16),n},h.prototype.compress=function(t){return new o.gzipSync(t)},h.prototype.decompress=function(t){return new o.gunzipSync(t)},h.prototype.compressDeflater=function(t){return new o.deflateSync(t)},h.prototype.decompressInflater=function(t){return new o.inflateSync(t)},h.prototype.setTimeStampValid=function(t){if("boolean"!=typeof t)throw"error";p.isValid=t},h.prototype.timeStampIsValid=function(){return p.isValid},h.prototype.decryptTimeStamp=function(t){if("string"!=typeof t)throw"error";var e=this.base64_to_bytes(t),r=this.aesDecrypt(e,d.aesKey);if(15!=r.length)throw"error";return a(r[0]|r[1]<<8,r[2]|r[3]<<8,r[4]|r[5]<<8,r[6]|r[7]<<8)},h.prototype.setTimeStampHeader=function(t){var e=this.decryptTimeStamp(t);p.setTimeStamp(e)},h.prototype.getTimeStampHeader=function(){for(var t=l(15),e=(p.getTimeStampWithOffset,0);e<8;e++)t[e]=d.ID.clone().shiftRight(8*e).and(a(255)).toNumber();var r=this.aesEncrypt(t,d.aesKey);return c.bytes_to_base64(r)},h.prototype.string_to_bytes=function(t){return c.string_to_bytes(t)},h.prototype.hex_to_bytes=function(t){return c.hex_to_bytes(t)},h.prototype.base64_to_bytes=function(t){return c.base64_to_bytes(t)},h.prototype.bytes_to_string=function(t){return c.bytes_to_string(t)},h.prototype.bytes_to_hex=function(t){return c.bytes_to_hex(t)},h.prototype.bytes_to_base64=function(t){return c.bytes_to_base64(t)},h.prototype.selfTesting=function(){if("29a10fbff249093e056ec5aaa71d885a1c2195b479cb4baf4be64b6b6c438a44ee5ddcae690f781ccda2c3a9bced4200750c39779f09a20ec99530d4082ace6430569fbd8198ee10eb348f1c8ef459ebd5990b9d01c148550a21f7eab2b769bb647c8c9ba31da601958a88568dbb5f4efe430918b3ff7fdf40f7a839ea4c0624117201e1fd79a35ab1008fd4bd9251b7fb6c99dbca821d73d5f4c47f211540a7fc03148e41e98a9a146c2d629c76158aee241c409101b339237cd5a3d7492d779015172962eaab7e5f0cdab0d058dc79f467b4b523ff2a1c0a1d440017970a7e777e7d21f7e7f36c5548257d4471cbcde36d48038512ba8979bf57e2a5f1cf66"!==this.rsaEncryptTEST("test"))return!1;var t=this.aesEncrypt(this.string_to_bytes("test"),this.string_to_bytes("12345"));return"71d3aab73b84f116944e5462347622bf"===this.bytes_to_hex(t)&&("74657374"===this.bytes_to_hex(this.aesDecrypt(t,this.string_to_bytes("12345")))&&(73204161===this.adler32("test")&&"fe8697f742d080405d1270e6163316f9"===this.hmacMd5("12345","test").toString()))},void 0!==e&&e.exports?e.exports=h:t.TUTIL=h}(this)}).call(this,t("buffer").Buffer)},{"./asmcrypto.js":56,"./base64.js":57,"./hmac-md5.js":58,"./jsbn.js":60,"./prng4.js":61,"./rng.js":62,"./rsa.js":63,"adler-32":2,buffer:4,cuint:8,zlibjs:33}],56:[function(t,e,r){(function(t){!function(t,r){function n(){var t=Error.apply(this,arguments);this.message=t.message,this.stack=t.stack}function i(){var t=Error.apply(this,arguments);this.message=t.message,this.stack=t.stack}function o(){var t=Error.apply(this,arguments);this.message=t.message,this.stack=t.stack}function s(t,e){e=!!e;for(var r=t.length,n=new Uint8Array(e?4*r:r),i=0,o=0;i<r;i++){var s=t.charCodeAt(i);if(e&&55296<=s&&s<=56319){if(++i>=r)throw new Error("Malformed string, low surrogate expected at position "+i);s=(55296^s)<<10|65536|56320^t.charCodeAt(i)}else if(!e&&s>>>8)throw new Error("Wide characters are not allowed.");!e||s<=127?n[o++]=s:s<=2047?(n[o++]=192|s>>6,n[o++]=128|63&s):s<=65535?(n[o++]=224|s>>12,n[o++]=128|s>>6&63,n[o++]=128|63&s):(n[o++]=240|s>>18,n[o++]=128|s>>12&63,n[o++]=128|s>>6&63,n[o++]=128|63&s)}return n.subarray(0,o)}function a(t,e){e=!!e;for(var r=t.length,n=new Array(r),i=0,o=0;i<r;i++){var s=t[i];if(!e||s<128)n[o++]=s;else if(s>=192&&s<224&&i+1<r)n[o++]=(31&s)<<6|63&t[++i];else if(s>=224&&s<240&&i+2<r)n[o++]=(15&s)<<12|(63&t[++i])<<6|63&t[++i];else{if(!(s>=240&&s<248&&i+3<r))throw new Error("Malformed UTF8 character at byte offset "+i);var a=(7&s)<<18|(63&t[++i])<<12|(63&t[++i])<<6|63&t[++i];a<=65535?n[o++]=a:(a^=65536,n[o++]=55296|a>>10,n[o++]=56320|1023&a)}}for(var u="",i=0;i<o;i+=16384)u+=String.fromCharCode.apply(String,n.slice(i,i+16384<=o?i+16384:o));return u}function u(t){for(var e="",r=0;r<t.length;r++){var n=(255&t[r]).toString(16);n.length<2&&(e+="0"),e+=n}return e}function c(t){return btoa(a(t))}function h(t){return"string"==typeof t}function l(t){return t instanceof ArrayBuffer}function f(t){return t instanceof Uint8Array}function p(t,e){var r=e.heap,n=r?r.byteLength:e.heapSize||65536;if(4095&n||n<=0)throw new Error("heap size must be a positive integer and a multiple of 4096");return r=r||new t(new ArrayBuffer(n))}function d(t,e,r,n,i){var o=t.length-e,s=o<i?o:i;return t.set(r.subarray(n,n+s),e),s}function _(t){return t=t||{},this.result=null,this.pos=0,this.len=0,function(t){if(void 0!==t){if(l(t)||f(t))t=new Uint8Array(t);else{if(!h(t))throw new TypeError("unexpected key type");t=s(t)}var e=t.length;if(16!==e&&24!==e&&32!==e)throw new i("illegal key size");var r=new DataView(t.buffer,t.byteOffset,t.byteLength);this.asm.set_key(e>>2,r.getUint32(0),r.getUint32(4),r.getUint32(8),r.getUint32(12),e>16?r.getUint32(16):0,e>16?r.getUint32(20):0,e>24?r.getUint32(24):0,e>24?r.getUint32(28):0),this.key=t}else if(!this.key)throw new Error("key is required")}.call(this,t.key),this.hasOwnProperty("iv")&&function(t){if(void 0!==t){if(l(t)||f(t))t=new Uint8Array(t);else{if(!h(t))throw new TypeError("unexpected iv type");t=s(t)}if(16!==t.length)throw new i("illegal iv size");var e=new DataView(t.buffer,t.byteOffset,t.byteLength);this.iv=t,this.asm.set_iv(e.getUint32(0),e.getUint32(4),e.getUint32(8),e.getUint32(12))}else this.iv=null,this.asm.set_iv(0,0,0,0)}.call(this,t.iv),this.hasOwnProperty("padding")&&function(t){this.padding=void 0===t||!!t}.call(this,t.padding),this}function y(t){if(h(t)&&(t=s(t)),l(t)&&(t=new Uint8Array(t)),!f(t))throw new TypeError("data isn't of expected type");for(var e=this.asm,r=this.heap,n=w.ENC[this.mode],i=w.HEAP_DATA,o=this.pos,a=this.len,u=0,c=t.length||0,p=0,_=a+c&-16,y=0,E=new Uint8Array(_);c>0;)a+=y=d(r,o+a,t,u,c),u+=y,c-=y,(y=e.cipher(n,i+o,a))&&E.set(r.subarray(o,o+y),p),p+=y,y<a?(o+=y,a-=y):(o=0,a=0);return this.result=E,this.pos=o,this.len=a,this}function E(t){var e=null,r=0;void 0!==t&&(r=(e=y.call(this,t).result).length);var n=this.asm,o=this.heap,s=w.ENC[this.mode],a=w.HEAP_DATA,u=this.pos,c=this.len,h=16-c%16,l=c;if(this.hasOwnProperty("padding")){if(this.padding){for(var f=0;f<h;++f)o[u+c+f]=h;l=c+=h}else if(c%16)throw new i("data length must be a multiple of the block size")}else c+=h;var p=new Uint8Array(r+l);return r&&p.set(e),c&&n.cipher(s,a+u,c),l&&p.set(o.subarray(u,u+l),r),this.result=p,this.pos=0,this.len=0,this}function v(t){if(h(t)&&(t=s(t)),l(t)&&(t=new Uint8Array(t)),!f(t))throw new TypeError("data isn't of expected type");var e=this.asm,r=this.heap,n=w.DEC[this.mode],i=w.HEAP_DATA,o=this.pos,a=this.len,u=0,c=t.length||0,p=0,_=a+c&-16,y=0,E=0;this.hasOwnProperty("padding")&&this.padding&&(_-=y=a+c-_||16);for(var v=new Uint8Array(_);c>0;)a+=E=d(r,o+a,t,u,c),u+=E,c-=E,(E=e.cipher(n,i+o,a-(c?0:y)))&&v.set(r.subarray(o,o+E),p),p+=E,E<a?(o+=E,a-=E):(o=0,a=0);return this.result=v,this.pos=o,this.len=a,this}function g(t){var e=null,r=0;void 0!==t&&(r=(e=v.call(this,t).result).length);var n=this.asm,s=this.heap,a=w.DEC[this.mode],u=w.HEAP_DATA,c=this.pos,h=this.len,l=h;if(h>0){if(h%16){if(this.hasOwnProperty("padding"))throw new i("data length must be a multiple of the block size");h+=16-h%16}if(n.cipher(a,u+c,h),this.hasOwnProperty("padding")&&this.padding){var f=s[c+l-1];if(f<1||f>16||f>l)throw new o("bad padding");for(var p=0,d=f;d>1;d--)p|=f^s[c+l-d];if(p)throw new o("bad padding");l-=f}}var _=new Uint8Array(r+l);return r>0&&_.set(e),l>0&&_.set(s.subarray(c,c+l),r),this.result=_,this.pos=0,this.len=0,this}function S(t){this.padding=!0,this.iv=null,function(t){t=t||{},this.heap=p(Uint8Array,t).subarray(w.HEAP_DATA),this.asm=t.asm||w(r,null,this.heap.buffer),this.mode=null,this.key=null,this.reset(t)}.call(this,t),this.mode="CBC"}function D(t){S.call(this,t)}function T(t){S.call(this,t)}function m(t){t=t||{},this.heap=p(Uint8Array,t),this.asm=t.asm||function(t,e,r){"use asm";var n=0,i=0,o=0,s=0,a=0,u=0,c=0,h=0,l=0,f=0,p=0,d=0,_=0,y=0,E=0,v=0,g=0,S=new t.Uint8Array(r);function D(t,e,r,u,c,h,l,f,p,d,_,y,E,v,g,S){t=t|0;e=e|0;r=r|0;u=u|0;c=c|0;h=h|0;l=l|0;f=f|0;p=p|0;d=d|0;_=_|0;y=y|0;E=E|0;v=v|0;g=g|0;S=S|0;var D=0,T=0,m=0,b=0,R=0,w=0,O=0,I=0,A=0,C=0,P=0,U=0,N=0,x=0,H=0,L=0,M=0,k=0,j=0,K=0,B=0,Y=0,F=0,q=0,V=0,G=0,Q=0,J=0,z=0,W=0,X=0,Z=0,$=0,tt=0,et=0,rt=0,nt=0,it=0,ot=0,st=0,at=0,ut=0,ct=0,ht=0,lt=0,ft=0,pt=0,dt=0,_t=0,yt=0,Et=0,vt=0,gt=0,St=0,Dt=0,Tt=0,mt=0,bt=0,Rt=0,wt=0,Ot=0,It=0,At=0,Ct=0,Pt=0,Ut=0,Nt=0,xt=0,Ht=0,Lt=0,Mt=0;D=n;T=i;m=o;b=s;R=a;O=t+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;O=e+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;O=r+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;O=u+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;O=c+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;O=h+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;O=l+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;O=f+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;O=p+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;O=d+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;O=_+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;O=y+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;O=E+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;O=v+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;O=g+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;O=S+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=v^p^r^t;I=w<<1|w>>>31;O=I+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=g^d^u^e;A=w<<1|w>>>31;O=A+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=S^_^c^r;C=w<<1|w>>>31;O=C+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=I^y^h^u;P=w<<1|w>>>31;O=P+(D<<5|D>>>27)+R+(T&m|~T&b)+0x5a827999|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=A^E^l^c;U=w<<1|w>>>31;O=U+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=C^v^f^h;N=w<<1|w>>>31;O=N+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=P^g^p^l;x=w<<1|w>>>31;O=x+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=U^S^d^f;H=w<<1|w>>>31;O=H+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=N^I^_^p;L=w<<1|w>>>31;O=L+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=x^A^y^d;M=w<<1|w>>>31;O=M+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=H^C^E^_;k=w<<1|w>>>31;O=k+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=L^P^v^y;j=w<<1|w>>>31;O=j+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=M^U^g^E;K=w<<1|w>>>31;O=K+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=k^N^S^v;B=w<<1|w>>>31;O=B+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=j^x^I^g;Y=w<<1|w>>>31;O=Y+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=K^H^A^S;F=w<<1|w>>>31;O=F+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=B^L^C^I;q=w<<1|w>>>31;O=q+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=Y^M^P^A;V=w<<1|w>>>31;O=V+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=F^k^U^C;G=w<<1|w>>>31;O=G+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=q^j^N^P;Q=w<<1|w>>>31;O=Q+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=V^K^x^U;J=w<<1|w>>>31;O=J+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=G^B^H^N;z=w<<1|w>>>31;O=z+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=Q^Y^L^x;W=w<<1|w>>>31;O=W+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=J^F^M^H;X=w<<1|w>>>31;O=X+(D<<5|D>>>27)+R+(T^m^b)+0x6ed9eba1|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=z^q^k^L;Z=w<<1|w>>>31;O=Z+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=W^V^j^M;$=w<<1|w>>>31;O=$+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=X^G^K^k;tt=w<<1|w>>>31;O=tt+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=Z^Q^B^j;et=w<<1|w>>>31;O=et+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=$^J^Y^K;rt=w<<1|w>>>31;O=rt+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=tt^z^F^B;nt=w<<1|w>>>31;O=nt+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=et^W^q^Y;it=w<<1|w>>>31;O=it+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=rt^X^V^F;ot=w<<1|w>>>31;O=ot+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=nt^Z^G^q;st=w<<1|w>>>31;O=st+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=it^$^Q^V;at=w<<1|w>>>31;O=at+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=ot^tt^J^G;ut=w<<1|w>>>31;O=ut+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=st^et^z^Q;ct=w<<1|w>>>31;O=ct+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=at^rt^W^J;ht=w<<1|w>>>31;O=ht+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=ut^nt^X^z;lt=w<<1|w>>>31;O=lt+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=ct^it^Z^W;ft=w<<1|w>>>31;O=ft+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=ht^ot^$^X;pt=w<<1|w>>>31;O=pt+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=lt^st^tt^Z;dt=w<<1|w>>>31;O=dt+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=ft^at^et^$;_t=w<<1|w>>>31;O=_t+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=pt^ut^rt^tt;yt=w<<1|w>>>31;O=yt+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=dt^ct^nt^et;Et=w<<1|w>>>31;O=Et+(D<<5|D>>>27)+R+(T&m|T&b|m&b)-0x70e44324|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=_t^ht^it^rt;vt=w<<1|w>>>31;O=vt+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=yt^lt^ot^nt;gt=w<<1|w>>>31;O=gt+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=Et^ft^st^it;St=w<<1|w>>>31;O=St+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=vt^pt^at^ot;Dt=w<<1|w>>>31;O=Dt+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=gt^dt^ut^st;Tt=w<<1|w>>>31;O=Tt+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=St^_t^ct^at;mt=w<<1|w>>>31;O=mt+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=Dt^yt^ht^ut;bt=w<<1|w>>>31;O=bt+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=Tt^Et^lt^ct;Rt=w<<1|w>>>31;O=Rt+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=mt^vt^ft^ht;wt=w<<1|w>>>31;O=wt+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=bt^gt^pt^lt;Ot=w<<1|w>>>31;O=Ot+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=Rt^St^dt^ft;It=w<<1|w>>>31;O=It+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=wt^Dt^_t^pt;At=w<<1|w>>>31;O=At+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=Ot^Tt^yt^dt;Ct=w<<1|w>>>31;O=Ct+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=It^mt^Et^_t;Pt=w<<1|w>>>31;O=Pt+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=At^bt^vt^yt;Ut=w<<1|w>>>31;O=Ut+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=Ct^Rt^gt^Et;Nt=w<<1|w>>>31;O=Nt+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=Pt^wt^St^vt;xt=w<<1|w>>>31;O=xt+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=Ut^Ot^Dt^gt;Ht=w<<1|w>>>31;O=Ht+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=Nt^It^Tt^St;Lt=w<<1|w>>>31;O=Lt+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;w=xt^At^mt^Dt;Mt=w<<1|w>>>31;O=Mt+(D<<5|D>>>27)+R+(T^m^b)-0x359d3e2a|0;R=b;b=m;m=T<<30|T>>>2;T=D;D=O;n=n+D|0;i=i+T|0;o=o+m|0;s=s+b|0;a=a+R|0}function T(t){t=t|0;D(S[t|0]<<24|S[t|1]<<16|S[t|2]<<8|S[t|3],S[t|4]<<24|S[t|5]<<16|S[t|6]<<8|S[t|7],S[t|8]<<24|S[t|9]<<16|S[t|10]<<8|S[t|11],S[t|12]<<24|S[t|13]<<16|S[t|14]<<8|S[t|15],S[t|16]<<24|S[t|17]<<16|S[t|18]<<8|S[t|19],S[t|20]<<24|S[t|21]<<16|S[t|22]<<8|S[t|23],S[t|24]<<24|S[t|25]<<16|S[t|26]<<8|S[t|27],S[t|28]<<24|S[t|29]<<16|S[t|30]<<8|S[t|31],S[t|32]<<24|S[t|33]<<16|S[t|34]<<8|S[t|35],S[t|36]<<24|S[t|37]<<16|S[t|38]<<8|S[t|39],S[t|40]<<24|S[t|41]<<16|S[t|42]<<8|S[t|43],S[t|44]<<24|S[t|45]<<16|S[t|46]<<8|S[t|47],S[t|48]<<24|S[t|49]<<16|S[t|50]<<8|S[t|51],S[t|52]<<24|S[t|53]<<16|S[t|54]<<8|S[t|55],S[t|56]<<24|S[t|57]<<16|S[t|58]<<8|S[t|59],S[t|60]<<24|S[t|61]<<16|S[t|62]<<8|S[t|63])}function m(t){t=t|0;S[t|0]=n>>>24;S[t|1]=n>>>16&255;S[t|2]=n>>>8&255;S[t|3]=n&255;S[t|4]=i>>>24;S[t|5]=i>>>16&255;S[t|6]=i>>>8&255;S[t|7]=i&255;S[t|8]=o>>>24;S[t|9]=o>>>16&255;S[t|10]=o>>>8&255;S[t|11]=o&255;S[t|12]=s>>>24;S[t|13]=s>>>16&255;S[t|14]=s>>>8&255;S[t|15]=s&255;S[t|16]=a>>>24;S[t|17]=a>>>16&255;S[t|18]=a>>>8&255;S[t|19]=a&255}function b(){n=0x67452301;i=0xefcdab89;o=0x98badcfe;s=0x10325476;a=0xc3d2e1f0;u=c=0}function R(t,e,r,h,l,f,p){t=t|0;e=e|0;r=r|0;h=h|0;l=l|0;f=f|0;p=p|0;n=t;i=e;o=r;s=h;a=l;u=f;c=p}function w(t,e){t=t|0;e=e|0;var r=0;if(t&63)return-1;while((e|0)>=64){T(t);t=t+64|0;e=e-64|0;r=r+64|0}u=u+r|0;if(u>>>0<r>>>0)c=c+1|0;return r|0}function O(t,e,r){t=t|0;e=e|0;r=r|0;var n=0,i=0;if(t&63)return-1;if(~r)if(r&31)return-1;if((e|0)>=64){n=w(t,e)|0;if((n|0)==-1)return-1;t=t+n|0;e=e-n|0}n=n+e|0;u=u+e|0;if(u>>>0<e>>>0)c=c+1|0;S[t|e]=0x80;if((e|0)>=56){for(i=e+1|0;(i|0)<64;i=i+1|0)S[t|i]=0x00;T(t);e=0;S[t|0]=0}for(i=e+1|0;(i|0)<59;i=i+1|0)S[t|i]=0;S[t|56]=c>>>21&255;S[t|57]=c>>>13&255;S[t|58]=c>>>5&255;S[t|59]=c<<3&255|u>>>29;S[t|60]=u>>>21&255;S[t|61]=u>>>13&255;S[t|62]=u>>>5&255;S[t|63]=u<<3&255;T(t);if(~r)m(r);return n|0}function I(){n=h;i=l;o=f;s=p;a=d;u=64;c=0}function A(){n=_;i=y;o=E;s=v;a=g;u=64;c=0}function C(t,e,r,S,T,m,R,w,O,I,A,C,P,U,N,x){t=t|0;e=e|0;r=r|0;S=S|0;T=T|0;m=m|0;R=R|0;w=w|0;O=O|0;I=I|0;A=A|0;C=C|0;P=P|0;U=U|0;N=N|0;x=x|0;b();D(t^0x5c5c5c5c,e^0x5c5c5c5c,r^0x5c5c5c5c,S^0x5c5c5c5c,T^0x5c5c5c5c,m^0x5c5c5c5c,R^0x5c5c5c5c,w^0x5c5c5c5c,O^0x5c5c5c5c,I^0x5c5c5c5c,A^0x5c5c5c5c,C^0x5c5c5c5c,P^0x5c5c5c5c,U^0x5c5c5c5c,N^0x5c5c5c5c,x^0x5c5c5c5c);_=n;y=i;E=o;v=s;g=a;b();D(t^0x36363636,e^0x36363636,r^0x36363636,S^0x36363636,T^0x36363636,m^0x36363636,R^0x36363636,w^0x36363636,O^0x36363636,I^0x36363636,A^0x36363636,C^0x36363636,P^0x36363636,U^0x36363636,N^0x36363636,x^0x36363636);h=n;l=i;f=o;p=s;d=a;u=64;c=0}function P(t,e,r){t=t|0;e=e|0;r=r|0;var u=0,c=0,h=0,l=0,f=0,p=0;if(t&63)return-1;if(~r)if(r&31)return-1;p=O(t,e,-1)|0;u=n,c=i,h=o,l=s,f=a;A();D(u,c,h,l,f,0x80000000,0,0,0,0,0,0,0,0,0,672);if(~r)m(r);return p|0}function U(t,e,r,u,c){t=t|0;e=e|0;r=r|0;u=u|0;c=c|0;var h=0,l=0,f=0,p=0,d=0,_=0,y=0,E=0,v=0,g=0;if(t&63)return-1;if(~c)if(c&31)return-1;S[t+e|0]=r>>>24;S[t+e+1|0]=r>>>16&255;S[t+e+2|0]=r>>>8&255;S[t+e+3|0]=r&255;P(t,e+4|0,-1)|0;h=_=n,l=y=i,f=E=o,p=v=s,d=g=a;u=u-1|0;while((u|0)>0){I();D(_,y,E,v,g,0x80000000,0,0,0,0,0,0,0,0,0,672);_=n,y=i,E=o,v=s,g=a;A();D(_,y,E,v,g,0x80000000,0,0,0,0,0,0,0,0,0,672);_=n,y=i,E=o,v=s,g=a;h=h^n;l=l^i;f=f^o;p=p^s;d=d^a;u=u-1|0}n=h;i=l;o=f;s=p;a=d;if(~c)m(c);return 0}return{reset:b,init:R,process:w,finish:O,hmac_reset:I,hmac_init:C,hmac_finish:P,pbkdf2_generate_block:U}}({Uint8Array:Uint8Array},null,this.heap.buffer),this.BLOCK_SIZE=U,this.HASH_SIZE=N,this.reset()}function b(t){if(void 0===t)throw new SyntaxError("data required");return(null===H&&(H=new m({heapSize:1048576})),H).reset().process(t).finish().result}n.prototype=Object.create(Error.prototype,{name:{value:"IllegalStateError"}}),i.prototype=Object.create(Error.prototype,{name:{value:"IllegalArgumentError"}}),o.prototype=Object.create(Error.prototype,{name:{value:"SecurityError"}});r.Float64Array||r.Float32Array;var R=r.console;void 0===r.location||!r.location.protocol.search(/https:|file:|chrome:|chrome-extension:|moz-extension:/)||void 0===R||R.warn("asmCrypto seems to be load from an insecure origin; this may cause to MitM-attack vulnerability. Consider using secure transport protocol."),t.string_to_bytes=s,t.hex_to_bytes=function(t){var e=t.length;1&e&&(t="0"+t,e++);for(var r=new Uint8Array(e>>1),n=0;n<e;n+=2)r[n>>1]=parseInt(t.substr(n,2),16);return r},t.base64_to_bytes=function(t){return s(atob(t))},t.bytes_to_string=a,t.bytes_to_hex=u,t.bytes_to_base64=c,r.IllegalStateError=n,r.IllegalArgumentError=i,r.SecurityError=o;var w=function(){"use strict";function t(t,e){var i=r[(n[t]+n[e])%255];return 0!==t&&0!==e||(i=0),i}function e(){function e(t){var e,i,o;for(i=o=function(t){var e=r[255-n[t]];return 0===t&&(e=0),e}(t),e=0;e<4;e++)o^=i=255&(i<<1|i>>>7);return o^=99}u||function(){r=[],n=[];var t,e,i=1;for(t=0;t<255;t++)r[t]=i,e=128&i,i<<=1,i&=255,128===e&&(i^=27),i^=r[t],n[r[t]]=t;r[255]=r[0],n[0]=0,u=!0}(),i=[],o=[],s=[[],[],[],[]],a=[[],[],[],[]];for(var c=0;c<256;c++){var h=e(c);i[c]=h,o[h]=c,s[0][c]=t(2,h)<<24|h<<16|h<<8|t(3,h),a[0][h]=t(14,c)<<24|t(9,c)<<16|t(13,c)<<8|t(11,c);for(var l=1;l<4;l++)s[l][c]=s[l-1][c]>>>8|s[l-1][c]<<24,a[l][h]=a[l-1][h]>>>8|a[l-1][h]<<24}}var r,n,i,o,s,a,u=!1,c=function(t,r,n){e();var u=new Uint32Array(n);u.set(i,512),u.set(o,768);for(var c=0;c<4;c++)u.set(s[c],4096+1024*c>>2),u.set(a[c],8192+1024*c>>2);var h=function(t,e,r){"use asm";var n=0,i=0,o=0,s=0,a=0,u=0,c=0,h=0,l=0,f=0,p=0,d=0,_=0,y=0,E=0,v=0,g=0,S=0,D=0,T=0,m=0;var b=new t.Uint32Array(r),R=new t.Uint8Array(r);function w(t,e,r,a,u,c,h,l){t=t|0;e=e|0;r=r|0;a=a|0;u=u|0;c=c|0;h=h|0;l=l|0;var f=0,p=0,d=0,_=0,y=0,E=0,v=0,g=0;f=r|0x400,p=r|0x800,d=r|0xc00;u=u^b[(t|0)>>2],c=c^b[(t|4)>>2],h=h^b[(t|8)>>2],l=l^b[(t|12)>>2];for(g=16;(g|0)<=a<<4;g=g+16|0){_=b[(r|u>>22&1020)>>2]^b[(f|c>>14&1020)>>2]^b[(p|h>>6&1020)>>2]^b[(d|l<<2&1020)>>2]^b[(t|g|0)>>2],y=b[(r|c>>22&1020)>>2]^b[(f|h>>14&1020)>>2]^b[(p|l>>6&1020)>>2]^b[(d|u<<2&1020)>>2]^b[(t|g|4)>>2],E=b[(r|h>>22&1020)>>2]^b[(f|l>>14&1020)>>2]^b[(p|u>>6&1020)>>2]^b[(d|c<<2&1020)>>2]^b[(t|g|8)>>2],v=b[(r|l>>22&1020)>>2]^b[(f|u>>14&1020)>>2]^b[(p|c>>6&1020)>>2]^b[(d|h<<2&1020)>>2]^b[(t|g|12)>>2];u=_,c=y,h=E,l=v}n=b[(e|u>>22&1020)>>2]<<24^b[(e|c>>14&1020)>>2]<<16^b[(e|h>>6&1020)>>2]<<8^b[(e|l<<2&1020)>>2]^b[(t|g|0)>>2],i=b[(e|c>>22&1020)>>2]<<24^b[(e|h>>14&1020)>>2]<<16^b[(e|l>>6&1020)>>2]<<8^b[(e|u<<2&1020)>>2]^b[(t|g|4)>>2],o=b[(e|h>>22&1020)>>2]<<24^b[(e|l>>14&1020)>>2]<<16^b[(e|u>>6&1020)>>2]<<8^b[(e|c<<2&1020)>>2]^b[(t|g|8)>>2],s=b[(e|l>>22&1020)>>2]<<24^b[(e|u>>14&1020)>>2]<<16^b[(e|c>>6&1020)>>2]<<8^b[(e|h<<2&1020)>>2]^b[(t|g|12)>>2]}function O(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;w(0x0000,0x0800,0x1000,m,t,e,r,n)}function I(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;var o=0;w(0x0400,0x0c00,0x2000,m,t,n,r,e);o=i,i=s,s=o}function A(t,e,r,l){t=t|0;e=e|0;r=r|0;l=l|0;w(0x0000,0x0800,0x1000,m,a^t,u^e,c^r,h^l);a=n,u=i,c=o,h=s}function C(t,e,r,l){t=t|0;e=e|0;r=r|0;l=l|0;var f=0;w(0x0400,0x0c00,0x2000,m,t,l,r,e);f=i,i=s,s=f;n=n^a,i=i^u,o=o^c,s=s^h;a=t,u=e,c=r,h=l}function P(t,e,r,l){t=t|0;e=e|0;r=r|0;l=l|0;w(0x0000,0x0800,0x1000,m,a,u,c,h);a=n=n^t,u=i=i^e,c=o=o^r,h=s=s^l}function U(t,e,r,l){t=t|0;e=e|0;r=r|0;l=l|0;w(0x0000,0x0800,0x1000,m,a,u,c,h);n=n^t,i=i^e,o=o^r,s=s^l;a=t,u=e,c=r,h=l}function N(t,e,r,l){t=t|0;e=e|0;r=r|0;l=l|0;w(0x0000,0x0800,0x1000,m,a,u,c,h);a=n,u=i,c=o,h=s;n=n^t,i=i^e,o=o^r,s=s^l}function x(t,e,r,a){t=t|0;e=e|0;r=r|0;a=a|0;w(0x0000,0x0800,0x1000,m,l,f,p,d);d=~v&d|v&d+1,p=~E&p|E&p+((d|0)==0),f=~y&f|y&f+((p|0)==0),l=~_&l|_&l+((f|0)==0);n=n^t,i=i^e,o=o^r,s=s^a}function H(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;var i=0,o=0,s=0,l=0,f=0,p=0,d=0,_=0,y=0,E=0;t=t^a,e=e^u,r=r^c,n=n^h;i=g|0,o=S|0,s=D|0,l=T|0;for(;(y|0)<128;y=y+1|0){if(i>>>31){f=f^t,p=p^e,d=d^r,_=_^n}i=i<<1|o>>>31,o=o<<1|s>>>31,s=s<<1|l>>>31,l=l<<1;E=n&1;n=n>>>1|r<<31,r=r>>>1|e<<31,e=e>>>1|t<<31,t=t>>>1;if(E)t=t^0xe1000000}a=f,u=p,c=d,h=_}function L(t){t=t|0;m=t}function M(t,e,r,a){t=t|0;e=e|0;r=r|0;a=a|0;n=t,i=e,o=r,s=a}function k(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;a=t,u=e,c=r,h=n}function j(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;l=t,f=e,p=r,d=n}function K(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;_=t,y=e,E=r,v=n}function B(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;d=~v&d|v&n,p=~E&p|E&r,f=~y&f|y&e,l=~_&l|_&t}function Y(t){t=t|0;if(t&15)return-1;R[t|0]=n>>>24,R[t|1]=n>>>16&255,R[t|2]=n>>>8&255,R[t|3]=n&255,R[t|4]=i>>>24,R[t|5]=i>>>16&255,R[t|6]=i>>>8&255,R[t|7]=i&255,R[t|8]=o>>>24,R[t|9]=o>>>16&255,R[t|10]=o>>>8&255,R[t|11]=o&255,R[t|12]=s>>>24,R[t|13]=s>>>16&255,R[t|14]=s>>>8&255,R[t|15]=s&255;return 16}function F(t){t=t|0;if(t&15)return-1;R[t|0]=a>>>24,R[t|1]=a>>>16&255,R[t|2]=a>>>8&255,R[t|3]=a&255,R[t|4]=u>>>24,R[t|5]=u>>>16&255,R[t|6]=u>>>8&255,R[t|7]=u&255,R[t|8]=c>>>24,R[t|9]=c>>>16&255,R[t|10]=c>>>8&255,R[t|11]=c&255,R[t|12]=h>>>24,R[t|13]=h>>>16&255,R[t|14]=h>>>8&255,R[t|15]=h&255;return 16}function q(){O(0,0,0,0);g=n,S=i,D=o,T=s}function V(t,e,r){t=t|0;e=e|0;r=r|0;var a=0;if(e&15)return-1;while((r|0)>=16){Q[t&7](R[e|0]<<24|R[e|1]<<16|R[e|2]<<8|R[e|3],R[e|4]<<24|R[e|5]<<16|R[e|6]<<8|R[e|7],R[e|8]<<24|R[e|9]<<16|R[e|10]<<8|R[e|11],R[e|12]<<24|R[e|13]<<16|R[e|14]<<8|R[e|15]);R[e|0]=n>>>24,R[e|1]=n>>>16&255,R[e|2]=n>>>8&255,R[e|3]=n&255,R[e|4]=i>>>24,R[e|5]=i>>>16&255,R[e|6]=i>>>8&255,R[e|7]=i&255,R[e|8]=o>>>24,R[e|9]=o>>>16&255,R[e|10]=o>>>8&255,R[e|11]=o&255,R[e|12]=s>>>24,R[e|13]=s>>>16&255,R[e|14]=s>>>8&255,R[e|15]=s&255;a=a+16|0,e=e+16|0,r=r-16|0}return a|0}function G(t,e,r){t=t|0;e=e|0;r=r|0;var n=0;if(e&15)return-1;while((r|0)>=16){J[t&1](R[e|0]<<24|R[e|1]<<16|R[e|2]<<8|R[e|3],R[e|4]<<24|R[e|5]<<16|R[e|6]<<8|R[e|7],R[e|8]<<24|R[e|9]<<16|R[e|10]<<8|R[e|11],R[e|12]<<24|R[e|13]<<16|R[e|14]<<8|R[e|15]);n=n+16|0,e=e+16|0,r=r-16|0}return n|0}var Q=[O,I,A,C,P,U,N,x];var J=[A,H];return{set_rounds:L,set_state:M,set_iv:k,set_nonce:j,set_mask:K,set_counter:B,get_state:Y,get_iv:F,gcm_init:q,cipher:V,mac:G}}({Uint8Array:Uint8Array,Uint32Array:Uint32Array},r,n);return h.set_key=function(t,e,r,n,o,s,c,l,f){var p=u.subarray(0,60),d=u.subarray(256,316);p.set([e,r,n,o,s,c,l,f]);for(var _=t,y=1;_<4*t+28;_++)g=p[_-1],(_%t==0||8===t&&_%t==4)&&(g=i[g>>>24]<<24^i[g>>>16&255]<<16^i[g>>>8&255]<<8^i[255&g]),_%t==0&&(g=g<<8^g>>>24^y<<24,y=y<<1^(128&y?27:0)),p[_]=p[_-t]^g;for(var E=0;E<_;E+=4)for(var v=0;v<4;v++){var g=p[_-(4+E)+(4-v)%4];d[E+v]=E<4||E>=_-4?g:a[0][i[g>>>24]]^a[1][i[g>>>16&255]]^a[2][i[g>>>8&255]]^a[3][i[255&g]]}h.set_rounds(t+5)},h};return c.ENC={ECB:0,CBC:2,CFB:4,OFB:6,CTR:7},c.DEC={ECB:1,CBC:3,CFB:5,OFB:6,CTR:7},c.MAC={CBC:0,GCM:1},c.HEAP_DATA=16384,c}(),O=S.prototype;O.BLOCK_SIZE=16,O.reset=_,O.encrypt=E,O.decrypt=g;var I=D.prototype;I.BLOCK_SIZE=16,I.reset=_,I.process=y,I.finish=E;var A=T.prototype;A.BLOCK_SIZE=16,A.reset=_,A.process=v,A.finish=g;var C=new Uint8Array(1048576),P=w(r,null,C.buffer);t.AES_CBC=S,t.AES_CBC.encrypt=function(t,e,r,n){if(void 0===t)throw new SyntaxError("data required");if(void 0===e)throw new SyntaxError("key required");return new S({heap:C,asm:P,key:e,padding:r,iv:n}).encrypt(t).result},t.AES_CBC.decrypt=function(t,e,r,n){if(void 0===t)throw new SyntaxError("data required");if(void 0===e)throw new SyntaxError("key required");return new S({heap:C,asm:P,key:e,padding:r,iv:n}).decrypt(t).result},t.AES_CBC.Encrypt=D,t.AES_CBC.Decrypt=T;var U=64,N=20;m.BLOCK_SIZE=U,m.HASH_SIZE=N;var x=m.prototype;x.reset=function(){return this.result=null,this.pos=0,this.len=0,this.asm.reset(),this},x.process=function(t){if(null!==this.result)throw new n("state must be reset before processing new data");if(h(t)&&(t=s(t)),l(t)&&(t=new Uint8Array(t)),!f(t))throw new TypeError("data isn't of expected type");for(var e=this.asm,r=this.heap,i=this.pos,o=this.len,a=0,u=t.length,c=0;u>0;)o+=c=d(r,i+o,t,a,u),a+=c,u-=c,i+=c=e.process(i,o),(o-=c)||(i=0);return this.pos=i,this.len=o,this},x.finish=function(){if(null!==this.result)throw new n("state must be reset before processing new data");return this.asm.finish(this.pos,this.len,0),this.result=new Uint8Array(this.HASH_SIZE),this.result.set(this.heap.subarray(0,this.HASH_SIZE)),this.pos=0,this.len=0,this};var H=null;m.bytes=b,m.hex=function(t){return u(b(t))},m.base64=function(t){return c(b(t))},t.SHA1=m,"object"==typeof e&&e.exports?e.exports=t:r.asmCrypto=t}({},void 0!==e&&e.exports?t:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],57:[function(t,e,r){},{}],58:[function(t,e,r){var n=n||function(t,e){var r={},n=r.lib={},i=function(){},o=n.Base={extend:function(t){i.prototype=this;var e=new i;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=n.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes;if(t=t.sigBytes,this.clamp(),n%4)for(var i=0;i<t;i++)e[n+i>>>2]|=(r[i>>>2]>>>24-i%4*8&255)<<24-(n+i)%4*8;else if(65535<r.length)for(i=0;i<t;i+=4)e[n+i>>>2]=r[i>>>2];else e.push.apply(e,r);return this.sigBytes+=t,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-r%4*8,e.length=t.ceil(r/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var r=[],n=0;n<e;n+=4)r.push(4294967296*t.random()|0);return new s.init(r,e)}}),a=r.enc={},u=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;n<t;n++){var i=e[n>>>2]>>>24-n%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new s.init(r,e/2)}},c=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;n<t;n++)r.push(String.fromCharCode(e[n>>>2]>>>24-n%4*8&255));return r.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new s.init(r,e)}},h=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},l=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var r=this._data,n=r.words,i=r.sigBytes,o=this.blockSize,a=i/(4*o);if(e=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*o,i=t.min(4*e,i),e){for(var u=0;u<e;u+=o)this._doProcessBlock(n,u);u=n.splice(0,e),r.sigBytes-=i}return new s.init(u,i)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});n.Hasher=l.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new f.HMAC.init(t,r).finalize(e)}}});var f=r.algo={};return r}(Math);!function(t){function e(t,e,r,n,i,o,s){return((t=t+(e&r|~e&n)+i+s)<<o|t>>>32-o)+e}function r(t,e,r,n,i,o,s){return((t=t+(e&n|r&~n)+i+s)<<o|t>>>32-o)+e}function i(t,e,r,n,i,o,s){return((t=t+(e^r^n)+i+s)<<o|t>>>32-o)+e}function o(t,e,r,n,i,o,s){return((t=t+(r^(e|~n))+i+s)<<o|t>>>32-o)+e}for(var s=n,a=(c=s.lib).WordArray,u=c.Hasher,c=s.algo,h=[],l=0;64>l;l++)h[l]=4294967296*t.abs(t.sin(l+1))|0;c=c.MD5=u.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,n){for(s=0;16>s;s++){u=t[a=n+s];t[a]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var s=this._hash.words,a=t[n+0],u=t[n+1],c=t[n+2],l=t[n+3],f=t[n+4],p=t[n+5],d=t[n+6],_=t[n+7],y=t[n+8],E=t[n+9],v=t[n+10],g=t[n+11],S=t[n+12],D=t[n+13],T=t[n+14],m=t[n+15],b=s[0],R=s[1],w=s[2],O=s[3],R=o(R=o(R=o(R=o(R=i(R=i(R=i(R=i(R=r(R=r(R=r(R=r(R=e(R=e(R=e(R=e(R,w=e(w,O=e(O,b=e(b,R,w,O,a,7,h[0]),R,w,u,12,h[1]),b,R,c,17,h[2]),O,b,l,22,h[3]),w=e(w,O=e(O,b=e(b,R,w,O,f,7,h[4]),R,w,p,12,h[5]),b,R,d,17,h[6]),O,b,_,22,h[7]),w=e(w,O=e(O,b=e(b,R,w,O,y,7,h[8]),R,w,E,12,h[9]),b,R,v,17,h[10]),O,b,g,22,h[11]),w=e(w,O=e(O,b=e(b,R,w,O,S,7,h[12]),R,w,D,12,h[13]),b,R,T,17,h[14]),O,b,m,22,h[15]),w=r(w,O=r(O,b=r(b,R,w,O,u,5,h[16]),R,w,d,9,h[17]),b,R,g,14,h[18]),O,b,a,20,h[19]),w=r(w,O=r(O,b=r(b,R,w,O,p,5,h[20]),R,w,v,9,h[21]),b,R,m,14,h[22]),O,b,f,20,h[23]),w=r(w,O=r(O,b=r(b,R,w,O,E,5,h[24]),R,w,T,9,h[25]),b,R,l,14,h[26]),O,b,y,20,h[27]),w=r(w,O=r(O,b=r(b,R,w,O,D,5,h[28]),R,w,c,9,h[29]),b,R,_,14,h[30]),O,b,S,20,h[31]),w=i(w,O=i(O,b=i(b,R,w,O,p,4,h[32]),R,w,y,11,h[33]),b,R,g,16,h[34]),O,b,T,23,h[35]),w=i(w,O=i(O,b=i(b,R,w,O,u,4,h[36]),R,w,f,11,h[37]),b,R,_,16,h[38]),O,b,v,23,h[39]),w=i(w,O=i(O,b=i(b,R,w,O,D,4,h[40]),R,w,a,11,h[41]),b,R,l,16,h[42]),O,b,d,23,h[43]),w=i(w,O=i(O,b=i(b,R,w,O,E,4,h[44]),R,w,S,11,h[45]),b,R,m,16,h[46]),O,b,c,23,h[47]),w=o(w,O=o(O,b=o(b,R,w,O,a,6,h[48]),R,w,_,10,h[49]),b,R,T,15,h[50]),O,b,p,21,h[51]),w=o(w,O=o(O,b=o(b,R,w,O,S,6,h[52]),R,w,l,10,h[53]),b,R,v,15,h[54]),O,b,u,21,h[55]),w=o(w,O=o(O,b=o(b,R,w,O,y,6,h[56]),R,w,m,10,h[57]),b,R,d,15,h[58]),O,b,D,21,h[59]),w=o(w,O=o(O,b=o(b,R,w,O,f,6,h[60]),R,w,g,10,h[61]),b,R,c,15,h[62]),O,b,E,21,h[63]);s[0]=s[0]+b|0,s[1]=s[1]+R|0,s[2]=s[2]+w|0,s[3]=s[3]+O|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;r[i>>>5]|=128<<24-i%32;var o=t.floor(n/4294967296);for(r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(r.length+1),this._process(),r=(e=this._hash).words,n=0;4>n;n++)i=r[n],r[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return e},clone:function(){var t=u.clone.call(this);return t._hash=this._hash.clone(),t}}),s.MD5=u._createHelper(c),s.HmacMD5=u._createHmacHelper(c)}(Math),function(){var t=n,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,r){t=this._hasher=new t.init,"string"==typeof r&&(r=e.parse(r));var n=t.blockSize,i=4*n;r.sigBytes>i&&(r=t.finalize(r)),r.clamp();for(var o=this._oKey=r.clone(),s=this._iKey=r.clone(),a=o.words,u=s.words,c=0;c<n;c++)a[c]^=1549556828,u[c]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),e.exports.enc_Hex_parse=n.enc.Hex.parse,e.exports.HmacMD5=n.HmacMD5},{}],59:[function(t,e,r){r.TUTIL=t("./Tutil.js")},{"./Tutil.js":55}],60:[function(t,e,r){function n(t,e,r){null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function i(){return new n(null)}function o(t,e,r,n,i,o){for(;--o>=0;){var s=e*this[t++]+r[n]+i;i=Math.floor(s/67108864),r[n++]=67108863&s}return i}function s(t,e,r,n,i,o){for(var s=32767&e,a=e>>15;--o>=0;){var u=32767&this[t],c=this[t++]>>15,h=a*u+c*s;i=((u=s*u+((32767&h)<<15)+r[n]+(1073741823&i))>>>30)+(h>>>15)+a*c+(i>>>30),r[n++]=1073741823&u}return i}function a(t,e,r,n,i,o){for(var s=16383&e,a=e>>14;--o>=0;){var u=16383&this[t],c=this[t++]>>14,h=a*u+c*s;i=((u=s*u+((16383&h)<<14)+r[n]+i)>>28)+(h>>14)+a*c,r[n++]=268435455&u}return i}function u(t){return v.charAt(t)}function c(t,e){var r=g[t.charCodeAt(e)];return null==r?-1:r}function h(t){var e=i();return e.fromInt(t),e}function l(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function f(t){this.m=t}function p(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}var d,_="undefined"!=typeof navigator;_&&"Microsoft Internet Explorer"==navigator.appName?(n.prototype.am=s,d=30):_&&"Netscape"!=navigator.appName?(n.prototype.am=o,d=26):(n.prototype.am=a,d=28),n.prototype.DB=d,n.prototype.DM=(1<<d)-1,n.prototype.DV=1<<d;n.prototype.FV=Math.pow(2,52),n.prototype.F1=52-d,n.prototype.F2=2*d-52;var y,E,v="0123456789abcdefghijklmnopqrstuvwxyz",g=new Array;for(y="0".charCodeAt(0),E=0;E<=9;++E)g[y++]=E;for(y="a".charCodeAt(0),E=10;E<36;++E)g[y++]=E;for(y="A".charCodeAt(0),E=10;E<36;++E)g[y++]=E;f.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},f.prototype.revert=function(t){return t},f.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},f.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},f.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},p.prototype.convert=function(t){var e=i();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(n.ZERO)>0&&this.m.subTo(e,e),e},p.prototype.revert=function(t){var e=i();return t.copyTo(e),this.reduce(e),e},p.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t[e],n=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[r=e+this.m.t]+=this.m.am(0,n,t,e,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},p.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},p.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},n.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},n.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},n.prototype.fromString=function(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var i=t.length,o=!1,s=0;--i>=0;){var a=8==r?255&t[i]:c(t,i);a<0?"-"==t.charAt(i)&&(o=!0):(o=!1,0==s?this[this.t++]=a:s+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&n.ZERO.subTo(this,this)},n.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},n.prototype.dlShiftTo=function(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s},n.prototype.drShiftTo=function(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s},n.prototype.lShiftTo=function(t,e){var r,n=t%this.DB,i=this.DB-n,o=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e[r+s+1]=this[r]>>i|a,a=(this[r]&o)<<n;for(r=s-1;r>=0;--r)e[r]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()},n.prototype.rShiftTo=function(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e[0]=this[r]>>n;for(var s=r+1;s<this.t;++s)e[s-r-1]|=(this[s]&o)<<i,e[s-r]=this[s]>>n;n>0&&(e[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}},n.prototype.subTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]-t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t[r],e[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[r++]=this.DV+n:n>0&&(e[r++]=n),e.t=r,e.clamp()},n.prototype.multiplyTo=function(t,e){var r=this.abs(),i=t.abs(),o=r.t;for(e.t=o+i.t;--o>=0;)e[o]=0;for(o=0;o<i.t;++o)e[o+r.t]=r.am(0,i[o],e,o,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&n.ZERO.subTo(e,e)},n.prototype.squareTo=function(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()},n.prototype.divRemTo=function(t,e,r){var o=t.abs();if(!(o.t<=0)){var s=this.abs();if(s.t<o.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=i());var a=i(),u=this.s,c=t.s,h=this.DB-l(o[o.t-1]);h>0?(o.lShiftTo(h,a),s.lShiftTo(h,r)):(o.copyTo(a),s.copyTo(r));var f=a.t,p=a[f-1];if(0!=p){var d=p*(1<<this.F1)+(f>1?a[f-2]>>this.F2:0),_=this.FV/d,y=(1<<this.F1)/d,E=1<<this.F2,v=r.t,g=v-f,S=null==e?i():e;for(a.dlShiftTo(g,S),r.compareTo(S)>=0&&(r[r.t++]=1,r.subTo(S,r)),n.ONE.dlShiftTo(f,S),S.subTo(a,a);a.t<f;)a[a.t++]=0;for(;--g>=0;){var D=r[--v]==p?this.DM:Math.floor(r[v]*_+(r[v-1]+E)*y);if((r[v]+=a.am(0,D,r,g,0,f))<D)for(a.dlShiftTo(g,S),r.subTo(S,r);r[v]<--D;)r.subTo(S,r)}null!=e&&(r.drShiftTo(f,e),u!=c&&n.ZERO.subTo(e,e)),r.t=f,r.clamp(),h>0&&r.rShiftTo(h,r),u<0&&n.ZERO.subTo(r,r)}}},n.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,(e=e*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},n.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},n.prototype.exp=function(t,e){if(t>4294967295||t<1)return n.ONE;var r=i(),o=i(),s=e.convert(this),a=l(t)-1;for(s.copyTo(r);--a>=0;)if(e.sqrTo(r,o),(t&1<<a)>0)e.mulTo(o,s,r);else{var u=r;r=o,o=u}return e.revert(r)},n.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(r=this[s]>>a)>0&&(i=!0,o=u(r));s>=0;)a<e?(r=(this[s]&(1<<a)-1)<<e-a,r|=this[--s]>>(a+=this.DB-e)):(r=this[s]>>(a-=e)&n,a<=0&&(a+=this.DB,--s)),r>0&&(i=!0),i&&(o+=u(r));return i?o:"0"},n.prototype.negate=function(){var t=i();return n.ZERO.subTo(this,t),t},n.prototype.abs=function(){return this.s<0?this.negate():this},n.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this[r]-t[r]))return e;return 0},n.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+l(this[this.t-1]^this.s&this.DM)},n.prototype.mod=function(t){var e=i();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(n.ZERO)>0&&t.subTo(e,e),e},n.prototype.modPowInt=function(t,e){var r;return r=t<256||e.isEven()?new f(e):new p(e),this.exp(t,r)},n.ZERO=h(0),n.ONE=h(1),e.exports.BigInteger=n},{}],61:[function(t,e,r){function n(){this.i=0,this.j=0,this.S=new Array}n.prototype.init=function(t){var e,r,n;for(e=0;e<256;++e)this.S[e]=e;for(r=0,e=0;e<256;++e)r=r+this.S[e]+t[e%t.length]&255,n=this.S[e],this.S[e]=this.S[r],this.S[r]=n;this.i=0,this.j=0},n.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};e.exports.rng_psize=256,e.exports.prng_newstate=function(){return new n}},{}],62:[function(t,e,r){function n(){!function(t){a[u++]^=255&t,a[u++]^=t>>8&255,a[u++]^=t>>16&255,a[u++]^=t>>24&255,u>=c&&(u-=c)}((new Date).getTime())}function i(){if(null==s){for(n(),(s=h()).init(a),u=0;u<a.length;++u)a[u]=0;u=0}return s.next()}function o(){}var s,a,u,c=t("./prng4.js").rng_psize,h=t("./prng4.js").prng_newstate;if(null==a){a=new Array,u=0;var l;if("undefined"!=typeof window&&window.crypto){if(window.crypto.getRandomValues){var f=new Uint8Array(32);for(window.crypto.getRandomValues(f),l=0;l<32;++l)a[u++]=f[l]}if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var p=window.crypto.random(32);for(l=0;l<p.length;++l)a[u++]=255&p.charCodeAt(l)}}for(;u<c;)l=Math.floor(65536*Math.random()),a[u++]=l>>>8,a[u++]=255&l;u=0,n()}o.prototype.nextBytes=function(t){var e;for(e=0;e<t.length;++e)t[e]=i()},e.exports.SecureRandom=o},{"./prng4.js":61}],63:[function(t,e,r){function n(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}var i=t("./jsbn.js"),o=t("./rng.js");n.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},n.prototype.setPublic=function(t,e){if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw new Error("Invalid RSA public key");this.n=function(t,e){return new i.BigInteger(t,e)}(t,16),this.e=parseInt(e,16)},n.prototype.encrypt=function(t,e){var r=function(t,e,r){if(e<t.length+11)throw new Error("Message too long for RSA");for(var n=new Array,s=t.length-1;s>=0&&e>0;){var a=t.charCodeAt(s--);a<128?n[--e]=a:a>127&&a<2048?(n[--e]=63&a|128,n[--e]=a>>6|192):(n[--e]=63&a|128,n[--e]=a>>6&63|128,n[--e]=a>>12|224)}n[--e]=0;for(var u=new o.SecureRandom,c=new Array;e>2;){if(c[0]=0,r)c[0]=9;else for(;0==c[0];)u.nextBytes(c);n[--e]=c[0]}return n[--e]=2,n[--e]=0,new i.BigInteger(n)}(t,this.n.bitLength()+7>>3,e);if(null==r)return null;var n=this.doPublic(r);if(null==n)return null;var s=n.toString(16);return 0==(1&s.length)?s:"0"+s},n.prototype.encryptByte=function(t,e){var r=function(t,e,r){if(e<t.length+11)return alert("Message too long for RSA"),null;for(var n=new Array,s=t.length-1;s>=0&&e>0;)n[--e]=t[s--];n[--e]=0;for(var a=new o.SecureRandom,u=new Array;e>2;){if(u[0]=0,r)u[0]=9;else for(;0==u[0];)a.nextBytes(u);n[--e]=u[0]}return n[--e]=2,n[--e]=0,new i.BigInteger(n)}(t,this.n.bitLength()+7>>3,e);if(null==r)return null;var n=this.doPublic(r);if(null==n)return null;var s=n.toString(16);return 0==(1&s.length)?s:"0"+s},e.exports.RSAKey=n},{"./jsbn.js":60,"./rng.js":62}],64:[function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(s,a)}u((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){function r(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}var n,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(r,"__esModule",{value:!0});var s=t("./droi-object"),a=t("./droi-error"),u=t("./droi-core"),c=t("./rest/user"),h=t("./droi-persist-settings"),l=t("./droi-const"),f=t("sha256"),p=function(t){function e(){var r=t.call(this,"_User")||this;return r.session=null,r.setValue(e.KEY_ENABLE,!0),r.setValue(e.KEY_EMAIL_VERIFIED,!1),r.setValue(e.KEY_PHONE_VERIFIED,!1),r}return n(e,t),e.createUser=function(){return new e},e.saveUserCache=function(t){var e={userData:t.toJson(),session:t.session};h.DroiPersistSettings.setItem(h.DroiPersistSettings.KEY_SAVED_USER,JSON.stringify(e))},e.loadUserCache=function(){var t=h.DroiPersistSettings.getItem(h.DroiPersistSettings.KEY_SAVED_USER);if(null==t||0==t.length)return null;var r=JSON.parse(t),n=s.DroiObject.fromJson(JSON.parse(r.userData)),i=e.createUser();return i.cloneFrom(n),i.session=r.session,i},e.cleanUserCache=function(){h.DroiPersistSettings.removeItem(h.DroiPersistSettings.KEY_SAVED_USER),e.currentUser=null},e.getCurrentUser=function(){if(null!=e.currentUser)return e.currentUser;var t=e.loadUserCache();return null==t?null:(e.currentUser=t,t)},e.loginAnonymous=function(){return i(this,void 0,void 0,function(){var t,r,n,i,h;return o(this,function(o){switch(o.label){case 0:return null!=(t=e.getCurrentUser())&&t.isLoggedIn?[2,Promise.reject(new a.DroiError(a.DroiError.USER_ALREADY_LOGIN))]:(t=e.createUser(),n=(r=t).setValue,i=["UserId"],h=u.DroiCore.getInstallationId(),[4,u.DroiCore.getDeviceId()]);case 1:return n.apply(r,i.concat([h+o.sent()])),t.setValue("AuthData",{anonymous:"1"}),[2,c.RestUser.instance().loginAnonymous(t).then(function(t){var r=t.Token,n=t.ExpiredAt,i=t.Data,o=s.DroiObject.fromJson(i);return o.session={Token:r,ExpiredAt:n},e.saveUserCache(o),o})]}})})},e.login=function(t,r){if(null==t||null==r)return Promise.reject(new a.DroiError(a.DroiError.INVALID_PARAMETER,"Empty UserId or Password"));var n=e.getCurrentUser();return null!=n&&n.isLoggedIn()&&!n.isAnonymous()?Promise.reject(new a.DroiError(a.DroiError.USER_ALREADY_LOGIN)):c.RestUser.instance().loginUser(t,f(r)).then(function(t){var r=e.createUser(),n=s.DroiObject.fromJson(t.Data);return r.cloneFrom(n),r.session={Token:t.Token,ExpiredAt:t.ExpiredAt},e.saveUserCache(r),e.currentUser=r,r})},e.loginOTP=function(t,r,n,i){i=i||"droiotp_"+t;var o=e.createUser();return o.UserId=i,r==c.OtpType.EMAIL?o.Email=t:o.PhoneNum=t,c.RestUser.instance().loginOTP(n,r,JSON.parse(o.toJson())).then(function(t){var r=e.createUser(),n=s.DroiObject.fromJson(t.Data);return r.cloneFrom(n),r.session={Token:t.Token,ExpiredAt:t.ExpiredAt},e.saveUserCache(r),e.currentUser=r,r})},e.resetPassword=function(t,e){return c.RestUser.instance().resetPassword(t,e).then(function(t){return new a.DroiError(a.DroiError.OK)})},e.requestOTP=function(t,e,r){return r=r||"droiotp_"+t,c.RestUser.instance().requestOTP(r,t,e).then(function(t){return new a.DroiError(a.DroiError.OK)})},e.prototype.signup=function(){return i(this,void 0,void 0,function(){var r,n,i,s,h,p,d,_,y,E,v;return o(this,function(o){switch(o.label){case 0:if(null==this.getValue(e.KEY_USERID)||null==this.password)return[2,Promise.reject(new a.DroiError(a.DroiError.INVALID_PARAMETER,"Empty UserId or Password."))];if(null==(r=e.getCurrentUser())||!r.isLoggedIn())return[3,6];if(r.objectId()!==this.objectId()||!r.isAnonymous())return[2,Promise.reject(new a.DroiError(a.DroiError.USER_ALREADY_LOGIN))];this.setValue(e.KEY_AUTHDATA,null),o.label=1;case 1:return o.trys.push([1,3,,5]),[4,t.prototype.save.call(this)];case 2:return o.sent(),[3,5];case 3:return n=o.sent(),(v=n).code==l.DroiConstant.DROI_API_RECORD_CONFLICT&&(v.code=a.DroiError.USER_ALREADY_EXISTS),i={},i[c.RestUser.USER_TYPE_ANONYMOUS]="1",this.setValue(e.KEY_AUTHDATA,i),s=this.setValue,h=[e.KEY_USERID],p=u.DroiCore.getInstallationId(),[4,u.DroiCore.getDeviceId()];case 4:return s.apply(this,h.concat([p+o.sent()])),this.password=null,[2,Promise.reject(v)];case 5:return e.saveUserCache(this),[2,this.changePassword("",this.password)];case 6:this.setValue(e.KEY_AUTHDATA,null),d=this.toJson(),(_=JSON.parse(d)).Password=f(this.password),this.password=null,o.label=7;case 7:return o.trys.push([7,9,,10]),[4,c.RestUser.instance().signupUser(_)];case 8:return y=o.sent(),[3,10];case 9:return E=o.sent(),(v=E).code!=l.DroiConstant.DROI_API_RECORD_CONFLICT&&v.code!=l.DroiConstant.DROI_API_USER_EXISTS||(v.code=a.DroiError.USER_ALREADY_EXISTS),[2,Promise.reject(v)];case 10:return this.session={Token:y.Token,ExpiredAt:y.ExpiredAt},e.currentUser=this,e.saveUserCache(this),[2,t.prototype.save.call(this)]}})})},e.prototype.delete=function(){return t.prototype.delete.call(this).then(function(t){return e.cleanUserCache(),t}).catch(function(t){return e.cleanUserCache(),t})},e.prototype.logout=function(){return this.isLoggedIn()?c.RestUser.instance().logout(this.objectId()).then(function(t){return e.cleanUserCache(),new a.DroiError(a.DroiError.OK)}):Promise.reject(new a.DroiError(a.DroiError.USER_NOT_AUTHORIZED))},e.prototype.isLoggedIn=function(){if(null==this.session)return!1;if(null==this.session.Token||null==this.session.ExpiredAt)return!1;var t=Date.parse(this.session.ExpiredAt);return!isNaN(t)&&!(Date.now()>=t)},e.prototype.isAnonymous=function(){var t=this.getValue(e.KEY_AUTHDATA);return null!=t&&null!=t[c.RestUser.USER_TYPE_ANONYMOUS]},e.prototype.isEnable=function(){return this.getValue(e.KEY_ENABLE)||!1},e.prototype.isEmailVerified=function(){return this.getValue(e.KEY_EMAIL_VERIFIED)||!1},e.prototype.isPhoneNumVerified=function(){return this.getValue(e.KEY_PHONE_VERIFIED)||!1},e.prototype.changePassword=function(t,e){return c.RestUser.instance().changePassword(f(t),f(e)).then(function(t){return new a.DroiError(a.DroiError.OK)})},e.prototype.validateEmail=function(){return c.RestUser.instance().validateEmail().then(function(t){return new a.DroiError(a.DroiError.OK)})},e.prototype.validatePhoneNum=function(){return c.RestUser.instance().validatePhoneNum().then(function(t){return new a.DroiError(a.DroiError.OK)})},e.prototype.confirmPhoneNumPin=function(t){return c.RestUser.instance().confirmPhoneNumPin(t).then(function(t){return new a.DroiError(a.DroiError.OK)})},e.prototype.cloneFrom=function(r){if(t.prototype.cloneFrom.call(this,r),r instanceof e){var n=r;this.UserId=n.UserId,this.Password=n.Password,this.Email=n.Email,this.PhoneNum=n.PhoneNum,this.session=n.session,this.setValue(e.KEY_AUTHDATA,n.getValue(e.KEY_AUTHDATA))}},Object.defineProperty(e.prototype,"Password",{get:function(){return this.password},set:function(t){this.password=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"UserId",{get:function(){return this.getValue(e.KEY_USERID)},set:function(t){this.setValue(e.KEY_USERID,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Email",{get:function(){return this.getValue(e.KEY_EMAIL)},set:function(t){this.setValue(e.KEY_EMAIL,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PhoneNum",{get:function(){return this.getValue(e.KEY_PHONENUM)},set:function(t){this.setValue(e.KEY_PHONENUM,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sessionToken",{get:function(){return this.isLoggedIn()?this.session.Token:null},enumerable:!0,configurable:!0}),e.KEY_USERID="UserId",e.KEY_AUTHDATA="AuthData",e.KEY_EMAIL="Email",e.KEY_PHONENUM="PhoneNum",e.KEY_ENABLE="Enabled",e.KEY_EMAIL_VERIFIED="EmailVerified",e.KEY_PHONE_VERIFIED="PhoneNumVerified",e.currentUser=null,e}(s.DroiObject);r.DroiUser=p},{"./droi-const":39,"./droi-core":40,"./droi-error":41,"./droi-object":47,"./droi-persist-settings":49,"./rest/user":72,sha256:18}],65:[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}Object.defineProperty(r,"__esModule",{value:!0}),n(t("./droi-permission")),n(t("./droi-core")),n(t("./droi-object")),n(t("./droi-user")),n(t("./droi-query")),n(t("./droi-condition")),n(t("./droi-cloud"));var i=t("./droi-http");r.DroiHttpMethod=i.DroiHttpMethod,n(t("./droi-error")),n(t("./droi-file")),n(t("./droi-preference")),n(t("./droi-cloudcache")),n(t("./droi-group")),t("./droi-polyfill")},{"./droi-cloud":36,"./droi-cloudcache":37,"./droi-condition":38,"./droi-core":40,"./droi-error":41,"./droi-file":42,"./droi-group":43,"./droi-http":44,"./droi-object":47,"./droi-permission":48,"./droi-polyfill":50,"./droi-preference":51,"./droi-query":53,"./droi-user":64}],66:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../droi-api"),i=t("../droi-const"),o=t("../droi-secure-http"),s=function(){function t(){}return t.instance=function(){return null==t.INSTANCE&&(t.INSTANCE=new t),t.INSTANCE},t.prototype.callApi=function(e,r,s,a,u){var c=o.DroiHttpSecure.isEnable(),h=""+(c?t.REST_HTTPS_SECURE:t.REST_HTTPS)+r,l=c?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer,f={};f[i.DroiConstant.DROI_KEY_HTTP_API_KEY]=e;return l(h,s,a,f,null==u?null:n.RemoteServiceHelper.TokenHolder.make(u)).then(function(t){return JSON.stringify(t)})},t.REST_HTTPS="https://api.droibaas.com",t.REST_HTTPS_SECURE="",t.INSTANCE=null,t}();r.RestCloudCode=s},{"../droi-api":34,"../droi-const":39,"../droi-secure-http":54}],67:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../droi-secure-http"),i=t("../droi-api"),o=t("../droi-http"),s=t("../index"),a=function(){function t(){}return t.instance=function(){return null==t.INSTANCE&&(t.INSTANCE=new t),t.INSTANCE},t.prototype.get=function(e){var r=n.DroiHttpSecure.isEnable(),s=(r?t.REST_HTTPS_SECURE:t.REST_HTTPS)+"/"+e;return(r?i.RemoteServiceHelper.callServerSecure:i.RemoteServiceHelper.callServer)(s,o.DroiHttpMethod.GET,null,null,null).then(function(t){return t})},t.prototype.set=function(e,r,a){var u=n.DroiHttpSecure.isEnable(),c=(u?t.REST_HTTPS_SECURE:t.REST_HTTPS)+"/"+e,h=u?i.RemoteServiceHelper.callServerSecure:i.RemoteServiceHelper.callServer,l={TTL:a=a||180,Value:r};return h(c,o.DroiHttpMethod.PUT,JSON.stringify(l),null,null).then(function(t){return new s.DroiError(s.DroiError.OK)})},t.prototype.remove=function(e){var r=n.DroiHttpSecure.isEnable(),a=(r?t.REST_HTTPS_SECURE:t.REST_HTTPS)+"/"+e;return(r?i.RemoteServiceHelper.callServerSecure:i.RemoteServiceHelper.callServer)(a,o.DroiHttpMethod.DELETE,null,null,null).then(function(t){return new s.DroiError(s.DroiError.OK)})},t.REST_HTTPS="https://api.droibaas.com/rest/cloudcache/v2",t.REST_HTTPS_SECURE="/droi/cloudcache/v2",t.REST_GET="/preference",t.INSTANCE=null,t}();r.RestCloudCache=a},{"../droi-api":34,"../droi-http":44,"../droi-secure-http":54,"../index":65}],68:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../droi-api"),i=t("../droi-error"),o=t("../index"),s=t("../droi-http"),a=t("../droi-log"),u=t("../droi-secure-http"),c=function(){function t(){}return t.instance=function(){return null==t.INSTANCE&&(t.INSTANCE=new t),t.INSTANCE},t.prototype.getUri=function(e){var r=u.DroiHttpSecure.isEnable(),o=(r?t.REST_HTTP_SECURE:t.REST_HTTPS)+"/"+e;return(r?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer)(o,s.DroiHttpMethod.GET,"",null,n.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){if(t.hasOwnProperty("CDN")){var e=t.CDN;return e instanceof Array?e:[e]}throw new i.DroiError(i.DroiError.ERROR,"There is no CDN link")})},t.prototype.delete=function(e){var r=u.DroiHttpSecure.isEnable(),o=(r?t.REST_HTTP_SECURE:t.REST_HTTPS)+"/"+e;return(r?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer)(o,s.DroiHttpMethod.DELETE,"",null,n.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){return new i.DroiError(i.DroiError.OK)})},t.prototype.getUploadToken=function(e,r,o,c,h,l){a.DroiLog.d(t.LOG_TAG,"getUploadToken");var f=u.DroiHttpSecure.isEnable(),p=f||!l?(f?t.REST_HTTP_SECURE:t.REST_HTTPS)+"/"+e:""+(f?t.REST_HTTP_SECURE:t.REST_HTTPS);return(f?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer)(p,f?s.DroiHttpMethod.PUT:l?s.DroiHttpMethod.POST:s.DroiHttpMethod.PATCH,JSON.stringify({Name:r,Type:o,Size:c,MD5:h}),null,n.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){var e=(t=t).Token,r=t.UploadUrl;t.SessionId;if(void 0===e||void 0===r)throw new i.DroiError(i.DroiError.UPLOAD_FAILED,"Token or Upload url is empty.");return t})},t.prototype.upload=function(t,e,r,n,i,a,u){return new Promise(function(c,h){var l={key:i,token:e,"x:AppId":o.DroiCore.getAppId(),"x:Id":n,"x:SessionId":r};wx.uploadFile({url:t,filePath:a,name:"file",formData:l,success:function(t){var e=new s.DroiHttpResponse;e.status=t.statusCode,e.data=t.data,c(e)},fail:function(t){h(t)}}).onProgressUpdate(function(t){u(t.totalBytesSent,t.totalBytesExpectedToSend)})})},t.REST_HTTP_SECURE="/droifu/v2/file",t.REST_HTTPS="https://api.droibaas.com/rest/files/v2",t.INSTANCE=null,t.LOG_TAG="DroiFileApi",t}();r.RestFile=c},{"../droi-api":34,"../droi-error":41,"../droi-http":44,"../droi-log":45,"../droi-secure-http":54,"../index":65}],69:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./object"),i=t("../droi-secure-http"),o=t("../droi-api"),s=t("../droi-http"),a=t("../index"),u=function(){function t(){}return t.instance=function(){return null==t.INSTANCE&&(t.INSTANCE=new t),t.INSTANCE},t.prototype.upsert=function(e,r,n){var a=i.DroiHttpSecure.isEnable(),u=""+(a?t.REST_HTTPS_SECURE:t.REST_HTTPS)+t.REST_GROUP_URL+"/"+r;return(a?o.RemoteServiceHelper.callServerSecure:o.RemoteServiceHelper.callServer)(u,s.DroiHttpMethod.PUT,e,null,o.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){return!0})},t.prototype.query=function(e,r,u,c,h){var l=i.DroiHttpSecure.isEnable(),f=""+(l?t.REST_HTTPS_SECURE:t.REST_HTTPS)+t.REST_GROUP_URL,p=l?o.RemoteServiceHelper.callServerSecure:o.RemoteServiceHelper.callServer,d=n.RestObject.generatorQueryString(r,u,c,h);return l||(d+="&include_depth=3"),""!==d&&(f=f+"?"+d),p(f,s.DroiHttpMethod.GET,null,null,o.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){if(t instanceof Array)return t;throw new a.DroiError(a.DroiError.INVALID_PARAMETER,"json is not array in query result")})},t.prototype.updateData=function(t,e,r,i,o,s){return n.RestObject.instance().updateData(t,e,r,i,o,s)},t.prototype.delete=function(e,r){var n=i.DroiHttpSecure.isEnable(),a=""+(n?t.REST_HTTPS_SECURE:t.REST_HTTPS)+t.REST_GROUP_URL+"/"+e;return(n?o.RemoteServiceHelper.callServerSecure:o.RemoteServiceHelper.callServer)(a,s.DroiHttpMethod.DELETE,null,null,o.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){return!0})},t.prototype.fetch=function(e){var r=i.DroiHttpSecure.isEnable(),n=""+(r?t.REST_HTTPS_SECURE:t.REST_HTTPS)+t.REST_GROUP_URL+"/"+e+"?name=true";return(r?o.RemoteServiceHelper.callServerSecure:o.RemoteServiceHelper.callServer)(n,s.DroiHttpMethod.GET,null,null,o.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){return t[0]})},t.prototype.getGroupIdByObjectId=function(e,r){var n=i.DroiHttpSecure.isEnable(),a=""+(n?t.REST_HTTPS_SECURE:t.REST_HTTPS)+(0==e?t.REST_USER_URL:t.REST_GROUP_URL)+"/"+r+"/parent";return(n?o.RemoteServiceHelper.callServerSecure:o.RemoteServiceHelper.callServer)(a,s.DroiHttpMethod.GET,null,null,o.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){return t})},t.REST_GROUP_URL="/groups/v2",t.REST_USER_URL="/users/v2",t.REST_HTTPS="https://api.droibaas.com/rest",t.REST_HTTPS_SECURE="/droi",t.TABLE_NAME="_Group",t.INSTANCE=null,t}();r.RestGroup=u},{"../droi-api":34,"../droi-http":44,"../droi-secure-http":54,"../index":65,"./object":70}],70:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../droi-api"),i=t("../droi-http"),o=t("../droi-error"),s=t("../droi-secure-http"),a=function(){function t(){}return t.instance=function(){return null==t.INSTANCE&&(t.INSTANCE=new t),t.INSTANCE},t.prototype.upsert=function(e,r,o){var a=s.DroiHttpSecure.isEnable(),u=""+(a?t.REST_HTTPS_SECURE:t.REST_HTTPS)+t.REST_OBJECT_URL+"/"+o+"/"+r;return(a?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer)(u,i.DroiHttpMethod.PUT,e,null,n.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){return!0})},t.prototype.delete=function(e,r){var o=s.DroiHttpSecure.isEnable(),a=""+(o?t.REST_HTTPS_SECURE:t.REST_HTTPS)+t.REST_OBJECT_URL+"/"+r+"/"+e;return(o?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer)(a,i.DroiHttpMethod.DELETE,null,null,n.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){return!0})},t.prototype.query=function(e,r,a,u,c){var h=s.DroiHttpSecure.isEnable(),l=""+(h?t.REST_HTTPS_SECURE:t.REST_HTTPS)+t.REST_OBJECT_URL+"/"+e,f=h?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer,p=t.generatorQueryString(r,a,u,c);return h||(p+="&include_depth=3"),""!==p&&(l=l+"?"+p),f(l,i.DroiHttpMethod.GET,null,null,n.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){if(t instanceof Array)return t;throw new o.DroiError(o.DroiError.INVALID_PARAMETER,"json is not array in query result")})},t.prototype.updateData=function(e,r,o,a,u,c){var h=s.DroiHttpSecure.isEnable(),l=""+(h?t.REST_HTTPS_SECURE:t.REST_HTTPS)+t.REST_OBJECT_URL+"/"+e,f=h?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer,p=t.generatorQueryString(o,a,u,c);return""!==p&&(l=l+"?"+p),f(l,i.DroiHttpMethod.PATCH,r,null,n.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){return!0})},t.prototype.bulkUpsert=function(e,r){var o=s.DroiHttpSecure.isEnable(),a=""+(o?t.REST_HTTPS_SECURE:t.REST_HTTPS)+t.REST_BULK_OBJECT_URL+"/"+e;return(o?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer)(a,i.DroiHttpMethod.PUT,r,null,n.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){return!0})},t.prototype.bulkDelete=function(e,r){var o=s.DroiHttpSecure.isEnable(),a=""+(o?t.REST_HTTPS_SECURE:t.REST_HTTPS)+t.REST_BULK_OBJECT_URL+"/"+e,u=o?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer;return r&&(a=a+"?body="+encodeURIComponent(r)),u(a,i.DroiHttpMethod.DELETE,null,null,n.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){return!0})},t.prototype.atomicAdd=function(e,r,o){var a=s.DroiHttpSecure.isEnable(),u=""+(a?t.REST_HTTPS_SECURE:t.REST_HTTPS)+t.REST_OBJECT_URL+"/"+e+"/"+r+t.REST_ATOMIC_ADD;return(a?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer)(u,i.DroiHttpMethod.POST,JSON.stringify(o),null,n.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){return!0})},t.generatorQueryString=function(t,e,r,n){var i="";return t&&(i=i+"where="+encodeURIComponent(t)+"&"),!e&&isNaN(e)||(i=i+"offset="+e+"&"),!r&&isNaN(r)||(i=i+"offset="+r+"&"),n&&(i=i+"offset="+encodeURIComponent(n)+"&"),i.length>0?i.substring(0,i.length-1):i},t.REST_OBJECT_URL="/objects/v2",t.REST_BULK_OBJECT_URL="/bulk/v2",t.REST_HTTPS="https://api.droibaas.com/rest",t.REST_HTTPS_SECURE="/droi",t.REST_ATOMIC_ADD="/increment",t.INSTANCE=null,t}();r.RestObject=a},{"../droi-api":34,"../droi-error":41,"../droi-http":44,"../droi-secure-http":54}],71:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../droi-secure-http"),i=t("../droi-api"),o=t("../droi-http"),s=function(){function t(){}return t.instance=function(){return null==t.INSTANCE&&(t.INSTANCE=new t),t.INSTANCE},t.prototype.get=function(){var e=n.DroiHttpSecure.isEnable(),r=""+(e?t.REST_HTTPS_SECURE:t.REST_HTTPS)+t.REST_PREFERENCE_URL+t.REST_GET;return(e?i.RemoteServiceHelper.callServerSecure:i.RemoteServiceHelper.callServer)(r,o.DroiHttpMethod.GET,null,null,null).then(function(t){return t})},t.REST_PREFERENCE_URL="/apps/v2",t.REST_HTTPS="https://api.droibaas.com/rest",t.REST_HTTPS_SECURE="/droi",t.REST_GET="/preference",t.INSTANCE=null,t}();r.RestPreference=s},{"../droi-api":34,"../droi-http":44,"../droi-secure-http":54}],72:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../droi-api"),i=t("../droi-core"),o=t("../droi-http"),s=t("../droi-const"),a=t("../droi-error"),u=t("./object"),c=t("../droi-secure-http");!function(t){t.EMAIL="EMAIL",t.PHONE="PHONE",t.ALL="ALL"}(r.ResetPasswordType||(r.ResetPasswordType={}));!function(t){t.EMAIL="EMAIL",t.PHONE="PHOME"}(r.OtpType||(r.OtpType={}));var h=function(){function t(){}return t.instance=function(){return null==t.INSTANCE&&(t.INSTANCE=new t),t.INSTANCE},t.prototype.upsert=function(e,r,i){var s=c.DroiHttpSecure.isEnable(),a=(s?t.REST_HTTPS_SECURE:t.REST_HTTPS)+"/"+t.REST_USER_URL+"/"+r;return(s?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer)(a,o.DroiHttpMethod.PUT,e,null,n.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){return!0})},t.prototype.query=function(e,r,i,s,h){var l=c.DroiHttpSecure.isEnable(),f=(l?t.REST_HTTPS_SECURE:t.REST_HTTPS)+"/"+t.REST_USER_URL,p=l?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer,d=u.RestObject.generatorQueryString(r,i,s,h);return l||(d+="&include_depth=3"),""!==d&&(f=f+"?"+d),p(f,o.DroiHttpMethod.GET,null,null,n.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){if(t instanceof Array)return t;throw new a.DroiError(a.DroiError.INVALID_PARAMETER,"json is not array in query result")})},t.prototype.updateData=function(t,e,r,n,i,o){return u.RestObject.instance().updateData(t,e,r,n,i,o)},t.prototype.delete=function(e,r){var i=c.DroiHttpSecure.isEnable(),s=(i?t.REST_HTTPS_SECURE:t.REST_HTTPS)+"/"+t.REST_USER_URL+"/"+e;return(i?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer)(s,o.DroiHttpMethod.DELETE,null,null,n.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){return!0})},t.prototype.signupUser=function(e){var r=c.DroiHttpSecure.isEnable(),s=""+(r?t.REST_HTTPS_SECURE:t.REST_HTTPS+"/")+t.REST_USER_URL+t.REST_USER_SIGNUP,a=r?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer,u={Data:e,Type:t.USER_TYPE_GENERAL,InstallationId:i.DroiCore.getInstallationId()};return a(s,o.DroiHttpMethod.POST,JSON.stringify(u),null,null).then(function(t){return t})},t.prototype.loginUser=function(e,r){var s=c.DroiHttpSecure.isEnable(),a=""+(s?t.REST_HTTPS_SECURE:t.REST_HTTPS+"/")+t.REST_USER_URL+t.REST_USER_LOGIN,u=s?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer,h={Type:t.USER_TYPE_GENERAL,InstallationId:i.DroiCore.getInstallationId(),UserId:e,Password:r};return u(a,o.DroiHttpMethod.POST,JSON.stringify(h),null,null).then(function(t){return t})},t.prototype.loginAnonymous=function(e){var r=c.DroiHttpSecure.isEnable(),u=""+(r?t.REST_HTTPS_SECURE:t.REST_HTTPS+"/")+t.REST_USER_URL+t.REST_USER_LOGIN,h=r?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer,l='{"Type": "anonymous", "InstallationId": "'+i.DroiCore.getInstallationId()+'"}';return h(u,o.DroiHttpMethod.POST,l,null,null).catch(function(t){return t.code!=s.DroiConstant.DROI_API_USER_NOT_EXISTS?Promise.reject(t):Promise.resolve(t)}).then(function(n){if(!(n instanceof a.DroiError))return n;u=""+(r?t.REST_HTTPS_SECURE:t.REST_HTTPS+"/")+t.REST_USER_URL+t.REST_USER_SIGNUP;var s={Data:JSON.parse(e.toJson()),Type:"anonymous",InstallationId:i.DroiCore.getInstallationId()};return h(u,o.DroiHttpMethod.POST,JSON.stringify(s),null,null)})},t.prototype.logout=function(e){var r=c.DroiHttpSecure.isEnable(),i=""+(r?t.REST_HTTPS_SECURE:t.REST_HTTPS+"/")+t.REST_USER_URL+t.REST_USER_LOGOUT,s=r?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer,a=JSON.stringify({_Id:e});return s(i,o.DroiHttpMethod.POST,a,null,n.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){return!0})},t.prototype.requestOTP=function(e,r,i){var s=c.DroiHttpSecure.isEnable(),a=""+(s?t.REST_HTTPS_SECURE:t.REST_HTTPS+"/")+t.REST_USER_URL+t.REST_USER_OTP_LOGIN,u={UserId:e,Contact:r,ContactType:i};return(s?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer)(a,o.DroiHttpMethod.POST,JSON.stringify(u),null,null).then(function(t){return!0})},t.prototype.loginOTP=function(e,r,s){var a=c.DroiHttpSecure.isEnable(),u=""+(a?t.REST_HTTPS_SECURE:t.REST_HTTPS+"/")+t.REST_USER_URL+t.REST_USER_LOGIN,h=a?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer,l={OTP:{Code:e,ContactType:r},Data:s,Type:"otp",InstallationId:i.DroiCore.getInstallationId()};return h(u,o.DroiHttpMethod.POST,JSON.stringify(l),null,null).then(function(t){return t})},t.prototype.changePassword=function(e,r){var i=c.DroiHttpSecure.isEnable(),s=""+(i?t.REST_HTTPS_SECURE:t.REST_HTTPS+"/")+t.REST_USER_URL+t.REST_USER_PASSWORD,a={Old:e,New:r};return(i?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer)(s,o.DroiHttpMethod.PUT,JSON.stringify(a),null,n.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){return!0})},t.prototype.resetPassword=function(e,r){var i=c.DroiHttpSecure.isEnable(),s=""+(i?t.REST_HTTPS_SECURE:t.REST_HTTPS+"/")+t.REST_USER_URL+t.REST_USER_RESET_PASSWORD,a={UserId:e,ContactType:r};return(i?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer)(s,o.DroiHttpMethod.POST,JSON.stringify(a),null,null).then(function(t){return!0})},t.prototype.validateEmail=function(){var e=c.DroiHttpSecure.isEnable(),r=""+(e?t.REST_HTTPS_SECURE:t.REST_HTTPS+"/")+t.REST_USER_URL+t.REST_USER_EMAIL;return(e?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer)(r,o.DroiHttpMethod.POST,null,null,n.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){return!0})},t.prototype.validatePhoneNum=function(){var e=c.DroiHttpSecure.isEnable(),r=""+(e?t.REST_HTTPS_SECURE:t.REST_HTTPS+"/")+t.REST_USER_URL+t.REST_USER_SMS;return(e?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer)(r,o.DroiHttpMethod.POST,null,null,n.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){return!0})},t.prototype.confirmPhoneNumPin=function(e){var r=c.DroiHttpSecure.isEnable(),i=""+(r?t.REST_HTTPS_SECURE:t.REST_HTTPS+"/")+t.REST_USER_URL+t.REST_USER_VALIDATE_SMS,s={PinCode:e};return(r?n.RemoteServiceHelper.callServerSecure:n.RemoteServiceHelper.callServer)(i,o.DroiHttpMethod.POST,JSON.stringify(s),null,n.RemoteServiceHelper.TokenHolder.AUTO_TOKEN).then(function(t){return!0})},t.REST_USER_URL="users/v2",t.REST_HTTPS="https://api.droibaas.com/rest",t.REST_HTTPS_SECURE="/droi",t.REST_USER_LOGIN="/login",t.REST_USER_OTP_LOGIN="/otp/login",t.REST_USER_SIGNUP="/signup",t.REST_USER_LOGOUT="/logout",t.REST_USER_PASSWORD="/password",t.REST_USER_EMAIL="/email",t.REST_USER_SMS="/sms",t.REST_USER_VALIDATE_SMS="/validate/sms",t.REST_USER_RESET_PASSWORD="/otp/password",t.USER_TYPE_GENERAL="general",t.USER_TYPE_ANONYMOUS="anonymous",t.TABLE_NAME="_User",t.INSTANCE=null,t}();r.RestUser=h},{"../droi-api":34,"../droi-const":39,"../droi-core":40,"../droi-error":41,"../droi-http":44,"../droi-secure-http":54,"./object":70}]},{},[1])(1)});